(this.webpackJsonpreports=this.webpackJsonpreports||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/TermsAndConditions.43670da6.docx"},110:function(e,t,a){e.exports=a.p+"static/media/PrivacyPolicy.f98adba2.docx"},111:function(e,t,a){e.exports=a.p+"static/media/CookiesPolicy.b364bd24.docx"},207:function(e,t,a){e.exports=a(317)},212:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=(a(212),a(4)),i=a.n(o),l=a(6),m=a(89);var u=Object(m.b)({publicUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PUBLICUSERS":return t.publicUsers;case"UPDATE_PUBLICUSERS":return Object.assign({},e,t.publicUser);default:return e}},ratings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RATINGS":return t.ratings;case"UPDATE_RATINGS":return Object.assign({},e,t.rating);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",display_name:"",photo:"",token:"",email:"",ratings:{},reviews:[],wishlist:[],watchedlist:[],notifications:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;case"UPDATE_USER":return Object.assign({},e,t.userProperty);default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:"",category:"All"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":return t.search;case"UPDATE_SEARCH":return Object.assign({},e,t.search);default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",message:"",expired:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.notification;case"UPDATE_NOTIFICATION":return Object.assign({},e,t.notification);default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movies_api_key:"",captcha_api_key:"6Lc_87cZAAAAAHRx49G1d-mM3gxWM_RKLAA41T3U",movie_data_api:"",latest_movies_api:"",no_popular_reviews:5,no_popular_movies:5,no_allowed_reviews:5,no_comment_characters:400,no_display_name_characters:40,no_review_words:80,bg_image_refresh_time_days:1,bg_image_refresh_time_hours:0,bg_image_refresh_time_minutes:0,FacebookLink:"",InstagramLink:"",TwitterLink:"",LinkedinLink:"",current_bg_movie:{date_set:Date.now(),id:"300671",poster_path:"/4qnEeVPM8Yn5dIVC4k4yyjrUXeR.jpg",backdrop_path:"/ayDMYGUNVvXS76wQgFwTiUIDNb5.jpg",release_date:"2016-01-13",overview:"An American Ambassador is killed during an attack at a U.S. compound in Libya as a security team struggles to make sense out of the chaos.",title:"13 Hours: The Secret Soldiers of Benghazi",genres:[{id:28,name:"Action"},{id:36,name:"History"},{id:53,name:"Thriller"}],runtime:144}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SETTINGS":return t.settings;case"UPDATE_SETTINGS":return Object.assign({},e,t.settings);default:return e}},navbarHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HEIGHT":return t.height;default:return e}},dashboardMenuOpened:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DASHBOARD_MENU_OPENED":return t.isOpened;default:return e}}}),d=Object(m.c)(u,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),p=a(9),v=a(362),g=a(53),f=Object(g.a)(),E=a(7),b=a(2),h=a(23);var N=function(e){var t=e.size?e.size:16;return n.createElement("svg",Object.assign({id:"prefix__svg8",viewBox:"0 0 4.233 4.233",height:t,width:t},e),n.createElement("defs",{id:"prefix__defs2"},n.createElement("style",{id:"style899"},".prefix__b{font-size:6px;font-family:OpenSans-Semibold,Open Sans;font-weight:600}")),n.createElement("g",{transform:"translate(-20.26 -2.608)",id:"prefix__layer1"},n.createElement("g",{transform:"matrix(.26458 0 0 .26458 20.26 2.608)",id:"prefix__g928"},n.createElement("rect",{y:0,x:0,width:16,height:16,rx:8,id:"prefix__rect903",fill:"#fff"}),n.createElement("text",{className:"prefix__b",transform:"translate(5 6)",id:"prefix__text907"},n.createElement("tspan",{x:0,y:0,id:"prefix__tspan905"},"50")),n.createElement("text",{className:"prefix__b",transform:"translate(5 14)",id:"prefix__text911"},n.createElement("tspan",{x:0,y:0,id:"prefix__tspan909"},"50")),n.createElement("path",{d:"M6374.557 553h9",transform:"translate(-6370.950 -545)",id:"prefix__path913",fill:"none",stroke:"#000"}))))},w=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],y=[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}],x=[{name:"excellent_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(h.a,{emoji:"fire",set:"facebook",size:24}))},{name:"good_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(h.a,{emoji:"heart",set:"facebook",size:24}))},{name:"ok_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(N,{size:34}))},{name:"bad_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(h.a,{emoji:"shit",set:"facebook",size:24}))}],_=a(14),O="https://calm-coast-57354.herokuapp.com",j=function(e,t){return fetch("".concat(O).concat(e),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},k=function(e){return fetch("".concat(O).concat(e)).then((function(e){return e.json()}))},S=function(e){return j("/user/login",e)},C=function(e){return j("/user/loginWithToken",e)},I=function(e){k("/ratings/get/all").then((function(t){return e(t)}))},T=function(e){return k("/publicUsers/get/all").then((function(t){return e(t)}))},A=function(e,t,a,n){return j("/reviews/add",{review:e,movieId:t,user:a,apiKey:n})},D=function(e,t,a){return j("/reviews/edit",{review:e,prevReview:t,userId:a})},R=function(e){return j("/reviews/delete",{review:e})},Y=function(e){return j("/reviews/get/movie",{movieId:e})},U=function(e){return j("/reviews/getPromoted/movie",{movieId:e})},M=function(e,t){return j("/comments/update",{user:t,comment:e})},P=function(e,t){return j("/comments/edit",{commentId:t,comment:e})},F=function(e){return j("/comments/delete",{commentsIds:[e]})},z=function(e){return j("/comments/get/review",{reviewId:e})},L=function(e,t,a){return j("/movie/addToWishlist",{user:e,movieId:t,apiKey:a})},q=function(e,t){return j("/movie/views/add",{movieId:e,apiKey:t})},W=function(e,t){return j("/reviews/like",{user:e,reviewId:t})},B=function(e,t){return j("/comments/like",{user:e,commentId:t})},H=function(e,t){return j("/reviews/report",{user:e,reviewId:t})},G=function(e,t){return j("/comments/report",{user:e,commentId:t})},K=function(e){return j("/users/get",{userId:e})},V=function(e){return j("/reviews/get/user",{reviewIds:e})},X=function(e,t){return j("/reviews/get/user/one",{userId:e,movieId:t})},J=function(e){return j("/comments/get/user",{commentIds:e})},$=function(e){return j("/users/edit",{update:e})},Z=function(e){return j("/reviews/get/popular",{limit:e})},Q=function(e){return j("/reviews/get/recent",{limit:e})},ee=function(e){return j("/movies/get/recommended",{limit:e})},te=function(e){return j("/reviews/search",{query:e})},ae=function(e){return j("/settings/updateOrCreate",e)},ne=function(e){k("/settings/get").then((function(t){return e(t)}))},re=function(){return k("/admin/users/get")},ce=function(){return k("/admin/reviews/get")},se=function(){return k("/admin/comments/get")},oe=function(e,t){return j("/admin/reviews/edit",{review:e,user:t})},ie=function(e,t){return j("/admin/comments/edit",{comment:e,user:t})},le=function(e){return j("/admin/reviews/delete",e)},me=function(e){return j("/admin/comments/delete",e)},ue=function(e,t,a){return j("/admin/users/editMultiple",{ids:e,pids:t,update:a})},de=function(){return k("/admin/announcements/get")},pe=function(e){return j("/admin/announcements/create",e)},ve=function(e){return j("/admin/announcements/delete",e)},ge=function(e){return j("/admin/announcements/edit",e)},fe=function(){return k("/announcements/getActive")},Ee=function(){return k("/admin/promotions/get")},be=function(e){return j("/admin/promotions/edit",e)},he=function(e){return j("/user/notifications/get/",{ids:e})},Ne=function(){return k("/admin/notifications/get")},we=function(e){return j("/admin/notifications/create",e)},ye=function(e){return j("/admin/notifications/edit",e)},xe=function(e,t){return j("/admin/notifications/delete",{ids:e,update:t})},_e=function(e,t,a){return j("/movie/moveToWatchedList",{user:e,movieId:t,apiKey:a})},Oe=function(){return k("/reviews/getPromoted")},je=function(e){return j("/user/password/sendResetLink",{email:e})},ke=function(e,t){return j("/user/password/reset",{token:t,password:e})},Se=a(112),Ce=(a(219),a(187)),Ie=function(e){var t=e.className,a=e.onOpen,c=void 0===a?function(){}:a,s=e.position,o=void 0===s?"bottom":s,i=e.arrow,l=void 0===i||i,m=e.theme,u=void 0===m?"light":m,d=e.content,p=void 0===d?function(){}:d,v=e.trigger,g=void 0===v?"click":v,f=e.delay,E=void 0===f?0:f,h=e.animation,N=void 0===h?"scale":h,w=e.open,y=void 0===w?void 0:w,x=e.onHide,_=void 0===x?function(){}:x,O=(e.popoverWidth,Object(Se.a)(e,["className","onOpen","position","arrow","theme","content","trigger","delay","animation","open","onHide","popoverWidth"])),j=Object(n.useState)(0),k=Object(b.a)(j,2),S=k[0],C=k[1];Object(n.useEffect)((function(){return function(){for(var e=document.getElementsByClassName("tippy-popper"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}}),[]);var I=Object(n.useState)(!1),T=Object(b.a)(I,2),A=T[0],D=T[1];return r.a.createElement(Ce.Tooltip,{onShow:function(){A||(D(!0),c())},onHide:_,delay:E,hideDelay:0,html:p(S),position:o,trigger:g,theme:u,arrow:l,interactive:!0,animation:N,open:y,unmountHTMLWhenHide:!0,className:t},r.a.cloneElement(O.children,Object.assign({},O.children.props,{ref:function(e){if(e&&(0===S&&C(e.getBoundingClientRect().width),O.children)){var t=O.children.ref;t&&"current"in t&&(t.current=e),"function"===typeof t&&t(e)}}})))},Te=function(e){var t=e.loading,a=e.size,n=void 0===a?50:a,c=e.theme,s=void 0===c?"light":c;return t&&r.a.createElement("div",{className:"w-100 h-100 d-flex flex-center"},r.a.createElement("div",{className:"loader-".concat(s),style:{width:"".concat(n,"px"),height:"".concat(n,"px")}}))};var Ae=function(e){var t=e.size?e.size:20;return n.createElement("svg",Object.assign({viewBox:"0 0 4.928 2.882",height:t,width:t},e),n.createElement("g",{transform:"translate(-19.41 -12.996)",fillOpacity:.988,paintOrder:"markers fill stroke"},n.createElement("rect",{rx:0,y:12.996,x:19.41,height:.6,width:3.449,ry:.084}),n.createElement("rect",{width:3.449,height:.6,x:19.415,y:14.098,rx:0,ry:.077}),n.createElement("rect",{width:2.238,height:.551,x:19.423,y:15.226,rx:0,ry:.071}),n.createElement("rect",{rx:0,y:15.226,x:22.1,height:.551,width:2.238,ry:.077})))};var De=Object(p.b)((function(e,t){return Object(E.a)({apiKey:e.settings.movies_api_key},t)}))((function(e){var t=e.user,a=e.movie,c=e.apiKey,s=Object(n.useState)(!1),o=Object(b.a)(s,2),m=o[0],u=o[1],p=function(){var e=Object(l.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("movie id wishlist",a.id),!t.display_name){e.next=12;break}if(!a.id){e.next=10;break}return u(!0),e.next=7,L(t,a.id,c);case 7:r=e.sent,u(!1),r.updatedUser?(d.dispatch({type:"UPDATE_USER",userProperty:r.updatedUser}),d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Movie ".concat(n," wishlist"),message:"Movie successfully ".concat(n," your wishlist"),type:"success"}}),I((function(e){var t={};e.forEach((function(e){t[e.tmdb_id]=e})),d.dispatch({type:"SET_RATINGS",ratings:t})}))):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:JSON.stringify(r.error).replace(/"/g,""),type:"failure"}});case 10:e.next=13;break;case 12:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You need to login to add movie to wishlist",type:"failure"}});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action failed",message:"Couldn't add movie to wishlist",type:"failure"}});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),v=-1!==t.wishlist.findIndex((function(e){return e.movie_id===a.id.toString()}));return-1!==t.watchedlist.findIndex((function(e){return e.movie_id===a.id.toString()}))?"":r.a.createElement(Ie,{theme:"dark",position:"top",content:function(e){return r.a.createElement("div",{className:"px-3 py-2"},v?"Remove from wishlist":"Add to wishlist")},trigger:"mouseenter"},r.a.createElement("div",{style:{pointerEvents:"all"},className:"btn-custom ".concat(v?"btn-custom-danger":"btn-custom-iconic")},m?r.a.createElement(Te,{size:30,loading:m,color:"white"}):v?r.a.createElement(Ae,{color:"white",fill:"white",onClick:function(){return p("removed from")},size:28}):r.a.createElement(_.f,{onClick:function(){return p("added to")},className:"text-title-xl",style:{marginRight:"-5px"}})))})),Re=function(e,t){var a,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];for(a=n.length-1;a>0&&!(e>=n[a].value);a--);return(e/n[a].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[a].symbol},Ye=function(e){var t=Math.floor(e/60),a=e-60*t;return"".concat(t,"h ").concat(a,"m")},Ue=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())};var Me=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.emoji,a=e.onClick,n=e.size,c=void 0===n?"normal":n,s=e.allowRate,o=void 0!==s&&s,m=e.selected,u=e.className,d=e.value;return r.a.createElement("div",{onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&a&&a();case 1:case"end":return e.stop()}}),e)}))),className:"col-auto btn-reaction-".concat(c," ").concat(o?"btn-reaction":"").concat(m?" btn-reaction-selected":"").concat(u?" ".concat(u):"")},r.a.createElement("div",{className:"row no-gutters align-items-center h-100 justify-content-center"},void 0!==d&&null!==d?r.a.createElement("div",{className:"col mr-".concat("small"!==c?"2":"1")},Re(d.length,1)):"",r.a.createElement("div",{className:"col-auto"},"heavy_division_sign"===t?r.a.createElement("div",{style:{marginTop:"normal"===c?"-2px":"-4px"}},r.a.createElement(N,{size:"small"===c?14:"normal"===c?16:28})):r.a.createElement("div",{style:{marginBottom:"normal"===c?"-6px":"-2px"}},r.a.createElement(h.a,{emoji:t,set:"facebook",size:"small"===c?14:"normal"===c?16:28})))))})),Pe=a(188),Fe=a.n(Pe),ze=(a(72),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return"".concat("https://api.themoviedb.org/3").concat(e,"?api_key=").concat(a,"&").concat(["language=en-US"].concat(t).join("&"))}),Le=function(e,t){return fetch(ze("/discover/movie",["sort_by=popularity.desc","with_genres=".concat(e.join(","))],t)).then((function(e){return e.json()}))},qe=function(e,t){var a="serie-"===e.substring(0,6)?e.substring(6):e;return fetch(ze("/".concat("serie-"===e.substring(0,6)?"tv":"movie","/").concat(a,"/videos"),[],t)).then((function(e){return e.json()}))},We=function(e,t){return fetch(ze("/tv/".concat(e),[],t)).then((function(e){return e.json()}))},Be=function(e,t){return fetch(ze("/movie/".concat(e),[],t)).then((function(e){return e.json()}))},He=function(e,t){var a="serie-"===e.substring(0,6)?e.substring(6):e;return fetch(ze("/".concat("serie-"===e.substring(0,6)?"tv":"movie","/").concat(a,"/credits"),[],t)).then((function(e){return e.json()}))},Ge=function(e,t){var a=ze("/search/movie",["query=".concat(e)],t);return fetch(a).then((function(e){return e.json()}))},Ke=function(e,t){var a=ze("/search/tv",["query=".concat(encodeURI(e))],t);return fetch(a).then((function(e){return e.json()}))};var Ve=Object(p.b)((function(e,t){return Object(E.a)({settings:e.settings},t)}))((function(e){var t=e.movieId,a=e.settings,c=e.onEnded,s=e.modalOpened,o=e.setIsEmpty,m=void 0===o?function(){}:o,u=Object(n.useState)([]),d=Object(b.a)(u,2),p=d[0],v=d[1],g=Object(n.useState)(""),f=Object(b.a)(g,2),E=f[0],h=f[1];return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a.movies_api_key){e.next=5;break}return e.next=3,qe(t,a.movies_api_key);case 3:(n=e.sent).results&&n.results.length?v(n.results.map((function(e){return e.key}))):(h("We couldn't find trailer for this movie"),m());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a.movies_api_key]),r.a.createElement("div",{className:"col-xl-33 col-lg-36 col-md-39 col-sm-42 col-60"},r.a.createElement("div",{className:"row no-gutters"},p.length&&s?r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"trailer-player-wrapper"},r.a.createElement(Fe.a,{onEnded:c,config:{youtube:{playerVars:{showinfo:0,iv_load_policy:3}}},playing:!0,className:"trailer-player",controls:!0,width:"100%",height:"100%",url:"https://www.youtube.com/watch?v=".concat(p[0])}))):E?r.a.createElement("div",{className:"text-white h4 m-auto"},E):""))})),Xe=a(8),Je=function(e){return Object(n.useEffect)((function(){e.open?document.body.style.overflow="hidden":document.body.style.overflow="visible"}),[e.open]),r.a.createElement("div",{className:"container-fluid w-100 h-100 modal-container px-0 text-white overflow-auto".concat(e.open?"":" d-none")},r.a.createElement("div",{className:"row no-gutters justify-content-end",style:{position:"sticky",top:0}},r.a.createElement("div",{onClick:e.onClose,className:"modal-closer"},r.a.createElement(Xe.o,{fontSize:"24px",strokeWidth:"2px"}))),r.a.createElement("div",{className:"row no-gutters h-100 align-items-center justify-content-center"},r.a.cloneElement(e.children,Object.assign({},e.children.props,{modalOpened:e.open}))))},$e=a(19),Ze=a(15);var Qe=Object(p.b)((function(e,t){return Object(E.a)({apiKey:e.settings.movies_api_key},t)}))((function(e){var t=e.user,a=e.movieId,c=e.refreshProfile,s=void 0===c?function(){}:c,o=e.apiKey,m=Object(n.useState)(!1),u=Object(b.a)(m,2),p=u[0],v=u[1],g=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.display_name){e.next=10;break}if(!a){e.next=8;break}return v(!0),e.next=5,_e(t,a,o);case 5:n=e.sent,v(!1),n.updatedUser?(r=Object(Ze.a)(t.wishlist),-1!==(c=r.findIndex((function(e){return e.movie_id===a})))&&r.splice(c),d.dispatch({type:"UPDATE_USER",userProperty:n.updatedUser}),d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Movie marked as watched",message:"Movie successfully added to your watched list",type:"success"}}),d.dispatch({type:"UPDATE_RATINGS",rating:Object($e.a)({},a,n.rating)}),s()):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:JSON.stringify(n.error).replace(/"/g,""),type:"failure"}});case 8:e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You need to login to add movie to wishlist",type:"failure"}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Ie,{theme:"dark",position:"top",content:function(e){return r.a.createElement("div",{className:"px-3 py-2"},"Mark as watched")},trigger:"mouseenter"},r.a.createElement("div",{className:"btn-custom btn-custom-iconic",style:{pointerEvents:"all"}},p?r.a.createElement(Te,{size:30,loading:p,color:"white"}):r.a.createElement(_.h,{onClick:g,className:"text-title-xl"})))}));var et=Object(p.b)((function(e,t){return Object(E.a)({settings:e.settings,ratings:e.ratings},t)}))((function(e){var t=e.open,a=e.onClose,c=e.movie,s=e.user,o=e.review,m=e.refreshReviews,u=void 0===m?function(){}:m,p=e.settings,v=e.ratings,g=e.userIsOwner,f=Object(n.useState)({review:"",rating:""}),h=Object(b.a)(f,2),N=h[0],w=h[1],y=Object(n.useState)(""),x=Object(b.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)(!1),k=Object(b.a)(j,2),S=k[0],C=k[1];return Object(n.useEffect)((function(){o&&w((function(e){return Object.assign({},e,{review:o.review,rating:o.rating})}))}),[o]),c?r.a.createElement(Je,{open:t,onClose:a},r.a.createElement("div",{className:"col-xl-42 p-4 bg-over-root-lighter rounded mx-4"},r.a.createElement("div",{className:"row no-gutters h5 mb-4"},g?"Edit":"Add"," Review - ",c.title," (",c.release_date.substring(0,4),")"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-3 d-none d-md-block"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(s.photo,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters d-flex d-md-none mb-3 justify-content-between"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(s.photo,")")}})),r.a.createElement("div",{className:"d-flex align-items-end col-auto ".concat(N.review.split(" ").length<=p.no_review_words-1?"text-muted":"text-danger")},N.review?p.no_review_words-N.review.split(" ").length:p.no_review_words," ","words left")),r.a.createElement("div",{className:"row no-gutters mb-2",style:{height:"150px"}},r.a.createElement("textarea",{onChange:function(e){e.persist();var t=e.target.value;t.split(" ").length<=p.no_review_words&&w((function(e){return Object.assign({},e,{review:t})}))},value:N.review,spellCheck:!1,placeholder:"Add your review...",style:{resize:"none"},className:"w-100 h-100 textarea"})),r.a.createElement("div",{className:"row no-gutters justify-content-between mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Me,{allowRate:!0,size:"big",onClick:function(){return w((function(e){return Object.assign({},e,{rating:"excellent_rate"})}))},selected:"excellent_rate"===N.rating,emoji:"fire",className:"mr-2 mb-2",value:v[c.id]?v[c.id].excellent_rate:0}),r.a.createElement(Me,{allowRate:!0,size:"big",onClick:function(){return w((function(e){return Object.assign({},e,{rating:"good_rate"})}))},selected:"good_rate"===N.rating,emoji:"heart",className:"mr-2 mb-2",value:v[c.id]?v[c.id].good_rate:0}),r.a.createElement(Me,{allowRate:!0,size:"big",onClick:function(){return w((function(e){return Object.assign({},e,{rating:"ok_rate"})}))},selected:"ok_rate"===N.rating,emoji:"heavy_division_sign",className:"mr-2 mb-2",value:v[c.id]?v[c.id].ok_rate:0}),r.a.createElement(Me,{allowRate:!0,size:"big",onClick:function(){return w((function(e){return Object.assign({},e,{rating:"bad_rate"})}))},emoji:"shit",selected:"bad_rate"===N.rating,className:"mr-2",value:v[c.id]?v[c.id].bad_rate:0}))),r.a.createElement("div",{className:"d-none d-md-block col-auto ".concat(N.review.split(" ").length<=p.no_review_words-1?"text-muted":"text-danger")},N.review?p.no_review_words-N.review.split(" ").length:p.no_review_words," ","words left")),r.a.createElement("div",{className:"row no-gutters align-items-center text-danger justify-content-end",style:{height:"30px",opacity:_?1:0}},_),r.a.createElement("div",{className:"row no-gutters justify-content-md-end justify-content-center"},r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small position-relative",onClick:Object(l.a)(i.a.mark((function e(){var t,n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N.rating){e.next=5;break}O("Select rating"),e.next=23;break;case 5:if(N.review){e.next=9;break}O("Review is empty"),e.next=23;break;case 9:if(C(!0),!g){e.next=16;break}return e.next=13,D(N,o,s._id);case 13:e.t0=e.sent,e.next=19;break;case 16:return e.next=18,A(N,c.id,s,p.movies_api_key);case 18:e.t0=e.sent;case 19:t=e.t0,C(!1),w({review:"",rating:""}),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't ".concat(g?"edit":"add"," review"),type:"failure",message:JSON.stringify(t.error).replace(/"/g,"")}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"You successfully ".concat(g?"edited":"wrote"," review"),type:"success",message:"Your review was successfully ".concat(g?"edited":"added")}}),d.dispatch({type:"UPDATE_RATINGS",rating:Object($e.a)({},c.id,t.rating)}),g||((n=Object(Ze.a)(s.watchedlist)).push({movie_id:c.id.toString()}),(r=Object(Ze.a)(s.reviews)).push(t.reviewId),d.dispatch({type:"UPDATE_USER",userProperty:{watchedlist:n,reviews:r}})),(l=Object(E.a)({},s.ratings))[c.id]={movie_id:c.id,rate_type:N.rating},d.dispatch({type:"UPDATE_USER",userProperty:{ratings:l}}),a(),u());case 23:e.next=27;break;case 25:e.prev=25,e.t1=e.catch(0);case 27:case"end":return e.stop()}}),e,null,[[0,25]])})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:S,size:20}),"Submit")))))):""}));var tt=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.movies,a=e.user,c=e.ratings,s=(e.prefix,Object(n.useState)("")),o=Object(b.a)(s,2),i=o[0],l=o[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),d=u[0],p=u[1],v=Object(n.useState)(!1),g=Object(b.a)(v,2),E=g[0],h=g[1],N=Object(n.useState)(!1),x=Object(b.a)(N,2),_=x[0],O=x[1];return r.a.createElement("div",{className:"row justify-content-end"},r.a.createElement(Je,{open:d,onClose:function(){return p(!1)}},r.a.createElement(Ve,{movieId:i,onEnded:function(){return p(!1)}})),r.a.createElement(et,{open:E,onClose:function(){return h(!1)},movie:_,user:a}),t.map((function(e,t){return r.a.createElement("div",{key:"result-".concat(t),className:"col-lg-12 col-md-15 col-sm-20 col-60 p-3 text-white"},r.a.createElement("div",{className:"row no-gutters justify-content-end position-relative px-2 d-none d-sm-flex",style:{marginBottom:"-51px",zIndex:5,height:"44px",pointerEvents:"none"}},r.a.createElement(De,{movie:e,user:a}),r.a.createElement("div",{className:"pr-1"}),r.a.createElement(Qe,{refreshProfile:function(){O(e),h(!0)},user:a,movieId:e.id})),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-60 col-auto mr-3 mr-sm-0"},r.a.createElement("div",{className:"row no-gutters mb-2 position-relative movies-list-image"},r.a.createElement("img",{alt:e.poster_path,width:"100%",style:{borderRadius:"13px"},className:"img-clickable",src:e.poster_path?"https://image.tmdb.org/t/p/w342".concat(e.poster_path):"https://critics.io/img/movies/poster-placeholder.png"}),r.a.createElement("div",{onClick:function(){return f.push("/movie/".concat(e.name?"serie-".concat(e.id):e.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},r.a.createElement("div",{className:"square-50 rounded-circle d-flex flex-center play-btn",onClick:function(t){t.stopPropagation(),l(e.id),p(!0)}},r.a.createElement(Xe.l,{style:{fontSize:"30px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col-sm-60 col"},r.a.createElement("div",{className:"row no-gutters text-title-md mb-0 cursor-pointer",onClick:function(){return f.push("/movie/".concat(e.id))}},r.a.createElement("div",{className:"text-truncate"},e.title?e.title:e.name)),r.a.createElement("div",{className:"row no-gutters text-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},e.genre_ids.length?e.genre_ids.map((function(t){var a=e.title?w.find((function(e){return e.id===t})):y.find((function(e){return e.id===t}));return a?a.name:"unknown"})).join("/"):"unknown")),r.a.createElement("div",{className:"row no-gutters justify-content-sm-end mb-2"},r.a.createElement(Me,{selected:!!a.ratings[e.id]&&"excellent_rate"===a.ratings[e.id].rate_type,movie:e,emoji:"fire",className:"mr-1 mb-2",size:"small",value:c[e.id]?c[e.id].excellent_rate:[]}),r.a.createElement(Me,{size:"small",selected:!!a.ratings[e.id]&&"good_rate"===a.ratings[e.id].rate_type,movie:e,emoji:"heart",className:"mr-1 mb-2",value:c[e.id]?c[e.id].good_rate:[]}),r.a.createElement(Me,{size:"small",selected:!!a.ratings[e.id]&&"ok_rate"===a.ratings[e.id].rate_type,movie:e,className:"mr-1 mb-2",emoji:"heavy_division_sign",value:c[e.id]?c[e.id].ok_rate:[]}),r.a.createElement(Me,{size:"small",emoji:"shit",value:c[e.id]?c[e.id].bad_rate:[],selected:!!a.ratings[e.id]&&"bad_rate"===a.ratings[e.id].rate_type,movie:e})),r.a.createElement("div",{className:"row no-gutters d-flex d-sm-none"},r.a.createElement(De,{movie:e,user:a})))))})))})),at=a(47),nt=[{name:"All",genresIds:[]},{name:"Suspense & Thriller",genresIds:[27,53]},{name:"Action & Adventure",genresIds:[28,12]},{name:"Romance",genresIds:[10749]},{name:"Crime & Drama",genresIds:[80,18]},{name:"Sci-Fi",genresIds:[878]},{name:"History & Documentary",genresIds:[36,99]}];var rt=Object(p.b)((function(e,t){return Object(E.a)({settings:e.settings,user:e.user},t)}))((function(e){var t=e.apiKey,a=e.settings,c=e.user,s=Object(n.useRef)(),o=Object(n.useState)([]),m=Object(b.a)(o,2),u=m[0],d=m[1],p=Object(n.useState)("All"),v=Object(b.a)(p,2),g=v[0],f=v[1],E=Object(n.useState)([]),h=Object(b.a)(E,2),N=h[0],w=h[1],y=Object(n.useState)([]),x=Object(b.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)([]),k=Object(b.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)([]),T=Object(b.a)(I,2),A=T[0],D=T[1];return Object(n.useEffect)((function(){c&&(O(c.wishlist.map((function(e){return e.movie_id}))),C(c.watchedlist.map((function(e){return e.movie_id}))))}),[c]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a.no_popular_movies){e.next=5;break}return e.next=3,Le(u,t);case 3:n=e.sent,w(n.results);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u,t,a]),Object(n.useEffect)((function(){s.current.recalculate()}),[N]),Object(n.useEffect)((function(){N&&D(N.filter((function(e){return!_.includes(e.id.toString())&&!S.includes(e.id.toString())})).slice(0,a.no_popular_movies))}),[S,_,N]),r.a.createElement("div",{className:"row no-gutters justify-content-center text-white"},r.a.createElement("div",{className:"col-60 py-3 px-md-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters h5"},r.a.createElement("div",{className:"col-auto",style:{padding:"6px 30px 6px 0px",background:"linear-gradient(to left, #ff0037, transparent)",borderRadius:"0 4px 4px 0"}},"Popular Movies")),r.a.createElement("div",{className:"row no-gutters text-light"},"Most watched movies in last 30 days"),r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-4"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(at.a,{ref:s,style:{padding:"14px 0",maxWidth:"100%",overflowX:"auto",whiteSpace:"nowrap"}},nt.map((function(e,t){return r.a.createElement("div",{onClick:function(){f(e.name),d(e.genresIds)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(g===e.name?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},e.name)}))))),r.a.createElement(tt,{movies:A})))})),ct=function(e){var t=e.movies;return r.a.createElement("div",{className:"row no-gutters"},t.map((function(e,t){return r.a.createElement("div",{className:"col-sm-15 col-md-12 col-lg-15 col-60 pr-2 pb-2 text-white position-relative",key:"recommended-today-movie-".concat(t)},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-60 col-auto mr-3 mr-sm-0"},r.a.createElement("img",{alt:e.movie_poster,className:"img-clickable movies-list-image",onClick:function(){return f.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px"},src:"https://image.tmdb.org/t/p/w154".concat(e.movie_poster)})),r.a.createElement("div",{className:"col-sm-60 col d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters cursor-pointer",onClick:function(){return f.push("/movie/".concat(e.movie_id))}},e.movie_title),r.a.createElement("div",{className:"row no-gutters text-muted"},r.a.createElement("small",{className:"text-truncate"},e.movie_genres)))))})))},st=a(12),ot=a.n(st),it=a(353),lt=function(e){var t=e.count,a=e.current,c=e.setCurrent,s=e.classNames,o=void 0===s?{selected:"input-light-selected",notSelected:"input-light"}:s,i=a===t?a-2:a-1>=1?a-1:a,l=i+1,m=l+1;return Object(n.useEffect)((function(){1===t&&c(1)}),[t]),t>1?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters d-flex d-lg-none user-select-none"},r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 mr-1 cursor-pointer"),onClick:function(){return c(a-1>=1?a-1:a)}},r.a.createElement(Xe.f,{fontSize:"16px"})),r.a.createElement("div",{className:"".concat(o.selected," col-auto text-center mr-1"),style:{width:"50px"}},a),r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 cursor-pointer"),onClick:function(){return c(a+1<=t?a+1:a)}},r.a.createElement(Xe.g,{fontSize:"16px"}))),r.a.createElement("div",{className:"row no-gutters user-select-none d-none d-lg-flex"},r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 mr-1 cursor-pointer"),onClick:function(){return c(a-1>=1?a-1:a)}},"Previous"),i-1>=1&&r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," text-center mr-1 cursor-pointer"),style:{width:"50px"},onClick:function(){return c(i-1>=1?i-1:i)}},"..."),i>=1&&r.a.createElement("div",{style:{width:"50px"},className:"px-0 col-auto ".concat(a===i?o.selected:o.notSelected," text-center mr-1 cursor-pointer"),onClick:function(){return c(i)}},i),l<=t&&l>=1&&r.a.createElement("div",{style:{width:"50px"},className:"px-0 col-auto ".concat(a===l?o.selected:o.notSelected," text-center mr-1 cursor-pointer"),onClick:function(){return c(l)}},l),m<=t&&m>=1&&r.a.createElement("div",{className:"px-0 col-auto ".concat(a===m?o.selected:o.notSelected," text-center mr-1 cursor-pointer"),style:{width:"50px"},onClick:function(){return c(m)}},m),m+1<=t&&r.a.createElement("div",{onClick:function(){return c(m+1<=t?m+1:a)},className:"col-auto ".concat(o.notSelected," text-center mr-1 cursor-pointer"),style:{width:"50px"}},"..."),r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 cursor-pointer"),onClick:function(){return c(a+1<=t?a+1:a)}},"Next"))):""};var mt=Object(p.b)((function(e,t){return Object(E.a)({settings:e.settings},t)}))((function(e){var t=e.open,a=e.onClose,c=e.user,s=e.review,o=e.movie,m=e.reviewAuthor,u=(e.setComments,e.setReviewIdOfVisibleComments),p=e.refreshComments,v=e.refreshReviews,g=e.settings,f=Object(n.useState)({comment:""}),h=Object(b.a)(f,2),N=h[0],w=h[1],y=Object(n.useState)(""),x=Object(b.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)(!1),k=Object(b.a)(j,2),S=k[0],C=k[1];return r.a.createElement(Je,{open:t,onClose:a},r.a.createElement("div",{className:"col-xl-42 p-4 bg-over-root-lighter rounded mx-4"},r.a.createElement("div",{className:"row no-gutters h5 mb-4"},"Reply to ",m.display_name),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-3 d-none d-md-block"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c.photo,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters d-flex d-md-none justify-content-between mb-3"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c.photo,")")}})),r.a.createElement("div",{className:"col-auto d-flex align-items-end ".concat(N.comment.length<=g.no_comment_characters-1?"text-muted":"text-danger")},N.comment?g.no_comment_characters-N.comment.length:g.no_comment_characters," ","characters left")),r.a.createElement("div",{className:"row no-gutters mb-2",style:{height:"150px"}},r.a.createElement("textarea",{onChange:function(e){e.persist();var t=e.target.value;t.length<=g.no_comment_characters&&w((function(e){return Object.assign({},e,{comment:t})}))},value:N.comment,spellCheck:!1,placeholder:"Add your comment...",style:{resize:"none"},className:"w-100 h-100 textarea"})),r.a.createElement("div",{className:"row no-gutters justify-content-md-end justify-content-center"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto d-none d-md-block ".concat(N.comment.length<=g.no_comment_characters-1?"text-muted":"text-danger")},N.comment?g.no_comment_characters-N.comment.length:g.no_comment_characters," ","characters left"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters align-items-center text-danger justify-content-end",style:{height:"30px",opacity:_?1:0}},_)),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small",onClick:Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.comment){e.next=4;break}O("Type comment"),e.next=18;break;case 4:if(!c.token){e.next=17;break}return C(!0),t=Object.assign({},N,{author_name:c.display_name,movie_id:o.id,comment_id:s.comment_id,review_id:s._id,review:s.review,review_author:s.author,notificationReceivers:s.notificationReceivers}),delete(n=Object(E.a)({},c)).photo,w({comment:""}),e.next=12,M(t,n);case 12:r=e.sent,C(!1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't add your comment",type:"failure",message:JSON.stringify(r.error).replace(/"/g,"")}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"You successfully writed comment",type:"success",message:"Your comment successfully added"}}),a(),u(s._id),p(),v()),e.next=18;break;case 17:O("You need to login to write comment");case 18:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:S,size:20}),"Send"))))))}));var ut=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,settings:e.settings,ratings:e.ratings,user:e.user},t)}))((function(e){var t=e.publicUsers,a=e.settings,c=e.user,s=e.ratings,o=Object(n.useState)({}),m=Object(b.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)([]),g=Object(b.a)(v,2),E=g[0],w=g[1],y=Object(n.useState)([]),x=Object(b.a)(y,2),O=x[0],j=x[1],k=Object(n.useState)(-1),S=Object(b.a)(k,2),C=S[0],I=S[1],T=Object(n.useState)(-1),A=Object(b.a)(T,2),D=A[0],R=A[1],Y=Object(n.useState)(-1),U=Object(b.a)(Y,2),M=U[0],P=U[1],F=Object(n.useState)(-1),L=Object(b.a)(F,2),q=L[0],K=L[1],V=Object(n.useState)(1),X=Object(b.a)(V,2),J=X[0],$=X[1],Q=Object(n.useRef)(null),ee=Object(n.useState)({movie_title:"",movie_id:"",movie_genres:"",movie_release_date:"",movie_poster:""}),te=Object(b.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),ce=Object(b.a)(re,2),se=ce[0],oe=ce[1],ie=Object(n.useState)(!1),le=Object(b.a)(ie,2),me=le[0],ue=le[1],de=Object(n.useState)(!1),pe=Object(b.a)(de,2),ve=pe[0],ge=pe[1],fe=Object(n.useState)({}),Ee=Object(b.a)(fe,2),be=Ee[0],he=Ee[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===C){e.next=7;break}return e.next=3,z(C);case 3:t=e.sent,a={},t.forEach((function(e){a[e._id]=e})),p((function(e){return Object.assign({},e,Object($e.a)({},C,a))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[C,me]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n,r,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.no_popular_reviews){e.next=12;break}return e.next=3,Oe();case 3:return t=e.sent,n=[],r={},t.error||t.forEach((function(e){n.push(e.content_id),r[e.content_id]=e})),he(r),e.next=10,Z(a.no_popular_reviews);case 10:(c=e.sent).error||(s=[],o=[],c.forEach((function(e){n.includes(e._id)?(e.promoted=!0,s.push(e)):o.push(e)})),j(s),w(o));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,ve]);return r.a.createElement("div",{className:"row no-gutters justify-content-center text-white"},r.a.createElement("div",{className:"col-60 content-container py-3 px-md-5 px-4"},r.a.createElement("div",{className:"row no-gutters h5"},r.a.createElement("div",{className:"col-auto",style:{padding:"6px 30px 6px 0px",background:"linear-gradient(to left, #ff0037, transparent)",borderRadius:"0 4px 4px 0"}},"Popular Reviews")),r.a.createElement("div",{className:"row no-gutters text-light mb-3"},"Most commented reviews in last 30 days"),r.a.createElement("div",{className:"row no-gutters mb-2",ref:Q}),O.concat(E).slice(0,8).map((function(e,a){var n=be[e._id]?be[e._id].content.rating:e.rating,o=be[e._id]?be[e._id].content.review:e.review;return r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(a)},r.a.createElement("div",{key:"review-".concat(a),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:"poster-of-".concat(e.movie_id),onClick:function(){return f.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(s[e.movie_id]?s[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png")}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(s[e.movie_id]?s[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},s[e.movie_id]?s[e.movie_id].movie_title:""," ","(",s[e.movie_id]?s[e.movie_id].movie_release_date.substring(0,4):"",")")))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[e.author]?t[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},t[e.author]?t[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white align-items-center"},r.a.createElement("span",{className:"mr-2 col-auto"},"Posted on"),r.a.createElement("span",{className:"text-muted col-auto mr-2"},ot.a.format(new Date(e.date),"MMM DD, YYYY")),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.token){t.next=9;break}return K(e._id),t.next=4,H(c,e._id);case 4:a=t.sent,K(-1),a.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review reported",message:"Review was successfully reported. We will review it soon.",type:"success"}}),t.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report review",type:"failure"}});case 10:case"end":return t.stop()}}),t)})))},q===e._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(_.c,{fontSize:"24px"})))))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-size-14 flex-grow-0 font-weight-300 text-break"},o),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{style:{marginBottom:"-6px"}},"ok_rate"===n?r.a.createElement(N,{size:24}):r.a.createElement(h.a,{emoji:"excellent_rate"===n?"fire":"good_rate"===n?"heart":"ok_rate"===n?"heavy-division-sign":"shit",set:"facebook",size:24})))),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},M===a?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:M===a,size:20})):r.a.createElement(_.j,{onClick:Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.token){t.next=13;break}if(c._id===e.author){t.next=10;break}return P(a),t.next=5,W(c,e._id);case 5:n=t.sent,P(-1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):ge(!ve),t.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own review",type:"failure"}});case 11:t.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return t.stop()}}),t)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(_.b,{onClick:function(){I(C===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){c.token?(ne(Object.assign({},e,{notificationReceivers:[t[e.author]]})),oe(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))))),r.a.createElement(it.a,{in:C===e._id,className:"mb-3"},r.a.createElement("div",{className:"py-2 text-light",style:{marginLeft:"30px"}},"Comments (",u[e._id]?Object.values(u[e._id]).length:0,")"),u[e._id]?function e(a,n){return a.map((function(a,s){return u[n._id][a]?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginLeft:"".concat(60*u[n._id][a].notificationReceivers.length-30,"px")},key:"comment-".concat(C,"-").concat(s),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2 indented-comment"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(t[u[n._id][a].author]?t[u[n._id][a].author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[u[n._id][a].author]?t[u[n._id][a].author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},t[u[n._id][a].author]?t[u[n._id][a].author].display_name:""))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},"Commented on"),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},ot.a.format(new Date(u[n._id][a].date),"MMM DD, YYYY")))),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-over-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.token){e.next=9;break}return K(a),e.next=4,G(c,a);case 4:t=e.sent,K(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment reported",message:"Comment was successfully reported. We will review it soon.",type:"success"}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report comment",type:"failure"}});case 10:case"end":return e.stop()}}),e)})))},q===a?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(_.c,{fontSize:"24px"})))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},u[n._id][a].comment),r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},u[n._id][a].likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},D===s?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:D===s,size:20})):r.a.createElement(_.j,{onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.token){e.next=13;break}if(c._id===u[n._id][a].author){e.next=10;break}return R(s),e.next=5,B(c,a);case 5:t=e.sent,R(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):ue(!me),e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own comment",type:"failure"}});case 11:e.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return e.stop()}}),e)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){c.token?(ne(Object.assign({},n,{comment_id:a,notificationReceivers:u[n._id][a].notificationReceivers.concat([t[u[n._id][a].author]])})),oe(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))),e(u[n._id][a].comments,n)):""}))}(Object.values(u[e._id]).filter((function(e){return 1===e.notificationReceivers.length})).map((function(e){return e._id})),e):"",r.a.createElement("div",{className:"row no-gutters justify-content-end mt-2"},r.a.createElement("div",{className:"col-auto ml-4"},r.a.createElement(lt,{count:Math.ceil(u[e._id]?u[e._id].length/5:1),current:J,setCurrent:$,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))})),r.a.createElement(mt,{refreshReviews:function(){return ge(!ve)},setReviewIdOfVisibleComments:I,refreshComments:function(){return ue(!me)},setComments:p,movie:{id:ae.movie_id},reviewAuthor:t[ae.author]?t[ae.author]:{display_name:""},review:ae,open:se,onClose:function(){return oe(!1)},user:c})))}));var dt=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings,user:e.user},t)}))((function(e){var t=e.publicUsers,a=e.user,c=e.ratings,s=Object(n.useState)({}),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)([]),v=Object(b.a)(p,2),g=v[0],E=v[1],w=Object(n.useState)(-1),y=Object(b.a)(w,2),x=y[0],O=y[1],j=Object(n.useState)(-1),k=Object(b.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)(-1),T=Object(b.a)(I,2),A=T[0],D=T[1],R=Object(n.useState)(-1),Y=Object(b.a)(R,2),U=Y[0],M=Y[1],P=Object(n.useState)(1),F=Object(b.a)(P,2),L=F[0],q=F[1],K=Object(n.useRef)(null),V=Object(n.useState)(!1),X=Object(b.a)(V,2),J=X[0],$=X[1],Z=Object(n.useState)({movie_title:"",movie_id:"",movie_genres:"",movie_release_date:"",movie_poster:""}),ee=Object(b.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(b.a)(ne,2),ce=re[0],se=re[1],oe=Object(n.useState)(!1),ie=Object(b.a)(oe,2),le=ie[0],me=ie[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===x){e.next=7;break}return e.next=3,z(x);case 3:t=e.sent,a={},t.forEach((function(e){a[e._id]=e})),u((function(e){return Object.assign({},e,Object($e.a)({},x,a))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x,ce]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(10);case 2:(t=e.sent).error||E(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[le]);return r.a.createElement("div",{className:"row no-gutters justify-content-center text-white"},r.a.createElement("div",{className:"col-60 content-container py-3 px-md-5 px-4"},r.a.createElement("div",{className:"row no-gutters h5"},r.a.createElement("div",{className:"col-auto",style:{padding:"6px 30px 6px 0px",background:"linear-gradient(to left, #ff0037, transparent)",borderRadius:"0 4px 4px 0"}},"Recent Reviews")),r.a.createElement("div",{className:"row no-gutters text-light mb-3"},"Most recent reviews in days"),r.a.createElement("div",{className:"row no-gutters mb-2",ref:K}),g.slice(0,8).map((function(e,n){return r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(n)},r.a.createElement("div",{key:"review-".concat(n),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:"poster-of-".concat(e.movie_id),onClick:function(){return f.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id]?c[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png")}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id]?c[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},c[e.movie_id]?c[e.movie_id].movie_title:""," ","(",c[e.movie_id]?c[e.movie_id].movie_release_date.substring(0,4):"",")")))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[e.author]?t[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},t[e.author]?t[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white align-items-center"},r.a.createElement("span",{className:"mr-2 col-auto"},"Posted on"),r.a.createElement("span",{className:"text-muted col-auto mr-2"},ot.a.format(new Date(e.date),"MMM DD, YYYY")),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.token){t.next=9;break}return M(e._id),t.next=4,H(a,e._id);case 4:n=t.sent,M(-1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review reported",message:"Review was successfully reported. We will review it soon.",type:"success"}}),t.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report review",type:"failure"}});case 10:case"end":return t.stop()}}),t)})))},U===e._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(_.c,{fontSize:"24px"})))))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-size-14 flex-grow-0 font-weight-300 text-break"},e.review),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},e.rating?"ok_rate"===e.rating?r.a.createElement(N,{size:24}):r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(h.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy-division-sign":"shit",set:"facebook",size:24})):"")),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},A===n?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:A===n,size:20})):r.a.createElement(_.j,{onClick:Object(l.a)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.token){t.next=13;break}if(a._id===e.author){t.next=10;break}return D(n),t.next=5,W(a,e._id);case 5:r=t.sent,D(-1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):me(!le),t.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own review",type:"failure"}});case 11:t.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return t.stop()}}),t)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(_.b,{onClick:function(){O(x===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){a.token?(ae(Object.assign({},e,{notificationReceivers:[t[e.author]]})),$(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))))),r.a.createElement(it.a,{in:x===e._id,className:"mb-3"},r.a.createElement("div",{className:"py-2 text-light",style:{marginLeft:"30px"}},"Comments (",m[e._id]?Object.values(m[e._id]).length:0,")"),m[e._id]?function e(n,c){return n.map((function(n,s){return m[c._id][n]?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginLeft:"".concat(60*m[c._id][n].notificationReceivers.length-30,"px")},key:"comment-".concat(x,"-").concat(s),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2 indented-comment"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(t[m[c._id][n].author]?t[m[c._id][n].author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[m[c._id][n].author]?t[m[c._id][n].author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},t[m[c._id][n].author]?t[m[c._id][n].author].display_name:""))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},"Commented on"),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},ot.a.format(new Date(m[c._id][n].date),"MMM DD, YYYY")))),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-over-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=9;break}return M(n),e.next=4,G(a,n);case 4:t=e.sent,M(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment reported",message:"Comment was successfully reported. We will review it soon.",type:"success"}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report comment",type:"failure"}});case 10:case"end":return e.stop()}}),e)})))},U===n?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(_.c,{fontSize:"24px"})))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},m[c._id][n].comment),r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},m[c._id][n].likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},S===s?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:S===s,size:20})):r.a.createElement(_.j,{onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=13;break}if(a._id===m[c._id][n].author){e.next=10;break}return C(s),e.next=5,B(a,n);case 5:t=e.sent,C(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):se(!ce),e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own comment",type:"failure"}});case 11:e.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return e.stop()}}),e)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){a.token?(ae(Object.assign({},c,{comment_id:n,notificationReceivers:m[c._id][n].notificationReceivers.concat([t[m[c._id][n].author]])})),$(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))),e(m[c._id][n].comments,c)):""}))}(Object.values(m[e._id]).filter((function(e){return 1===e.notificationReceivers.length})).map((function(e){return e._id})),e):"",r.a.createElement("div",{className:"row no-gutters mt-2 justify-content-end"},r.a.createElement("div",{className:"col-auto ml-4"},r.a.createElement(lt,{count:Math.ceil(m[e._id]?m[e._id].length/5:1),current:L,setCurrent:q,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))})),r.a.createElement(mt,{refreshReviews:function(){return me(!le)},setReviewIdOfVisibleComments:O,refreshComments:function(){return se(!ce)},setComments:u,movie:{id:te.movie_id},reviewAuthor:t[te.author]?t[te.author]:{display_name:""},review:te,open:J,onClose:function(){return $(!1)},user:a})))})),pt=function(){var e=1280,t=1280;return[300,780,1280].forEach((function(a){var n=Math.abs(window.innerWidth-a);n<t&&(t=n,e=a)})),e};var vt=Object(p.b)((function(e,t){return Object(E.a)({publicUser:e.publicUsers,ratings:e.ratings,settings:e.settings,user:e.user,navbarHeight:e.navbarHeight},t)}))((function(e){e.publicUsers;var t=e.ratings,a=e.user,c=e.settings,s=e.navbarHeight,o=function(){var e=Object(n.useState)(0),t=Object(b.a)(e,2),a=t[0],r=t[1];return Object(n.useLayoutEffect)((function(){function e(){r(window.innerHeight)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),m=Object(n.useState)([]),u=Object(b.a)(m,2),d=u[0],p=u[1],v=Object(n.useState)(!1),g=Object(b.a)(v,2),f=g[0],E=g[1],h=Object(n.useState)({backdrop_path:"",poster_path:"",runtime:0,title:"",overview:"",id:"",release_date:"",genres:[]}),N=Object(b.a)(h,2),w=N[0],y=N[1],x=Object(n.useState)(!1),_=Object(b.a)(x,2),O=_[0],j=_[1];return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(c.current_bg_movie),!c.movies_api_key){e.next=6;break}return e.next=4,ee(8);case 4:(t=e.sent).error||p(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),r.a.createElement("div",{className:"row no-gutters",style:{marginTop:"-".concat(s,"px")}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters align-items-end position-relative overflow-hidden",style:{height:o}},r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{top:0,left:0,zIndex:2,background:"linear-gradient(180deg, rgba(0, 0, 0, 0.3) 72%, black)"}}),r.a.createElement(Je,{open:f,onClose:function(){return E(!1)}},r.a.createElement(Ve,{setIsEmpty:function(){return j(!0)},movieId:w.id,onEnded:function(){return E(!1)}})),r.a.createElement("div",{className:"col-60 position-absolute",style:{top:0,left:0,right:0,maxWidth:"1200px",margin:"auto"}},r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{alt:w.poster_path,className:"d-block d-lg-none",width:"100%",src:"https://image.tmdb.org/t/p/w500".concat(w.poster_path)}),r.a.createElement("img",{alt:w.poster_path,className:"d-none d-lg-block",width:"100%",src:"https://image.tmdb.org/t/p/w".concat(pt()).concat(w.backdrop_path)}),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgba(0, 0, 0, 0.3) 90%, black), linear-gradient(to right, black, transparent, black)",top:0,left:0}}))),r.a.createElement("div",{className:"col-60 px-md-5 px-4 py-4 position-relative mx-auto content-container",style:{zIndex:5}},r.a.createElement("div",{className:"row no-gutters justify-content-between position-relative"},r.a.createElement("div",{className:"col-60 col-sm-40 col-lg-30 d-flex flex-column justify-content-end text-white"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3"},r.a.createElement("div",{className:"row no-gutters mb-2 text-title-lg align-items-center",style:{fontWeight:"700"}},w.title)),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement(Me,{selected:!!a.ratings[w.id]&&"excellent_rate"===a.ratings[w.id].rate_type,movie:w,emoji:"fire",className:"mr-2 mb-2",value:t[w.id]?t[w.id].excellent_rate:[]}),r.a.createElement(Me,{selected:!!a.ratings[w.id]&&"good_rate"===a.ratings[w.id].rate_type,movie:w,emoji:"heart",className:"mr-2 mb-2",value:t[w.id]?t[w.id].good_rate:[]}),r.a.createElement(Me,{selected:!!a.ratings[w.id]&&"ok_rate"===a.ratings[w.id].rate_type,movie:w,className:"mr-2 mb-2",emoji:"heavy_division_sign",value:t[w.id]?t[w.id].ok_rate:[]}),r.a.createElement(Me,{className:"mb-2",selected:!!a.ratings[w.id]&&"bad_rate"===a.ratings[w.id].rate_type,movie:w,emoji:"shit",value:t[w.id]?t[w.id].bad_rate:[]})))),r.a.createElement("div",{className:"row no-gutters text-light mb-4 font-weight-300 text-clamp-6"},w.overview),r.a.createElement("div",{className:"row no-gutters mb-md-5 mb-4"},r.a.createElement("div",{className:"col-auto mr-2 d-flex"},w.release_date.substring(0,4),r.a.createElement("strong",{className:"px-3"},"\u2022"),r.a.createElement("div",null,r.a.createElement("div",{className:"d-none d-md-block"},w.genres.slice(0,3).map((function(e){return e.name})).join("/")),r.a.createElement("div",{className:"d-block d-md-none"},w.genres.slice(0,2).map((function(e){return e.name})).join("/"))),r.a.createElement("strong",{className:"px-3"},"\u2022"),Ye(w.runtime))),r.a.createElement("div",{className:"row no-gutters mb-md-4 mb-2"},O?"":r.a.createElement("div",{className:"col-auto mr-3 btn-custom btn-custom-primary btn-small",onClick:function(){return E(!0)}},"Play Trailer"),r.a.createElement(De,{movie:w,user:a}))),r.a.createElement("div",{className:"col-23 d-none d-lg-block"},r.a.createElement("div",{className:"row no-gutters h5 text-white",style:{padding:"6px 10px",background:"linear-gradient(to right, #ff0037, transparent)",borderRadius:"4px 0 0 4px",marginBottom:"11px"}},"Today's Recommendation"),r.a.createElement(ct,{movies:d,user:a,ratings:t}))))),r.a.createElement("div",{className:"row no-gutters d-flex d-lg-none"},r.a.createElement("div",{className:" col-60 py-4 px-md-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters h5 text-white",style:{padding:"6px 10px",background:"linear-gradient(to right, #ff0037, transparent)",borderRadius:"4px 0 0 4px",marginBottom:"18px"}},"Todays's Recommendation"),r.a.createElement(ct,{movies:d,user:a,ratings:t}))))),r.a.createElement(rt,{apiKey:c.movies_api_key}),r.a.createElement(ut,null),r.a.createElement(dt,null)))}));var gt=Object(p.b)((function(e,t){return Object(E.a)({settings:e.settings},t)}))((function(e){var t=e.open,a=e.onClose,c=e.user,s=e.comment,o=e.refreshComments,m=e.settings,u=Object(n.useState)({comment:""}),p=Object(b.a)(u,2),v=p[0],g=p[1],f=Object(n.useState)(""),E=Object(b.a)(f,2),h=E[0],N=E[1],w=Object(n.useState)(!1),y=Object(b.a)(w,2),x=y[0],_=y[1];return Object(n.useEffect)((function(){s&&g((function(e){return Object.assign({},e,s)}))}),[s]),r.a.createElement(Je,{open:t,onClose:a},r.a.createElement("div",{className:"col-xl-42 p-4 bg-over-root-lighter rounded mx-4"},r.a.createElement("div",{className:"row no-gutters h5 mb-4"},"Edit comment"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-3 d-none d-md-block"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c.photo,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters d-flex d-md-none justify-content-between mb-3"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c.photo,")")}})),r.a.createElement("div",{className:"col-auto d-flex align-items-end ".concat(v.comment.length<=m.no_comment_characters-1?"text-muted":"text-danger")},v.comment?m.no_comment_characters-v.comment.length:m.no_comment_characters," ","characters left")),r.a.createElement("div",{className:"row no-gutters mb-2",style:{height:"150px"}},r.a.createElement("textarea",{onChange:function(e){e.persist();var t=e.target.value;t.length<=m.no_comment_characters&&g((function(e){return Object.assign({},e,{comment:t})}))},value:v.comment,spellCheck:!1,placeholder:"Add your comment...",style:{resize:"none"},className:"w-100 h-100 textarea"})),r.a.createElement("div",{className:"row no-gutters justify-content-md-end justify-content-center"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto d-none d-md-block ".concat(v.comment.length<=m.no_comment_characters-1?"text-muted":"text-danger")},v.comment?m.no_comment_characters-v.comment.length:m.no_comment_characters," ","characters left"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters align-items-center text-danger justify-content-end",style:{height:"30px",opacity:h?1:0}},h)),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small",onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.comment){e.next=4;break}N("Type comment"),e.next=14;break;case 4:if(!c.token){e.next=13;break}return _(!0),e.next=8,P(v,s._id);case 8:t=e.sent,_(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't edit your comment",type:"failure",message:t.error}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"You successfully edited comment",type:"success",message:"Your comment successfully edited"}}),a(),o()),e.next=14;break;case 13:N("You need to login to write comment");case 14:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:x,size:20}),"Submit"))))))}));var ft=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.movie,a=e.user,c=e.publicUsers,s=e.refreshReviewsFromParent,o=e.seekReviewId,m=e.seekCommentId,u=e.ratings,p=Object(n.useState)([]),v=Object(b.a)(p,2),g=v[0],f=v[1],w=Object(n.useState)([]),y=Object(b.a)(w,2),x=y[0],O=y[1],j=Object(n.useState)(-1),k=Object(b.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)(-1),T=Object(b.a)(I,2),A=T[0],D=T[1],M=Object(n.useState)(-1),P=Object(b.a)(M,2),L=P[0],q=P[1],K=Object(n.useState)(-1),V=Object(b.a)(K,2),X=V[0],J=V[1],$=Object(n.useState)(-1),Z=Object(b.a)($,2),Q=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(b.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)({}),se=Object(b.a)(ce,2),oe=se[0],ie=se[1],le=Object(n.useState)({}),me=Object(b.a)(le,2),ue=me[0],de=me[1],pe=Object(n.useState)(!1),ve=Object(b.a)(pe,2),ge=ve[0],fe=ve[1],Ee=Object(n.useState)(m?o:-1),be=Object(b.a)(Ee,2),he=be[0],Ne=be[1],we=Object(n.useState)(-1),ye=Object(b.a)(we,2),xe=ye[0],_e=ye[1],Oe=Object(n.useState)(1),je=Object(b.a)(Oe,2),ke=je[0],Se=je[1],Ce=Object(n.useRef)(null),Ae=Object(n.useState)(!1),De=Object(b.a)(Ae,2),Ye=De[0],Ue=De[1],Me=Object(n.useState)(!1),Pe=Object(b.a)(Me,2),Fe=Pe[0],ze=Pe[1],Le=Object(n.useState)(!1),qe=Object(b.a)(Le,2),We=qe[0],Be=qe[1],He=Object(n.useState)(""),Ge=Object(b.a)(He,2),Ke=Ge[0],Ve=Ge[1],Je=Object(n.useState)(!1),Ze=Object(b.a)(Je,2),Qe=Ze[0],tt=Ze[1],at=Object(n.useState)(!1),nt=Object(b.a)(at,2),rt=nt[0],ct=nt[1],st=Object(n.useState)(!1),ut=Object(b.a)(st,2),dt=ut[0],pt=ut[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===he){e.next=7;break}return e.next=3,z(he);case 3:t=e.sent,a={},t.forEach((function(e){a[e._id]=e})),de((function(e){return Object.assign({},e,Object($e.a)({},he,a))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[he,Qe]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var a,n,r,c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=12;break}return e.next=3,U(t.id);case 3:return a=e.sent,n=[],r={},a.error||a.forEach((function(e){n.push(e.content_id),r[e.content_id]=e})),ie(r),e.next=10,Y(t.id);case 10:(c=e.sent).error||(s=[],l=[],c.reverse().forEach((function(e){e._id===o?s.unshift(e):n.includes(e._id)?(e.promoted=!0,s.push(e)):l.push(e)})),O(s),f(l));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,rt,s]);var vt=-1===xe?1:xe;return r.a.createElement("div",{className:"row no-gutters"},g.length?r.a.createElement("div",{className:"col-60 h5 mb-3"},"Reviews (",Re(g.length,1),")"):"",r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-2",ref:Ce}),x.concat(g).slice(8*(vt-1),8*(vt-1)+8).map((function(e,n){var s=oe[e._id]?oe[e._id].content.rating:e.rating,p=oe[e._id]?oe[e._id].content.review:e.review;return r.a.createElement(r.a.Fragment,{key:"review-fragment-".concat(n)},r.a.createElement("div",{ref:function(t){m||e._id===o&&t&&!dt&&(pt(!0),t.scrollIntoView({behavior:"smooth"}))},key:"review-".concat(n),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2".concat(e._id!==o||m?"":" fading-shadow")},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(c[e.author?e.author:e.content_author]?c[e.author?e.author:e.content_author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-1"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(c[e.author]?c[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},c[e.author]?c[e.author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},ot.a.format(new Date(e.date),"MMM DD, YYYY")))))),a._id===e.author?r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Edit review")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ve(e),re(!0),Ue(!0);case 3:case"end":return t.stop()}}),t)})))},r.a.createElement(Xe.k,{fontSize:"24px"}))),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Delete review")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function n(){var r,c,s,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ee(e._id),n.next=3,R(e);case 3:r=n.sent,ee(-1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't delete comment",type:"failure",message:r.error}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Success",type:"success",message:"Comment successfully deleted"}}),c=u[t.id],-1!==(s=c[e.rating].findIndex((function(t){return t===e.author})))&&c[e.rating].splice(s,1),d.dispatch({type:"UPDATE_RATINGS",rating:Object($e.a)({},t.id,c)}),delete(o=Object(E.a)({},a.ratings))[t.id],d.dispatch({type:"UPDATE_USER",userProperty:{ratings:o}}),ct(!rt));case 6:case"end":return n.stop()}}),n)})))},Q===e._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(Xe.n,{fontSize:"24px"}))))):r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.token){t.next=9;break}return q(e._id),t.next=4,H(a,e._id);case 4:n=t.sent,q(-1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review reported",message:"Review was successfully reported. We will review it soon.",type:"success"}}),t.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report review",type:"failure"}});case 10:case"end":return t.stop()}}),t)})))},L===e._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(_.c,{fontSize:"24px"})))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},r.a.createElement("div",{className:"text-break"},p)),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},"ok_rate"===s?r.a.createElement(N,{size:24}):r.a.createElement(h.a,{emoji:"excellent_rate"===s?"fire":"good_rate"===s?"heart":"ok_rate"===s?"heavy_division_sign":"shit",set:"facebook",size:24})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},A===n?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:A===n,size:20})):r.a.createElement(_.j,{onClick:Object(l.a)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.token){t.next=13;break}if(a._id===e.author){t.next=10;break}return D(n),t.next=5,W(a,e._id);case 5:r=t.sent,D(-1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):ct(!rt),t.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like you own review",type:"failure"}});case 11:t.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return t.stop()}}),t)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(_.b,{onClick:function(){Ne(he===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){Ve(Object.assign({},e,{notificationReceivers:[c[e.author]]})),ze(!0)}},"Reply")))))),r.a.createElement(it.a,{in:he===e._id,className:"mb-3"},r.a.createElement("div",{style:{marginLeft:"30px"},className:"py-2 text-light"},"Comments (",ue[e._id]?Object.values(ue[e._id]).length:0,")"),ue[e._id]?function e(t,n){return t.map((function(t,s){return ue[n._id][t]?r.a.createElement(r.a.Fragment,{key:"comment-fragment-".concat(he,"-").concat(s)},r.a.createElement("div",{ref:function(e){t===m&&e&&!dt&&(pt(!0),e.scrollIntoView({behavior:"smooth"}))},style:{marginLeft:"".concat(60*ue[n._id][t].notificationReceivers.length-30,"px")},key:"comment-".concat(he,"-").concat(s),className:"indented-comment row no-gutters p-4 bg-over-root-lighter rounded mb-2".concat(t===m?" fading-shadow":"")},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(c[ue[n._id][t].author]?c[ue[n._id][t].author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(c[ue[n._id][t].author]?c[ue[n._id][t].author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},c[ue[n._id][t].author]?c[ue[n._id][t].author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},ot.a.format(new Date(ue[n._id][t].date),"MMM DD, YYYY")))))),a._id===ue[n._id][t].author?r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Edit comment")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fe(ue[n._id][t]),Be(!0);case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(Xe.k,{fontSize:"24px"}))),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Delete comment")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(ue[n._id][t]._id),e.next=3,F(ue[n._id][t]._id);case 3:a=e.sent,J(-1),a.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't delete comment",type:"failure",message:a.error}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Success",type:"success",message:"Comment successfully deleted"}}),tt(!Qe),ct(!rt));case 6:case"end":return e.stop()}}),e)})))},X===ue[n._id][t]._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(Xe.n,{fontSize:"24px"}))))):r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=9;break}return q(t),e.next=4,G(a,t);case 4:n=e.sent,q(-1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment reported",message:"Comment was successfully reported. We will review it soon.",type:"success"}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report comment",type:"failure"}});case 10:case"end":return e.stop()}}),e)})))},L===t?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(_.c,{fontSize:"24px"})))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},ue[n._id][t].comment),r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},ue[n._id][t].likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},S===s?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:S===s,size:20})):r.a.createElement(_.j,{onClick:Object(l.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=13;break}if(a._id===ue[n._id][t].author){e.next=10;break}return C(s),e.next=5,B(a,t);case 5:r=e.sent,C(-1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):tt(!Qe),e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own comment",type:"failure"}});case 11:e.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return e.stop()}}),e)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){a.token?(Ve(Object.assign({},n,{comment_id:t,notificationReceivers:ue[n._id][t].notificationReceivers.concat([c[ue[n._id][t].author]])})),ze(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))),e(ue[n._id][t].comments,n)):""}))}(Object.values(ue[e._id]).filter((function(e){return 1===e.notificationReceivers.length})).map((function(e){return e._id})),e):"",r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(ue[e._id]?ue[e._id].length/5:1),current:ke,setCurrent:Se,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))})),r.a.createElement("div",{className:"row no-gutters justify-content-end pt-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(g.length/8),current:vt,setCurrent:_e})),r.a.createElement(et,{userIsOwner:ne,open:Ye,onClose:function(){return Ue(!1)},movie:t,review:Ke,user:a,refreshReviews:function(){return ct(!rt)}}),r.a.createElement(mt,{refreshReviews:function(){return ct(!rt)},setReviewIdOfVisibleComments:Ne,refreshComments:function(){return tt(!Qe)},setComments:de,movie:t,reviewAuthor:c[Ke.author]?c[Ke.author]:{display_name:""},review:Ke,open:Fe,onClose:function(){return ze(!1)},user:a}),r.a.createElement(gt,{comment:ge,refreshComments:function(){return tt(!Qe)},setComments:function(){},movie:t,open:We,onClose:function(){return Be(!1)},user:a}))))})),Et=a(33);var bt=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,ratings:e.ratings,settings:e.settings},t)}))((function(e){var t=e.match.params.movieId,a=e.ratings,c=e.settings.movies_api_key,s=e.match.params.reviewId,o=e.match.params.commentId,m=e.user,u=Object(n.useState)(!1),p=Object(b.a)(u,2),v=p[0],g=p[1],E=Object(n.useState)(!1),h=Object(b.a)(E,2),N=h[0],w=h[1],y=Object(n.useState)(!1),x=Object(b.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)(!1),k=Object(b.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)({poster_path:"",genres:[],title:"",overview:"",director:[],cast:[],runtime:0,release_date:"",id:""}),T=Object(b.a)(I,2),A=T[0],D=T[1],R=Object(n.useState)(!1),Y=Object(b.a)(R,2),U=Y[0],M=Y[1];return Object(n.useEffect)((function(){A.title&&(q(A.id,c),A.id in a||d.dispatch({type:"UPDATE_RATINGS",rating:Object($e.a)({},A.id,{excellent_rate:[],ok_rate:[],bad_rate:[],good_rate:[],movie_poster:A.poster_path,movie_title:A.title,movie_genres:A.genres.map((function(e){return e.name})),movie_release_date:A.release_date})}))}),[A.title]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var a,n,r,s,o,l,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!c){e.next=22;break}if("serie-"!==t.substring(0,6)){e.next=9;break}return n=t.substring(6),e.next=5,We(n,c);case 5:r=e.sent,a=Object.assign({},r,{title:r.name,release_date:r.first_air_date,id:t}),e.next=12;break;case 9:return e.next=11,Be(t,c);case 11:a=e.sent;case 12:return a.release_date=a.release_date?a.release_date:"0",void 0!==a.success&&a.success,D((function(e){return Object.assign({},e,a)})),e.next=17,He(t,c);case 17:s=e.sent,o=s.crew?s.crew.filter((function(e){return"Director"===e.job})).map((function(e){return e.name})):[],l=o.length?o:s.crew.map((function(e){return e.name})),m=s.cast?s.cast.map((function(e){return e.name})):[],D((function(e){return Object.assign({},e,{director:l,cast:m})}));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.scrollTo(0,0),function(){e.apply(this,arguments)}()}),[t,c]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(m._id,t);case 2:(a=e.sent)?a.error||g(a):g({review:"",rating:""});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}m._id&&t&&function(){e.apply(this,arguments)}()}),[N,m,t]),r.a.createElement("div",{className:"row no-gutters justify-content-center bg-movie-over-root position-relative"},r.a.createElement("div",{className:"position-absolute w-100 d-block d-lg-none",style:{top:0,left:0}},r.a.createElement("div",{className:"position-relative",style:{height:window.innerHeight,overflow:"hidden"}},r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{alt:A.poster_path,width:"100%",src:A.poster_path?"https://image.tmdb.org/t/p/w342/".concat(A.poster_path):"https://critics.io/img/movies/poster-placeholder.png"}),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgba(0, 0, 0, 0.3) 90%, black)",top:0,left:0}})),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgb(0 0 0 / 30%), black)",top:0,left:0}}))),r.a.createElement(Je,{open:U,onClose:function(){return M(!1)}},r.a.createElement(Ve,{setIsEmpty:function(){return O(!0)},movieId:t,onEnded:function(){return M(!1)}})),r.a.createElement("div",{className:"col-60 text-white px-md-5 py-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters mb-5"},r.a.createElement("div",{className:"col-auto mr-5 d-none d-lg-block"},r.a.createElement("div",{className:"w-100 position-relative"},r.a.createElement("img",{alt:A.poster_path,style:{borderRadius:"25px"},width:"300px",src:A.poster_path?"https://image.tmdb.org/t/p/w342/".concat(A.poster_path):"https://critics.io/img/movies/poster-placeholder.png"}),r.a.createElement("div",{onClick:function(){return f.push("/movie/".concat(A.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},_?"":r.a.createElement("div",{className:"square-60 rounded-circle d-flex flex-center play-btn",onClick:function(e){e.stopPropagation(),M(!0)}},r.a.createElement(Xe.l,{style:{fontSize:"35px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col position-relative"},r.a.createElement("div",{className:"row no-gutters position-relative",style:{zIndex:5}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3"},r.a.createElement("div",{className:"row no-gutters h5 mb-2 align-items-center"},A.title," (",A.release_date.substring(0,4),")")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters mb-2 align-items-center mt-2"},r.a.createElement(Me,{selected:!!m.ratings[A.id]&&"excellent_rate"===m.ratings[A.id].rate_type,movie:A,emoji:"fire",className:"mr-2 mb-2",value:a[A.id]?a[A.id].excellent_rate:[]}),r.a.createElement(Me,{selected:!!m.ratings[A.id]&&"good_rate"===m.ratings[A.id].rate_type,movie:A,emoji:"heart",className:"mr-2 mb-2",value:a[A.id]?a[A.id].good_rate:[]}),r.a.createElement(Me,{selected:!!m.ratings[A.id]&&"ok_rate"===m.ratings[A.id].rate_type,movie:A,className:"mr-2 mb-2",emoji:"heavy_division_sign",value:a[A.id]?a[A.id].ok_rate:[]}),r.a.createElement(Me,{className:"mb-2",emoji:"shit",value:a[A.id]?a[A.id].bad_rate:[],selected:!!m.ratings[A.id]&&"bad_rate"===m.ratings[A.id].rate_type,movie:A})))),r.a.createElement("div",{className:"row no-gutters text-movie-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},A.genres.map((function(e){return e.name})).join("/"))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-auto font-weight-500 mr-2"},"Duration:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},Ye(A.runtime))),r.a.createElement("div",{className:"row no-gutters mb-4 text-light"},A.overview),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Director:"),r.a.createElement("div",{className:"col-auto col-sm mr-5 text-movie-muted"},A.director.length?A.director.join(", "):"unknown"))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Cast:"),r.a.createElement("div",{className:"col-auto col-sm"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"text-clamp-2 text-muted-light cursor-pointer",onClick:function(e){e.currentTarget.classList.contains("text-clamp-2")?e.currentTarget.classList.remove("text-clamp-2"):e.currentTarget.classList.add("text-clamp-2")}},A.cast.length?A.cast.join(", "):"unknown")))))),r.a.createElement("div",{className:"row no-gutters mb-5"},r.a.createElement("div",{className:"col-auto mr-2"},"Release date:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},"0"!==A.release_date?ot.a.format(new Date(A.release_date),"MMMM DD, YYYY"):"unknown")),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-md-start"},r.a.createElement("div",{className:"col-auto mr-3 btn-custom btn-custom-primary btn-small",onClick:function(){m.token?C(!S):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},m.ratings[A.id]?r.a.createElement(r.a.Fragment,null,"Edit Review",r.a.createElement(Xe.k,{fontSize:"20px",className:"ml-2"})):r.a.createElement(r.a.Fragment,null,"Add Review",r.a.createElement(Et.e,{fontSize:"20px",className:"ml-2"}))),r.a.createElement(De,{movie:A,user:m})))))),r.a.createElement(et,{userIsOwner:m.ratings[A.id],open:S,onClose:function(){return C(!1)},movie:A,review:v,user:m,refreshReviews:function(){return w(!N)}}),r.a.createElement(ft,{refreshReviewsFromParent:N,userHasWrittenReview:m.ratings[A.id],seekCommentId:o,seekReviewId:s,movie:A,user:m})))}));var ht=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.reviews,a=e.publicUsers,c=e.ratings,s=Object(n.useState)(-1),o=Object(b.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(1),p=Object(b.a)(d,2),v=p[0],g=p[1],E=Object(n.useState)({}),w=Object(b.a)(E,2),y=w[0],x=w[1];return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===m){e.next=5;break}return e.next=3,z(m);case 3:t=e.sent,x((function(e){return Object.assign({},e,Object($e.a)({},m,t))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[m]),t.slice(0,8).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(t)},r.a.createElement("div",{key:"review-".concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,onClick:function(){return f.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white h6 mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4)),r.a.createElement("div",{className:"row no-gutters text-muted"},r.a.createElement("div",{className:"text-truncate"},e.movie_genres))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2"},"Posted review on"),r.a.createElement("span",{className:"text-muted"},ot.a.format(new Date(e.date),"MMM DD, YYYY"))))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-size-14 flex-grow-0 font-weight-300"},e.review),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},e.rating?"ok_rate"===e.rating?r.a.createElement("div",{style:{marginTop:"-4px"}},r.a.createElement(N,{size:24})):r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(h.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy-division-sign":"shit",set:"facebook",size:24})):"")),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(_.j,{fontSize:"24px",className:"text-green"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto"},r.a.createElement(_.b,{onClick:function(){u(m===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"}))))))))),r.a.createElement(it.a,{in:m===e._id,className:"mb-3"},r.a.createElement("div",{className:"ml-4 h5 py-2 text-white"},"Comments (",y[e._id]?y[e._id].length:0,")"),y[e._id]?y[e._id].slice(v*(v-1),v*(v-1)+5).map((function(e,t){return r.a.createElement("div",{key:"comment-".concat(m,"-").concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded ml-4 mb-2"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters align-items-center mb-2"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 h6 text-white mb-0"},a[e.author]?a[e.author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},ot.a.format(new Date(e.date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3"},e.comment),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(_.j,{fontSize:"24px",className:"text-green cursor-pointer"})))))))})):"",r.a.createElement("div",{className:"row no-gutters mt-2 justify-content-end"},r.a.createElement("div",{className:"col-auto ml-4"},r.a.createElement(lt,{count:Math.ceil(y[e._id]?y[e._id].length/5:1),current:v,setCurrent:g,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))}))})),Nt=function(e){var t={0:"All"};return e.forEach((function(e){e.genre_ids.forEach((function(a){var n=e.title?w.find((function(e){return e.id===a})):y.find((function(e){return e.id===a}));n&&n.name&&(a in t||(t[a]=n.name))}))})),t};var wt=Object(p.b)((function(e,t){return Object(E.a)({settings:e.settings,search:e.search},t)}))((function(e){var t=e.search,a=e.settings,c=Object(n.useState)([]),s=Object(b.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)([]),p=Object(b.a)(u,2),v=p[0],g=p[1],f=Object(n.useState)([]),E=Object(b.a)(f,2),h=E[0],N=E[1],w=Object(n.useState)(0),y=Object(b.a)(w,2),x=y[0],_=y[1],O=Object(n.useState)(0),j=Object(b.a)(O,2),k=j[0],S=j[1],C=t.category,I=function(){d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:"You need to provide valid api key in admin dashboard",type:"failure"}})};Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.query){e.next=25;break}if("Reviews"!==C&&"All"!==C){e.next=8;break}return e.next=4,te(t.query);case 4:(n=e.sent).error||m(n),e.next=9;break;case 8:m([]);case 9:if("Movies"!==C&&"All"!==C){e.next=16;break}return e.next=12,Ge(t.query,a.movies_api_key);case 12:(r=e.sent).results?g(r.results):I(),e.next=17;break;case 16:g([]);case 17:if("Series"!==C&&"All"!==C){e.next=24;break}return e.next=20,Ke(t.query,a.movies_api_key);case 20:(c=e.sent).results?N(c.results):I(),e.next=25;break;case 24:N([]);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var T=Nt(v),A=Nt(h);return r.a.createElement("div",{className:"row no-gutters justify-content-center bg-over-root",style:{minHeight:window.innerHeight}},r.a.createElement("div",{className:"col-60 d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters flex-grow-0"}),r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters flex-grow-1 justify-content-center"},r.a.createElement("div",{className:"col-60 p-5 text-white content-container d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters h4"},"Search Results"),r.a.createElement("div",{className:"row no-gutters text-muted border-bottom pb-3"},"Showing all results")),r.a.createElement("div",{className:"col-60"},v.length?r.a.createElement("div",{className:"row no-gutters h5 mb-2"},"Movies (",v.length,")"):"",r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-4"},r.a.createElement("div",{className:"col-auto"},Object.keys(T).length>1?r.a.createElement(at.a,{style:{padding:"14px 0",width:"100%",overflowX:"auto",whiteSpace:"nowrap"}},Object.keys(T).map((function(e,t){return r.a.createElement("div",{onClick:function(){_(e)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(+x===+e?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},T[e])}))):""))),r.a.createElement("div",{className:"col-60"},v.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,{movies:v.filter((function(e){return e.genre_ids.includes(+x)||0===+x}))})):"",r.a.createElement("div",{className:"py-2 row no-gutters"}),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60"},h.length?r.a.createElement("div",{className:"row no-gutters h5 mb-2"},"Series (",h.length,")"):"",r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-4"},r.a.createElement("div",{className:"col-auto"},Object.keys(A).length>1?r.a.createElement(at.a,{style:{padding:"14px 0",width:"100%",overflowX:"auto",whiteSpace:"nowrap"}},Object.keys(A).map((function(e,t){return r.a.createElement("div",{onClick:function(){S(e)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(+k===+e?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},A[e])}))):"")))),h.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,{prefix:"serie-",movies:h.filter((function(e){return e.genre_ids.includes(+k)||0===+k})).map((function(e){return Object.assign({},e,{id:"serie-".concat(e.id)})}))})):"",r.a.createElement("div",{className:"py-2 row no-gutters"}),o.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters h5 mb-2"},"Reviews (",o.length,")"),r.a.createElement(ht,{reviews:o})):""))))))))}));var yt=function(e){return n.createElement("svg",Object.assign({fill:"transparent",id:"logo__svg8",viewBox:"0 0 98.1 111.451",height:"100%"},e),n.createElement("defs",{id:"logo__defs2"},n.createElement("clipPath",{clipPathUnits:"userSpaceOnUse",id:"logo__clipPath923"},n.createElement("rect",{id:"logo__rect925",width:595.99,height:569.726,x:359.033,y:144.727,ry:10.993,fill:"#14bf4f",fillOpacity:.52,strokeWidth:2.513,strokeLinecap:"square",paintOrder:"markers fill stroke"})),n.createElement("clipPath",{id:"logo__clipPath857",clipPathUnits:"userSpaceOnUse"},n.createElement("rect",{ry:11.18,y:200.285,x:462.025,height:421.234,width:370.77,id:"logo__rect859",fill:"#14bf4f",fillOpacity:.52,strokeWidth:2.443,strokeLinecap:"square",paintOrder:"markers fill stroke"}))),n.createElement("g",{id:"logo__layer1",transform:"translate(-52.373 -23.252)"},n.createElement("g",{id:"logo__g917",transform:"matrix(.26458 0 0 .26458 -69.87 -29.74)",clipPath:"url(#logo__clipPath857)"},n.createElement("path",{id:"logo__rect870",d:"M2-3h1286v1026H2z"}),n.createElement("g",{id:"logo__g894"},n.createElement("path",{id:"logo__path872",d:"M582.17 504.56c-.49.61-1.24.71-1.88 1.03-7.21 3.59-11.41 9.32-12.53 17.34-.5 3.58-.2 7.07.57 10.55.95 4.29 3.05 7.95 6.19 11.01.33.32.68.6 1 .93.28.29.36.64.07.96-.49.54-1.03 1.03-1.51 1.57-4.22 4.78-6.45 10.36-6.11 16.73.58 10.7 7.16 18.96 16.77 21.94.86.27 1.8.3 2.58.87.28.71-.29 1.17-.55 1.69-3.92 7.96-3.6 15.77.77 23.46.31.54.78 1 .83 1.69-.24.55-.76.33-1.16.37-.45.04-.91.01-1.36.01-12.73 0-25.46 0-38.19.01-3.46 0-6.91-.03-10.37.02-8.48.12-16.11-2.48-23.04-7.22-11.1-7.6-17.68-18.06-19.61-31.41-.2-1.35-.37-2.7-.37-4.07.01-16.55-.06-33.1.02-49.65.05-10.03 3.1-19.14 9.2-27.14 5.2-6.82 11.88-11.71 19.87-14.79 5.55-2.14 10.19-5.53 14.06-10.02 2.51-2.91 4.62-6.08 6.44-9.44 3.45-6.37 5.63-13.18 7.11-20.24 1.61-7.69 2.25-15.46 2.19-23.3-.03-4.01 1-7.74 3.02-11.18 3.25-5.51 7.97-9.16 14.2-10.7 12.53-3.11 25.43 6.37 26.53 18.57.59 6.57.3 13.07-.42 19.58-.59 5.33-1.33 10.64-2.39 15.9-1.48 7.32-3.67 14.43-6.41 21.38-.46 1.16-1.19 1.99-2.05 2.82-3.72 3.57-6.06 7.88-6.98 12.98-.98 5.4-.04 10.47 2.39 15.34.38.77 1.08 1.43 1.12 2.41z",className:"logo__st0"}),n.createElement("path",{id:"logo__path874",d:"M652.59 618.75c.16-1.11.69-1.64 1.07-2.24 3.91-6.12 5.54-12.8 4.79-20.02-.17-1.62-.61-3.21-.92-4.81-.1-.51.07-.89.6-1.03 1.41-.36 2.82-.7 4.23-1.06 21.37-5.42 40.31-15.44 56.69-30.21 18.45-16.63 31.25-36.94 39.23-60.38.5-1.46 1.02-2.92 1.4-4.41.5-1.9-.94-3.2-2.86-2.63-.69.2-1.35.54-2.02.82-5.52 2.33-11.09 4.56-16.8 6.41-5.55 1.8-11.23 3-17.03 3.61-3.89.41-7.79.67-11.67 1.12-2.31.27-4-.53-5.5-2.26-2-2.29-3.68-4.71-4.49-7.69-.9-3.32-.49-6.47.98-9.54.87-1.83 2.13-3.38 3.47-4.87.83-.92 1.86-1.43 3.1-1.52.82-.06 1.63-.17 2.44-.21 18.74-1.03 35.75-7.12 51-17.94 19.67-13.95 32.95-32.57 39.65-55.79 1.56-5.42 2.53-10.96 3.14-16.58 1.44-13.31-.37-26.29-3.84-39.11-3.07-11.32-7.82-21.88-14.66-31.46-8.18-11.45-18.57-20.38-30.88-27.12-8.24-4.51-16.89-8.05-26.01-10.37-.53-.13-1.06-.26-1.57-.44-.83-.28-1.14-1.31-.58-1.99.34-.42.76-.78 1.16-1.15 4.27-3.96 8.54-7.9 12.81-11.86 2.07-1.92 4.16-3.81 6.17-5.78.77-.76 1.49-.81 2.43-.44 5.08 2 10.07 4.2 14.84 6.85 29.34 16.29 49.33 40.48 60.49 72.02 3.13 8.85 4.97 18.02 5.89 27.38.72 7.26.86 14.54.29 21.79-2.11 26.66-11.41 50.53-28.29 71.35-2.06 2.54-4.26 4.98-6.51 7.35-2.94 3.09-4.53 6.72-4.99 10.94-3.71 34.36-17.62 64.25-39.98 90.31-14.67 17.09-32.59 29.96-52.98 39.44-13.08 6.08-26.69 10.52-40.91 13.05-1.05.2-2.13.3-3.38.47z",className:"logo__st1"}),n.createElement("path",{id:"logo__path876",d:"M478.72 519.92c-.5-.47-.63-1.11-.86-1.69-4.42-11.29-7.62-22.91-9.37-34.92-.58-3.95-1.23-7.9-1.91-11.84-.56-3.25-.51-6.52-.46-9.79.05-3.73.12-7.45.13-11.18.01-2.91.14-5.79.65-8.68 1.37-7.69 2.45-15.43 4.34-23.02 6.18-24.86 17.44-47.13 34.09-66.6 20.87-24.41 46.77-41.16 77.51-50.44 5.83-1.76 11.74-3.22 17.76-4.17 1.82-.29 3.12-1.07 4.32-2.47 7.94-9.33 17.04-17.38 27.25-24.18.3-.2.6-.4.91-.6 1.15-.71 1.24-.74 2.09.13 1.53 1.55 3.02 3.15 4.55 4.71.69.71.94 1.53.78 2.49-.07.45-.12.9-.21 1.35-1.42 7.12-2.87 14.24-4.27 21.37-.24 1.22-.76 2.17-1.72 2.98a51.582 51.582 0 00-3.59 3.34c-9.65 9.94-21.33 16.11-34.77 19.32-19.29 4.6-36.74 13.15-52.2 25.58-21.51 17.28-36.31 39.19-44.61 65.49-2.91 9.21-4.75 18.64-5.63 28.27-.67 7.36-.68 14.71-.26 22.07.27 4.8.84 9.6 1.83 14.32.29 1.4 0 2.36-.95 3.42-7.06 7.89-11.63 17.07-13.84 27.42-.38 1.77-.58 3.58-.88 5.38-.11.69.01 1.46-.68 1.94z",className:"logo__st1"}),n.createElement("path",{id:"logo__path878",d:"M684.32 203.33c.82.51.98 1.37 1.31 2.09 4.75 10.31 9.53 20.6 14.15 30.97.95 2.14 2.04 3.58 4.52 3.47 11.54 2 23.09 4.01 34.63 6.01.27.05.55.1.77.24.24.14.39.42.15.66-.57.58-1.17 1.14-1.78 1.69-8.21 7.59-16.44 15.16-24.64 22.77-2.32 2.15-2.39 1.45-1.86 5.14.8 5.57 1.64 11.14 2.45 16.72.89 6.11 1.76 12.23 2.63 18.34.05.35.01.72.01 1.09-.93.13-1.52-.54-2.19-.92-9.75-5.46-19.47-10.96-29.2-16.45-.32-.18-.67-.31-.95-.54-1.57-1.25-3.05-.99-4.77-.13-10.07 5.05-20.18 10-30.28 14.97-.87.43-1.77.79-2.66 1.19-.37-.88-.09-1.58.05-2.28 2.25-11.22 4.52-22.43 6.77-33.65.6-2.98.59-2.98-1.59-5.22-7.78-8.03-15.57-16.06-23.35-24.09-.62-.64-1.22-1.3-1.98-2.11.99-.54 1.88-.57 2.73-.67 8.48-.99 16.97-1.96 25.46-2.94 3.07-.35 6.13-.77 9.21-1.04 1.45-.13 2.24-.8 2.9-2.06 4.1-7.9 8.27-15.76 12.42-23.63 1.7-3.2 3.39-6.4 5.09-9.62z",className:"logo__st0"}),n.createElement("path",{id:"logo__path880",d:"M623.34 542.48h-36.81c-1.18 0-2.35 0-3.52-.28-4.03-.99-6.84-4.24-6.95-8.36-.1-4.09-.01-8.18-.03-12.27-.02-3.59 2.82-7.96 7.69-8.57.9-.11 1.81-.16 2.71-.16 24.72-.01 49.44-.01 74.16 0 .99 0 2 .05 2.98.22 4.14.73 7.22 4.1 7.36 8.28.14 4.18.14 8.36.01 12.54-.15 4.68-3.82 8.25-8.62 8.59-.81.06-1.64.02-2.45.02-12.17-.01-24.35-.01-36.53-.01z",className:"logo__st0"}),n.createElement("path",{id:"logo__path882",d:"M623.37 578.52h-36.8c-1.27 0-2.53 0-3.79-.34-3.89-1.04-6.62-4.26-6.72-8.27-.1-4.18-.11-8.36.01-12.54.12-4.17 3.25-7.6 7.35-8.28.98-.16 1.99-.22 2.98-.22 24.72-.01 49.43-.01 74.15 0 .91 0 1.82.04 2.71.17 4.27.62 7.51 4 7.67 8.29.15 4.17.14 8.36.01 12.54-.15 4.7-3.82 8.28-8.59 8.62-.81.06-1.64.02-2.45.02-12.17.01-24.35.01-36.53.01z",className:"logo__st0"}),n.createElement("path",{id:"logo__path884",d:"M620.62 505.62c-6.18 0-12.37-.02-18.55.01-3.5.02-6.64-.99-9.33-3.22-4.56-3.78-6.17-8.75-5.07-14.42 1.09-5.62 4.67-9.32 10.13-11.1 1.57-.51 3.21-.62 4.85-.62 11.91 0 23.82 0 35.74.01 5.36.01 9.69 2.09 12.85 6.47 5.14 7.13 2.02 19.96-8.82 22.6-1.13.28-2.35.25-3.52.26-6.1.02-12.19.01-18.28.01z",className:"logo__st0"}),n.createElement("path",{id:"logo__path886",d:"M619.47 614.55c-5.82 0-11.63-.01-17.45 0-2.46 0-4.65-.7-6.49-2.38-1.84-1.67-2.9-3.78-2.96-6.23-.1-4.09-.17-8.19.01-12.27.16-3.75 2.06-6.5 5.57-8.05 1.11-.49 2.28-.6 3.46-.61 1.91-.02 3.82-.01 5.73-.01h28.36c.82 0 1.64.01 2.45.03 4.74.12 8.34 4.48 8.33 8.5-.01 4 .06 8-.01 12-.08 5.04-3.7 8.74-8.74 9-1.36.07-2.73.02-4.09.02h-14.17z",className:"logo__st0"}),n.createElement("path",{id:"logo__path888",d:"M733.06 336.76c7.64-.27 16.28 5.85 16.29 16.22.01 10.03-8.33 16.74-16.61 16.68a16.298 16.298 0 01-16.24-16.62c.17-10.3 8.58-16.54 16.56-16.28z",className:"logo__st1"}),n.createElement("path",{id:"logo__path890",d:"M706.71 419.78c-5.31.04-11.12-4.33-11.9-9.26-.56-3.55.49-6.65 2.66-9.37 1.19-1.5 2.79-2.58 4.58-3.33 2.17-.9 4.39-1.15 6.63-.36 4.18 1.46 7.2 4.09 8.35 8.54.42 1.63.38 3.24-.12 4.82-1.38 4.33-4.03 7.44-8.55 8.69-.7.19-1.43.23-1.65.27z",className:"logo__st1"}),n.createElement("path",{id:"logo__path892",d:"M662.89 381.33c.18 4.2-3.56 9.55-8.04 10.98-1.69.54-3.44.61-5.12.19-3.8-.95-6.71-3.14-8.53-6.66-.82-1.59-.95-3.31-.8-5.05.58-6.87 6.71-11.24 12.19-10.68 5.47.56 10.36 5.78 10.3 11.22z",className:"logo__st1"})))),n.createElement("style",{id:"style868",type:"text/css"},".logo__st0{fill:#fbfbfb}.logo__st1{fill:#fd0040}"))},xt=[{name:"Settings",icon:_.i},{name:"User Management",icon:_.d},{name:"Reviews & Comments",icon:_.g},{name:"Announcements",icon:Et.a},{name:"Promotions",icon:Xe.j},{name:"Notifications",icon:Xe.b}],_t=function(e){var t=e.section,a=e.setSection,n=e.isMenuOpened,c=e.mobile,s=void 0!==c&&c;return r.a.createElement("div",{className:"row no-gutters bg-over-root-lighter text-white h-100 admin-menu"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center d-flex d-lg-none px-5 mb-4"},r.a.createElement("div",{className:"col-auto h3"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"square-50 mr-2"},r.a.createElement(yt,null)),r.a.createElement("div",{className:"col-auto logo text-title-lg"},"CozyPotato"))),r.a.createElement("div",{className:"col-auto"},r.a.createElement(_.e,{className:"cursor-pointer",fontSize:"34px",onClick:function(){d.dispatch({type:"SET_DASHBOARD_MENU_OPENED",isOpened:!n})}}))),xt.map((function(e,c){return r.a.createElement("div",{key:"left-menu-item-".concat(c),className:"row no-gutters px-4 mb-2",style:{borderLeft:t===c?"4px solid rgb(255, 0, 64)":"4px solid transparent"}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{onClick:function(){a(c),s&&d.dispatch({type:"SET_DASHBOARD_MENU_OPENED",isOpened:!n})},key:"menu-item-".concat(c),className:"align-items-center px-3 btn-custom text-left row no-gutters".concat(t===c?" bg-custom-primary":"")},r.a.createElement(e.icon,{className:"col-auto mr-2",fontSize:"24px"}),r.a.createElement("div",{className:"col-auto"},e.name))))}))))},Ot=[{icon:Et.b,name:"Facebook"},{icon:Et.c,name:"Instagram"},{icon:Et.d,name:"Linkedin"},{icon:Et.f,name:"Twitter"}];var jt=Object(p.b)((function(e,t){return Object(E.a)({settings:e.settings},t)}))((function(e){var t=e.settings,a=Object(n.useState)(""),c=Object(b.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),p=u[0],v=u[1],g=[{valid:(/^http/.test(t.FacebookLink)||""===t.FacebookLink)&&(/^http/.test(t.TwitterLink)||""===t.TwitterLink)&&(/^http/.test(t.LinkedinLink)||""===t.LinkedinLink)&&(/^http/.test(t.InstagramLink)||""===t.InstagramLink),error:"Social link must start with http:// or https://"}];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters border-bottom pb-3 mb-5"},r.a.createElement("div",{className:"col-60 admin-screen-title"},"Settings"),r.a.createElement("div",{className:"col-60"},"Configuration settings for admin panel")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-sm-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Configure API for popular movies (main for now)"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{type:"text",placeholder:"Enter API key",value:t.movies_api_key,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{movies_api_key:e.target.value}})},className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Configure API for movie data"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.movie_data_api,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{movie_data_api:e.target.value}})},type:"text",placeholder:"Enter API key",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Configure API for latest movies"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{type:"text",placeholder:"Enter API key",value:t.latest_movies_api,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{latest_movies_api:e.target.value}})},className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Set Captcha API key"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{type:"text",placeholder:"Enter API key",value:t.captcha_api_key,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{captcha_api_key:e.target.value}})},className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of popular reviews to show"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_popular_reviews,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_popular_reviews:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of popular movies to show"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_popular_movies,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_popular_movies:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of Reviews allowed per day per user"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_allowed_reviews,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_allowed_reviews:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of characters allowed in comments"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_comment_characters,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_comment_characters:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of characters allowed in display name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_display_name_characters,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_display_name_characters:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of words allowed in review"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_review_words,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_review_words:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-xl-40 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Background image refresh time (days, hours, minutes)"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-20 pr-3"},r.a.createElement("div",{className:"row no-gutters text-muted"},"days"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.bg_image_refresh_time_days,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{bg_image_refresh_time_days:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-20 pr-3"},r.a.createElement("div",{className:"row no-gutters text-muted"},"hours"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.bg_image_refresh_time_hours,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{bg_image_refresh_time_hours:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-20 "},r.a.createElement("div",{className:"row no-gutters text-muted"},"minutes"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.bg_image_refresh_time_minutes,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{bg_image_refresh_time_minutes:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Current background movie"),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("img",{alt:t.current_bg_movie.backdrop_path,style:{maxWidth:"500px"},width:"100%",src:"https://image.tmdb.org/t/p/w500".concat(t.current_bg_movie.backdrop_path)})),r.a.createElement("div",{className:"row no-gutters mb-1"},"Title"),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("input",{disabled:!0,className:"input-light-disabled w-100 px-3",value:t.current_bg_movie.title})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-auto mr-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Set Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{disabled:!0,className:"input-light-disabled px-3",value:ot.a.format(new Date(t.current_bg_movie.date_set),"YYYY-MM-DD @ hh:mm A")}))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Refresh Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{disabled:!0,className:"input-light-disabled px-3",value:ot.a.format(new Date(t.current_bg_movie.date_set+6e4*t.bg_image_refresh_time_minutes+36e5*t.bg_image_refresh_time_hours+864e5*t.bg_image_refresh_time_days),"YYYY-MM-DD @ hh:mm A")})))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-small",onClick:Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.movies_api_key){e.next=9;break}return v(!0),e.next=4,n=t.movies_api_key,j("/changeBackgroundMovie",{apiKey:n});case 4:a=e.sent,v(!1),a.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:a.error,type:"failure"}}):d.dispatch({type:"UPDATE_SETTINGS",settings:{current_bg_movie:a}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You need to set movies api key to change background movie",type:"failure"}});case 10:case"end":return e.stop()}var n}),e)})))},p?r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:p,size:20}):"Refresh"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Set social links"),Ot.map((function(e,a){return r.a.createElement("div",{className:"row no-gutters mb-2",key:"social-icons-settings-".concat(a)},r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement("div",{className:"square-40 rounded-circle bg-white d-flex flex-center"},r.a.createElement(e.icon,{fontSize:"24px",className:"text-dark"}))),r.a.createElement("div",{className:"col"},r.a.createElement("input",{spellCheck:!1,type:"text",placeholder:"Paste ".concat(e.name," link"),value:t["".concat(e.name,"Link")],onChange:function(t){t.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:Object($e.a)({},"".concat(e.name,"Link"),t.target.value)})},className:"px-3 input-light w-100"})))}))),r.a.createElement("div",{className:"col-60 mt-3"},r.a.createElement("div",{style:{height:"30px",opacity:s?1:0},className:"row no-gutters align-items-center text-danger"},s),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto"},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=g.filter((function(e){return!e.valid}))).length){e.next=5;break}o(a[0].error),e.next=10;break;case 5:return o(""),e.next=8,ae(t);case 8:e.sent.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:"Settings were not updated",type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Settings updated!",message:"Settings were successfully updated",type:"success"}}),ne((function(e){e.error||e.length&&d.dispatch({type:"UPDATE_SETTINGS",settings:e[0]})})));case 10:case"end":return e.stop()}}),e)})))},"Save"))))))))})),kt=function(e){var t=e.isMenuOpened,a=e.setSection,n=e.section;return r.a.createElement("div",{className:"d-block d-lg-none col-60 col-sm-40 col-md-30 col-lg-20 col-xl-15 vh-100 zindex-99 ".concat(t?"":"zindex-0-1"),style:{position:"fixed",right:0,top:0}},r.a.createElement("div",{className:"w-100 h-100 position-relative"},r.a.createElement("div",{className:"container-fluid px-0",style:{height:"100%",width:"100%",right:t?0:"-100%",transition:"right 0.3s",position:"absolute",zIndex:10,background:"white"}},r.a.createElement(_t,{mobile:!0,className:"text-white bg-internly-90 col-12",section:n,isMenuOpened:t,setSection:a}))))},St=a(193),Ct=a.n(St),It=function(e){var t=e.items,a=e.btnName,c=e.className,s=void 0===c?"":c,o=e.multipleSelect,i=void 0!==o&&o,l=e.popoverClass,m=void 0===l?"":l,u=(e.popoverWidth,e.disabled),d=void 0!==u&&u,p=e.onSelect,v=void 0===p?function(){}:p,g=Object(n.useState)(!1),f=Object(b.a)(g,2),E=f[0],h=f[1],N=Object(n.useRef)(null);return d?r.a.createElement("div",{className:m},r.a.createElement("div",{ref:N,className:"user-select-none d-flex justify-content-between align-items-center "+s},r.a.createElement("div",{className:"mr-2"},a),r.a.createElement(_.a,{fontSize:"16px",strokeWidth:"1.5px",className:"text-internly",style:{transform:"rotate(".concat(E?"180deg":"0deg",")"),transition:"transform 0.3s"}}))):r.a.createElement(Ie,{className:m,arrow:!1,onOpen:function(){return h(!0)},onHide:function(){return h(!1)},content:function(e){return r.a.createElement("div",{className:"bg-white",style:{maxHeight:"400px",overflowY:"auto",width:e}},t.map((function(e,t){return r.a.createElement("div",{key:Ct()(),className:"popover-item w-100",onClick:function(){v(t),i||N.current.click()}},r.a.createElement("div",null,e.item?e.item:e))})))}},r.a.createElement("div",{ref:N,className:"cursor-pointer user-select-none d-flex justify-content-between align-items-center "+s},r.a.createElement("div",{className:"mr-2"},a),r.a.createElement(_.a,{fontSize:"16px",strokeWidth:"1.5px",className:"text-internly",style:{transform:"rotate(".concat(E?"180deg":"0deg",")"),transition:"transform 0.3s"}})))},Tt=a(197),At=a(357),Dt=a(366),Rt=Object(Tt.a)({palette:{primary:{main:"rgb(255, 0, 64)"},secondary:{main:"#202020"}}}),Yt=function(e){return r.a.createElement(At.a,{theme:Rt},r.a.createElement(Dt.a,e))},Ut=a(38);var Mt=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.setEditReviewSection,a=e.setEditReview,c=e.publicUsers,s=e.ratings,o=Object(n.useState)(""),m=Object(b.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),E=g[0],w=g[1],y=Object(n.useState)("User"),x=Object(b.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)(0),k=Object(b.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)(1),T=Object(b.a)(I,2),A=T[0],D=T[1],R=Object(n.useState)(""),Y=Object(b.a)(R,2),U=Y[0],M=Y[1],P=Object(n.useState)(""),F=Object(b.a)(P,2),z=F[0],L=F[1],q=Object(n.useState)({key:"",value:""}),W=Object(b.a)(q,2),B=W[0],H=W[1],G=Object(n.useState)([]),K=Object(b.a)(G,2),V=K[0],X=K[1],J=Object(n.useState)([]),$=Object(b.a)(J,2),Z=$[0],Q=$[1],ee=Object(n.useState)(!1),te=Object(b.a)(ee,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:(t=e.sent).error||X(t.reverse().map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ae]),Object(n.useEffect)((function(){var e=Object(Ze.a)(V);V.length&&(z&&("User"===_?e=e.filter((function(e){return c[e.author].display_name.toLowerCase().includes(z.toLowerCase())})):"Review"===_?e=e.filter((function(e){return e.review.toLowerCase().includes(z.toLowerCase())})):"Movie"===_&&(e=e.filter((function(e){return s[e.movie_id]&&s[e.movie_id].movie_title.toLowerCase().includes(z.toLowerCase())})))),U&&(e=e.filter((function(e){return c[e.author].role===U}))),"role"===B.key&&B.value&&(e=e.filter((function(e){return c[e.author][B.key]===B.value}))),e="deleted"===B.key&&B.value?e.filter((function(e){return e.deleted===B.value})):e.filter((function(e){return!e.deleted})),Q(e))}),[z,U,V,B]);var re=[5*(A-1),5*(A-1)+5];re[1]>=Z.length&&(re[1]=re[1]-(re[1]-Z.length));var se=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>0&&void 0!==s[0]&&s[0]&&M("All"===E?"":E),"Edit"!==u){e.next=7;break}(n=Z.filter((function(e){return e.selected}))).length&&(a(n[0]),t()),e.next=15;break;case 7:if("Delete"!==u){e.next=15;break}if(!(r=Z.filter((function(e){return e.selected}))).length){e.next=15;break}return e.next=12,le(r.map((function(e){return e._id})));case 12:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Reviews were deleted",message:"Reviews were successfully deleted",type:"success"}}),ne(!ae);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=["Title","Review","Rating","Posted on","Reported"];return r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"col-auto cursor-pointer ".concat(B.key||U?"text-dark":"text-primary"),onClick:function(){H({key:"",value:""}),M("")}},"All (",V.filter((function(e){return!e.deleted})).length,")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return H((function(e){return Object.assign({},e,{key:"role",value:"Administrator"})}))},className:"cursor-pointer col-auto ".concat("role"===B.key&&"Administrator"===B.value?"text-primary":"text-dark")},"By Administrators (",Object.values(c).length?V.filter((function(e){return c[e.author]&&"Administrator"===c[e.author].role&&!e.deleted})).length:"",")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return H((function(e){return Object.assign({},e,{key:"deleted",value:!0})}))},className:"cursor-pointer col-auto ".concat("deleted"===B.key&&!0===B.value?"text-primary":"text-dark")},"Deleted (",V.filter((function(e){return e.deleted})).length,")")),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(["Delete"][e])},items:["Delete"],btnName:u||"Select Action",className:"input-light px-3 col-auto "}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return w(["All","Administrator","User"][e])},items:["All","Administrator","User"],btnName:E||"Select Role",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return se(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return O(["User","Review","Movie"][e])},className:"input-light col-60",items:["User","Review","Movie"],btnName:"Search by ".concat(_)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:z,onChange:function(e){e.persist(),L(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{onSelect:function(e){return O(["User","Review","Movie"][e])},className:"table-input-prepend-select col-auto",items:["User","Review","Movie"],btnName:"Search by ".concat(_)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:z,onChange:function(e){e.persist(),L(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ut.a,{style:{minWidth:"100%"},onSwipedLeft:function(){C(S+1<4?S+1:S)},onSwipedRight:function(){C(S-1>=0?S-1:S)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:V.slice(re[0],re[1]).filter((function(e){return e.selected})).length===re[1]-re[0],onChange:function(e){Q((function(t){for(var a=Object(Ze.a)(t),n=re[0];n<re[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},oe[S]),oe.map((function(e,t){return r.a.createElement("th",{key:"header-col-".concat(t),className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,Z.length?Z.slice(5*(A-1),5*(A-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:e.selected,onChange:function(e){Q((function(t){var a=Object(Ze.a)(t);return a[5*(A-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",null,c[e.author]?r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c[e.author].photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"h6 text-primary"},c[e.author].display_name),r.a.createElement("div",{className:"mb-2"},c[e.author].email),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){a(e),t()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le([e._id]);case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review was deleted",message:"Review was successfully deleted",type:"success"}}),ne(!ae);case 5:case"end":return t.stop()}}),t)})))},"Delete"))))):""),r.a.createElement("td",{className:"".concat(0===S?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{maxWidth:"150px"}},s[e.movie_id]?s[e.movie_id].movie_title:"")),r.a.createElement("td",{className:"".concat(1===S?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,r.a.createElement("div",{style:{minWidth:"200px"},className:"cursor-pointer user-select-none btn-link text-clamp-4",onClick:function(t){f.push("/movie/".concat(e.movie_id,"/").concat(e._id))}},e.review))),r.a.createElement("td",{className:"".concat(2===S?"d-table-cell":"d-none d-xl-table-cell")},"ok_rate"===e.rating?r.a.createElement("div",{style:{marginTop:"-4px"}},r.a.createElement(N,{size:24})):r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(h.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy_division_sign":"shit",set:"facebook",size:24}))),r.a.createElement("td",{className:"".concat(3===S?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.date),"DD/MM/YYYY @ hh:mm A"))),r.a.createElement("td",{className:"".concat(4===S?"d-table-cell":"d-none d-xl-table-cell")},e.reported?r.a.createElement("div",{className:"text-danger"},"Abused"):r.a.createElement("div",{className:"text-success"},"No")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(Z.length/5),current:A,setCurrent:D})))))}));var Pt=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.setEditCommentSection,a=e.setEditComment,c=e.publicUsers,s=e.ratings,o=Object(n.useState)(""),m=Object(b.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),E=g[0],h=g[1],N=Object(n.useState)("User"),w=Object(b.a)(N,2),y=w[0],x=w[1],_=Object(n.useState)(0),O=Object(b.a)(_,2),j=O[0],k=O[1],S=Object(n.useState)(1),C=Object(b.a)(S,2),I=C[0],T=C[1],A=Object(n.useState)(""),D=Object(b.a)(A,2),R=D[0],Y=D[1],U=Object(n.useState)({key:"",value:""}),M=Object(b.a)(U,2),P=M[0],F=M[1],z=Object(n.useState)(""),L=Object(b.a)(z,2),q=L[0],W=L[1],B=Object(n.useState)([]),H=Object(b.a)(B,2),G=H[0],K=H[1],V=Object(n.useState)({}),X=Object(b.a)(V,2),J=X[0],$=X[1],Z=Object(n.useState)([]),Q=Object(b.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!1),ne=Object(b.a)(ae,2),re=ne[0],ce=ne[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:(t=e.sent).error||(K(t.reverse().map((function(e){return Object.assign({},e,{selected:!1})}))),a={},t.forEach((function(e){a[e._id]=e})),$(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[re]),Object(n.useEffect)((function(){var e=Object(Ze.a)(G);G.length&&(q&&("User"===y?e=e.filter((function(e){return c[e.author].display_name.toLowerCase().includes(q.toLowerCase())})):"Comment"===y&&(e=e.filter((function(e){return e.comment.toLowerCase().includes(q.toLowerCase())})))),R&&(e=e.filter((function(e){return c[e.author].role===R}))),"role"===P.key&&P.value&&(e=e.filter((function(e){return c[e.author][P.key]===P.value}))),e="deleted"===P.key&&P.value?e.filter((function(e){return e.deleted===P.value})):e.filter((function(e){return!e.deleted})),te(e))}),[q,R,G,P]);var oe=[5*(I-1),5*(I-1)+5];oe[1]>=ee.length&&(oe[1]=oe[1]-(oe[1]-ee.length));var ie=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r,c,s,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.length>0&&void 0!==o[0]&&o[0]&&Y("All"===E?"":E),!(n=ee.filter((function(e){return e.selected}))).length){e.next=17;break}if("Edit"!==u){e.next=9;break}a(n[0]),t(),e.next=17;break;case 9:return r=n.map((function(e){return e._id})),c=Object(Ze.a)(r),function e(t){c=c.concat(t),t.forEach((function(t){return e(J[t].comments)}))}(r),e.next=15,me(c);case 15:(s=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:s.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comments were deleted",message:"Comments were successfully deleted",type:"success"}}),ce(!re));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"col-auto cursor-pointer ".concat(P.key||R?"text-dark":"text-primary"),onClick:function(){F({key:"",value:""}),Y("")}},"All (",G.filter((function(e){return!e.deleted})).length,")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return F((function(e){return Object.assign({},e,{key:"role",value:"Administrator"})}))},className:"cursor-pointer col-auto ".concat("role"===P.key&&"Administrator"===P.value?"text-primary":"text-dark")},"By Administrators (",Object.values(c).length?G.filter((function(e){return"Administrator"===c[e.author].role&&!e.deleted})).length:"",")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return F((function(e){return Object.assign({},e,{key:"deleted",value:!0})}))},className:"cursor-pointer col-auto ".concat("deleted"===P.key&&!0===P.value?"text-primary":"text-dark")},"Deleted (",G.filter((function(e){return e.deleted})).length,")")),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(["Delete"][e])},items:["Delete"],btnName:u||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return h(["All","Administrator","User"][e])},items:["All","Administrator","User"],btnName:E||"Select Role",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return ie(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return x(["User","Comment"][e])},className:"input-light col-60",items:["User","Comment"],btnName:"Search by ".concat(y)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:q,onChange:function(e){e.persist(),W(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{onSelect:function(e){return x(["User","Comment"][e])},className:"table-input-prepend-select col-auto",items:["User","Comment"],btnName:"Search by ".concat(y)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:q,onChange:function(e){e.persist(),W(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ut.a,{style:{minWidth:"100%"},onSwipedLeft:function(){k(j+1<4?j+1:j)},onSwipedRight:function(){k(j-1>=0?j-1:j)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:ee.slice(oe[0],oe[1]).filter((function(e){return e.selected})).length===oe[1]-oe[0],onChange:function(e){te((function(t){for(var a=Object(Ze.a)(t),n=oe[0];n<oe[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},["Comment","In Repsonse To","Posted On","Reported"][j]),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Comment")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"In Response To")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Posted On")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Reported")))),r.a.createElement("tbody",null,ee.length?ee.slice(5*(I-1),5*(I-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:e.selected,onChange:function(e){te((function(t){var a=Object(Ze.a)(t);return a[5*(I-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",null,r.a.createElement("div",null,c[e.author]?r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c[e.author].photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"text-primary"},c[e.author].display_name),r.a.createElement("div",{className:"mb-2"},c[e.author].email),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){a(e),t()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(l.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[e._id],function e(t){a=a.concat(t),t.forEach((function(t){return e(J[t].comments)}))}(a),t.next=5,me(a);case 5:(n=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment was deleted",message:"Comment was successfully deleted",type:"success"}}),ce(!re);case 8:case"end":return t.stop()}}),t)})))},"Delete")))):"")),r.a.createElement("td",{className:"".concat(0===j?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,r.a.createElement("div",{style:{minWidth:"200px"},className:"cursor-pointer user-select-none btn-link text-clamp-4",onClick:function(t){f.push("/movie/".concat(e.movie_id,"/").concat(e.review_id,"/").concat(e._id))}},e.comment))),r.a.createElement("td",{className:"".concat(1===j?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,"Movie:"," ",s[e.movie_id]?s[e.movie_id].movie_title:""),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{onClick:Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.push("/movie/".concat(e.movie_id,"/").concat(e.review_id));case 1:case"end":return t.stop()}}),t)}))),className:"text-primary cursor-pointer",style:{whiteSpace:"nowrap"}},"View Review"))),r.a.createElement("td",{className:"".concat(2===j?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.date),"DD/MM/YYYY @ hh:mm A"))),r.a.createElement("td",{className:"".concat(3===j?"d-table-cell":"d-none d-xl-table-cell")},e.reported?r.a.createElement("div",{className:"text-danger"},"Abused"):r.a.createElement("div",{className:"text-success"},"No")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:"text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(ee.length/5),current:I,setCurrent:T})))))})),Ft=function(e){var t=e.setEditReview,a=e.setEditReviewSection,c=e.setEditCommentSection,s=e.setEditComment,o=(e.containerSpacing,Object(n.useState)(0)),i=Object(b.a)(o,2),l=i[0],m=i[1];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto pb-3"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Reviews & Comments"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit or delete reviews and comments")),r.a.createElement("div",{className:"col-auto py-3"},r.a.createElement("div",{className:"row no-gutters cursor-pointer"},r.a.createElement("div",{style:{width:"150px"},onClick:function(){return m(0)},className:"rounded-left col table-btn".concat(0===l?" table-btn-selected":"")},"Reviews"),r.a.createElement("div",{style:{width:"150px"},onClick:function(){return m(1)},className:"rounded-right col table-btn".concat(1===l?" table-btn-selected":"")},"Comments"))))),r.a.createElement("div",{className:"col-60"},0===l?r.a.createElement(Mt,{setEditReviewSection:a,setEditReview:t}):r.a.createElement(Pt,{setEditComment:s,setEditCommentSection:c})))};var zt=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,admin:e.user,ratings:e.ratings},t)}))((function(e){var t=e.currentReview,a=e.publicUsers,c=e.getBack,s=e.ratings,o=e.admin,m=Object(n.useState)({}),u=Object(b.a)(m,2),p=u[0],v=u[1],g=Object(n.useState)({display_name:"",email:""}),f=Object(b.a)(g,2),h=f[0],N=f[1],w=Object(n.useState)(!1),y=Object(b.a)(w,2),_=y[0],O=y[1];return Object(n.useEffect)((function(){t&&(v(t),N(a[t.author]))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters p-md-5 p-4",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Reviews & Comments"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit and delete reviews and comments")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"input-light w-100 px-3",value:h.display_name,onChange:function(e){e.persist(),N((function(t){return Object.assign({},t,{display_name:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Message"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:p.review?p.review:"",onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{review:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Rating")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-md-30 col-60",className:"input-light px-3",btnName:p.rating?x.find((function(e){return e.name===p.rating})).element:"Select",onSelect:function(e){v((function(t){return Object.assign({},t,{rating:x[e].name})}))},items:x.map((function(e){return e.element}))}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Report status")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-md-30 col-60",className:"input-light px-3",btnName:p.reported?"Reported":"Not Reported",onSelect:function(e){v((function(t){return Object.assign({},t,{reported:0===e})}))},items:["Reported","Not Reported"]}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Title")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:s[t.movie_id].movie_title,disabled:!0,className:"input-light-disabled col-md-30 col-60 px-3"}))),r.a.createElement("div",{className:"col-60 mt-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return c()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,oe(p,h);case 4:t=e.sent,O(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review updated",message:"Review was successfully updated",type:"success"}}),d.dispatch({type:"UPDATE_RATINGS",rating:Object($e.a)({},p.movie_id,t.rating)}),o._id===p.author&&((a=Object(E.a)({},o.ratings))[p.movie_id]={movie_id:p.movie_id,rate_type:p.rating},d.dispatch({type:"UPDATE_USER",userProperty:{ratings:a}})),c()),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:_,size:20}),"Save"))))}));var Lt=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers},t)}))((function(e){var t=e.currentComment,a=e.publicUsers,c=e.getBack,s=Object(n.useState)({}),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)({display_name:"",email:""}),v=Object(b.a)(p,2),g=v[0],f=v[1],E=Object(n.useState)(!1),h=Object(b.a)(E,2),N=h[0],w=h[1];return Object(n.useEffect)((function(){t&&(u(t),f(a[t.author]))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters p-md-5 p-4",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Reviews & Comments"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit and delete reviews and comments")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"input-light w-100 px-3",value:g.display_name,onChange:function(e){e.persist(),f((function(t){return Object.assign({},t,{display_name:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Comment"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:m.comment,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{comment:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Report status")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-md-30 col-60",className:"input-light px-3",btnName:m.reported?"Reported":"Not Reported",onSelect:function(e){u((function(t){return Object.assign({},t,{reported:0===e})}))},items:["Reported","Not Reported"]}))),r.a.createElement("div",{className:"col-60 mt-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return c()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,ie(m,g);case 3:t=e.sent,w(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review updated",message:"Review was successfully updated",type:"success"}}),c());case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:N,size:20}),"Save"))))}));var qt=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers},t)}))((function(e){var t=e.setEditAnnouncement,a=e.setEditAnnouncementSection,c=e.setAddNewAnouncementSection,s=e.publicUsers,o=Object(n.useState)(""),m=Object(b.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),f=g[0],E=g[1],h=Object(n.useState)("User"),N=Object(b.a)(h,2),w=N[0],y=N[1],x=Object(n.useState)(0),_=Object(b.a)(x,2),O=_[0],j=_[1],k=Object(n.useState)(1),S=Object(b.a)(k,2),C=S[0],I=S[1],T=Object(n.useState)(""),A=Object(b.a)(T,2),D=A[0],R=A[1],Y=Object(n.useState)(""),U=Object(b.a)(Y,2),M=U[0],P=U[1],F=Object(n.useState)({key:"",value:""}),z=Object(b.a)(F,2),L=z[0],q=z[1],W=Object(n.useState)(!1),B=Object(b.a)(W,2),H=B[0],G=B[1],K=Object(n.useState)([]),V=Object(b.a)(K,2),X=V[0],J=V[1],$=Object(n.useState)([]),Z=Object(b.a)($,2),Q=Z[0],ee=Z[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:(t=e.sent).error||J(t.map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[H]),Object(n.useEffect)((function(){var e=Object(Ze.a)(X);X.length&&(M&&("User"===w?e=e.filter((function(e){return s[e.author].display_name.toLowerCase().includes(M.toLowerCase())})):"Description"===w&&(e=e.filter((function(e){return e.description.toLowerCase().includes(M.toLowerCase())})))),D&&(e=e.filter((function(e){return e.type===D}))),L.key&&(e=e.filter((function(e){return e[L.key]===L.value}))),ee(e))}),[M,D,X,L]);var te=[5*(C-1),5*(C-1)+5];te[1]>=Q.length&&(te[1]=te[1]-(te[1]-Q.length));var ae=["Delete"],ne=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>0&&void 0!==s[0]&&s[0]&&R(f),"Edit"!==u){e.next=7;break}(n=Q.filter((function(e){return e.selected}))).length&&(t(n[0]),a()),e.next=15;break;case 7:if("Delete"!==u){e.next=15;break}if(!(r=Q.filter((function(e){return e.selected}))).length){e.next=15;break}return e.next=12,ve(r.map((function(e){return e._id})));case 12:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcements were deleted",message:"Announcements were successfully deleted",type:"success"}}),G(!H);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=["Information","Error","Warning"];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Announcements"),r.a.createElement("div",{className:"row no-gutters"},"Create and post announcements")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return c()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{onClick:function(){q({key:"",value:""}),E(""),R("")},className:"cursor-pointer col-auto ".concat(D||L.key?"text-dark":"text-primary")},"All (",X.length,")"),["Published","Drafted","Expired"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return q((function(t){return Object.assign({},t,{key:"status",value:e})}))},className:"cursor-pointer col-auto ".concat("status"===L.key&&L.value===e?"text-primary":"text-dark")},e," (",X.filter((function(t){return t.status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(ae[e])},items:ae,btnName:u||"Select Action",className:"input-light px-3 col-auto "}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return E(re[e])},items:re,btnName:f||"Select Type",className:"input-light px-3 col-auto "}))),r.a.createElement("div",{onClick:function(){return ne(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return y(["User","Description"][e])},className:"input-light col-60",items:["User","Description"],btnName:"Search by ".concat(w)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:M,onChange:function(e){e.persist(),P(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{onSelect:function(e){return y(["User","Description"][e])},className:"table-input-prepend-select col-auto",items:["User","Description"],btnName:"Search by ".concat(w)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:M,onChange:function(e){e.persist(),P(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ut.a,{style:{minWidth:"100%"},onSwipedLeft:function(){j(O+1<4?O+1:O)},onSwipedRight:function(){j(O-1>=0?O-1:O)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:Q.slice(te[0],te[1]).filter((function(e){return e.selected})).length===te[1]-te[0],onChange:function(e){ee((function(t){for(var a=Object(Ze.a)(t),n=te[0];n<te[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},["Type","Description","Duration","Status"][O]),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Type")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Description")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Duration")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Status")))),r.a.createElement("tbody",null,Q.length?Q.slice(5*(C-1),5*(C-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:e.selected,onChange:function(e){ee((function(t){var a=Object(Ze.a)(t);return a[5*(C-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",null,Object.values(s).length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(s[e.author].photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"text-primary"},s[e.author].display_name),r.a.createElement("div",{className:"mb-3"},s[e.author].email),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),a()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve([e._id]);case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcement was deleted",message:"Announcement was successfully deleted",type:"success"}}),G(!H);case 5:case"end":return t.stop()}}),t)})))},"Delete")))))):""),r.a.createElement("td",{className:"".concat("Warning"===e.type?"text-warning":"Information"===e.type?"text-primary":"Error"===e.type?"text-danger":"").concat(0===O?" d-table-cell":" d-none d-xl-table-cell")},r.a.createElement("div",null,e.type)),r.a.createElement("td",{className:"".concat(1===O?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{minWidth:"150px"},className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.description)),r.a.createElement("td",{className:"".concat(2===O?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",null,"From: "),r.a.createElement("div",null,"To: ")),r.a.createElement("div",{className:"d-inline-block"},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.start_date),"DD/MM/YYYY @ hh:mm A"),r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.end_date),"DD/MM/YYYY @ hh:mm A")))))),r.a.createElement("td",{className:"".concat(3===O?"d-table-cell":"d-none d-xl-table-cell")},e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(Q.length/5),current:C,setCurrent:I})))))))})),Wt=a(31),Bt=a.n(Wt),Ht=(a(76),a(32)),Gt=a.n(Ht),Kt=function(e){var t=e.currentAnnouncement,a=e.getBack,c=Object(n.useState)({description:"",type:"",start_date:Date.now(),end_date:Date.now(),status:""}),s=Object(b.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(!1),p=Object(b.a)(u,2),v=p[0],g=p[1];Object(n.useEffect)((function(){t&&m(t)}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var f=["Information","Warning","Error"],E=["Published","Drafted","Expired"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Announcements"),r.a.createElement("div",{className:"row no-gutters"},"Edit existing announcement")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{type:f[e]})}))},className:"w-100 input-light px-3",items:f,btnName:o.type?o.type:"Select"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:o.description?o.description:"",onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(o.description.split(" ").length<=499?"text-muted":"text-danger")},o.description?500-o.description.split(" ").length:500," ","words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(o.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(o.start_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(o.start_date)}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(o.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(o.end_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(o.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:E[e]})}))},className:"w-100 input-light px-3",items:E,btnName:o.status?o.status:"Select"}))))),r.a.createElement("div",{className:"col-60 mt-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,ge(o);case 3:t=e.sent,g(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcement updated",message:"Announcement was successfully updated",type:"success"}}),a());case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:v,size:20}),"Save"))))};var Vt=Object(p.b)((function(e,t){return Object(E.a)({user:e.user},t)}))((function(e){var t=e.user,a=e.getBack,c=Object(n.useState)({description:"",type:"",start_date:Date.now(),end_date:Date.now(),status:"Published"}),s=Object(b.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(""),p=Object(b.a)(u,2),v=p[0],g=p[1],f=Object(n.useState)(!1),E=Object(b.a)(f,2),h=E[0],N=E[1],w=["Information","Warning","Error"],y=["Published","Drafted","Deleted"],x=[{valid:o.description,error:"Description is required"},{valid:o.type,error:"Type is required"},{valid:o.start_date<o.end_date,error:"Start date must be before end date"},{valid:o.start_date!==o.end_date,error:"Announcement duration is 0"}];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Announcements"),r.a.createElement("div",{className:"row no-gutters"},"Creat a brand new announcement and add to this site")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{type:w[e]})}))},className:"w-100 input-light px-3",items:w,btnName:o.type?o.type:"Select"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:o.description?o.description:"",onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(o.description.split(" ").length<=499?"text-muted":"text-danger")},o.description?500-o.description.split(" ").length:500," ","words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(o.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(o.start_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(o.start_date)}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(o.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(o.end_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(o.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:y[e]})}))},className:"w-100 input-light px-3",items:y,btnName:o.status?o.status:"Select"}))))),r.a.createElement("div",{className:"col-60 mt-3"},r.a.createElement("div",{style:{height:"50px",opacity:v?1:0},className:"row no-gutters align-items-center text-danger"},v),r.a.createElement("div",{className:"row no-gutters mt-2"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=14;break}if(!(n=x.filter((function(e){return!e.valid}))).length){e.next=6;break}g(n[0].error),e.next=12;break;case 6:return N(!0),e.next=9,pe(Object.assign({},o,{author:t._id}));case 9:r=e.sent,N(!1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcement created",message:"You successfully created announcement",type:"success"}}),a());case 12:e.next=15;break;case 14:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to create announcements",type:"failure"}});case 15:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:h,size:20}),"Save"))))}));var Xt=Object(p.b)((function(e,t){return Object(E.a)({ratings:e.ratings},t)}))((function(e){var t=e.setEditPromotion,a=e.setAddNewPromotionSection,c=e.setEditPromotionSection,s=(e.ratings,Object(n.useState)("")),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(""),v=Object(b.a)(p,2),g=v[0],E=v[1],w=Object(n.useState)("Description"),y=Object(b.a)(w,2),x=y[0],_=y[1],O=Object(n.useState)(0),k=Object(b.a)(O,2),S=k[0],C=k[1],I=Object(n.useState)(1),T=Object(b.a)(I,2),A=T[0],D=T[1],R=Object(n.useState)(""),Y=Object(b.a)(R,2),U=Y[0],M=Y[1],P=Object(n.useState)(""),F=Object(b.a)(P,2),z=F[0],L=F[1],q=Object(n.useState)({key:"",value:""}),W=Object(b.a)(q,2),B=W[0],H=W[1],G=Object(n.useState)([]),K=Object(b.a)(G,2),V=K[0],X=K[1],J=Object(n.useState)([]),$=Object(b.a)(J,2),Z=$[0],Q=$[1],ee=Object(n.useState)(!1),te=Object(b.a)(ee,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:(t=e.sent).error||X(t.map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ae]),Object(n.useEffect)((function(){var e=Object(Ze.a)(V);V.length&&(z&&("Description"===x?e=e.filter((function(e){return e.description.toLowerCase().includes(z.toLowerCase())})):"Review"===x&&(e=e.filter((function(e){return"Review"===e.content_type&&e.content.review.toLowerCase().includes(z.toLowerCase())})))),U&&(e=e.filter((function(e){return e.content_type.match(new RegExp(U,"i"))}))),B.key&&(e=e.filter((function(e){return e[B.key]===B.value}))),Q(e))}),[z,U,V,B]);var re=[5*(A-1),5*(A-1)+5];re[1]>=Z.length&&(re[1]=re[1]-(re[1]-Z.length));var ce=["Review","Rating","Duration","Status"],se=["Description","Review"];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Promotions List"),r.a.createElement("div",{className:"row no-gutters"},"Edit, add and delete promtions")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return a()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"cursor-pointer col-auto ".concat(""!==B.key||U?"text-dark":"text-primary"),onClick:function(){M(""),E(""),H({key:"",value:""})}},"All (",V.length,")"),["Published","Drafted","Deleted"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return H((function(t){return Object.assign({},t,{key:"publish_status",value:e})}))},className:"cursor-pointer col-auto ".concat("publish_status"===B.key&&B.value===e?"text-primary":"text-dark")},e," (",V.filter((function(t){return t.publish_status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return u(["Delete"][e])},items:["Delete"],btnName:m||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return E(["Review","Comment"][e])},items:["Review","Comment"],btnName:g||"Select Type",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){if("Edit"===m){var e=Z.filter((function(e){return e.selected}));e.length&&(t(e[0]),c())}else"Delete"===m||M(g)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return _(se[e])},className:"input-light col-60",items:se,btnName:"Search by ".concat(x)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:z,onChange:function(e){e.persist(),L(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{onSelect:function(e){return _(se[e])},className:"table-input-prepend-select col-auto",items:se,btnName:"Search by ".concat(x)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:z,onChange:function(e){e.persist(),L(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ut.a,{style:{minWidth:"100%"},onSwipedLeft:function(){C(S+1<4?S+1:S)},onSwipedRight:function(){C(S-1>=0?S-1:S)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:Z.slice(re[0],re[1]).filter((function(e){return e.selected})).length===re[1]-re[0],onChange:function(e){Q((function(t){for(var a=Object(Ze.a)(t),n=re[0];n<re[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},"Description"),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},ce[S]),ce.map((function(e,t){return r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate",key:"column-".concat(t)},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,Z.length?Z.slice(5*(A-1),5*(A-1)+5).map((function(e,a){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(a)},r.a.createElement("td",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:e.selected,onChange:function(e){Q((function(t){var n=Object(Ze.a)(t);return n[5*(A-1)+a].selected=e.target.checked,n}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"mb-2",style:{minWidth:"150px"}},e.description),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),c()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=[e._id],j("/admin/promotions/delete",{ids:n,update:{status:"Deleted"}});case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Promotion was deleted",message:"Promotion was successfully deleted",type:"success"}}),ne(!ae);case 5:case"end":return t.stop()}var n}),t)})))},"Delete"))),r.a.createElement("td",{className:"".concat(0===S?"d-table-cell":"d-none d-xl-table-cell")},"Review"===e.content_type?r.a.createElement("div",{style:{minWidth:"150px"}},r.a.createElement("div",{className:"cursor-pointer user-select-none btn-link",onClick:function(t){f.push("/movie/".concat(e.movie_id,"/").concat(e.content_id))}},e.content.review)):r.a.createElement("div",{className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.content.comment)),r.a.createElement("td",{className:"".concat(1===S?"d-table-cell":"d-none d-xl-table-cell")},e.content.rating?"ok_rate"===e.content.rating?r.a.createElement("div",{style:{marginTop:"-4px"}},r.a.createElement(N,{size:24})):r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(h.a,{emoji:"excellent_rate"===e.content.rating?"fire":"good_rate"===e.content.rating?"heart":"ok_rate"===e.content.rating?"heavy_division_sign":"shit",set:"facebook",size:24})):"-"),r.a.createElement("td",{className:"".concat(2===S?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",null,"From: "),r.a.createElement("div",null,"To: ")),r.a.createElement("div",{className:"d-inline-block"},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.start_date),"DD/MM/YYYY @ hh:mm A"),r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.end_date),"DD/MM/YYYY @ hh:mm A")))))),r.a.createElement("td",{className:"".concat("Published"===e.status?"text-green":"Drafted"===e.status?"text-orange":"text-danger"," ").concat(3===S?"d-table-cell":"d-none d-xl-table-cell")},"Published"===e.status?"Active":"Drafted"===e.status?"Inactive":e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(Z.length/5),current:A,setCurrent:D})))))))})),Jt=function(e){var t=e.currentPromotion,a=e.getBack,c=Object(n.useState)({review:"",comment:"",review_id:1,comment_id:1,content_type:"",publish_status:"",active_status:"",start_date:Date.now(),end_date:Date.now(),movie_title:"",movie_id:"",content:{},title:""}),s=Object(b.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(!1),p=Object(b.a)(u,2),v=p[0],g=p[1];Object(n.useEffect)((function(){m((function(e){return Object.assign({},e,t)}))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var f=["Published","Drafted","Deleted"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Edit Promotions"),r.a.createElement("div",{className:"row no-gutters"},"Edit existing promotion")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Description"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("textarea",{value:o.description?o.description:"",onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 mb-1"},o.content_type),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("textarea",{value:o.content?"Review"===o.content_type?o.content.review:o.content.comment:"",onChange:function(e){e.persist();var t=e.target.value;if(t.split(" ").length<=500)if("Review"===o.content_type){var a=Object(E.a)({},o.content);a.review=t,m((function(e){return Object.assign({},e,{content:a})}))}else{var n=Object(E.a)({},o.content);n.comment=t,m((function(e){return Object.assign({},e,{content:n})}))}},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(o.content_type?"Review"===o.content_type?o.content.review.split(" ").length<=499?"text-muted":"text-danger":o.content.comment.split(" ").length<=499?"text-muted":"text-danger":"")},o.content.review?o.content.review.length?500-o.content.review.split(" ").length:500:o.content.comment?o.content.comment.length?500-o.content.comment.split(" ").length:500:""," ","words left")),"Review"===o.content_type&&r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 mb-4 px-0"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60"},"Rating")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60",className:"input-light px-3",btnName:o.content.rating?x.find((function(e){return e.name===o.content.rating})).element:"Select",onSelect:function(e){var t=Object(E.a)({},o.content);t.rating=x[e].name,m((function(e){return Object.assign({},e,{content:t})}))},items:x.map((function(e){return e.element}))}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Bt.a,{value:ot.a.format(new Date(o.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative w-100"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}}))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Bt.a,{value:ot.a.format(new Date(o.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative w-100"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 pr-sm-3 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Time"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 position-relative input-light"},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(o.start_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(o.start_date)})))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Time"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 position-relative input-light"},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(o.end_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(o.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:f[e]})}))},className:"w-100 input-light px-3",items:f,btnName:o.status?o.status:"Select"}))))))),r.a.createElement("div",{className:"col-60 mt-2"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:a},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,be(o);case 3:t=e.sent,g(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Promotion updated",message:"Promotion was successfully updated",type:"success"}}),a());case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:v,size:20}),"Save"))))};var $t=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.publicUsers,a=e.getBack,c=e.ratings,s=Object(n.useState)({description:"",start_date:Date.now(),end_date:Date.now(),content_type:"",status:"Published"}),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(1),v=Object(b.a)(p,2),g=v[0],f=v[1],E=Object(n.useState)(""),w=Object(b.a)(E,2),y=w[0],x=w[1],_=Object(n.useState)(!1),O=Object(b.a)(_,2),k=O[0],S=O[1],C=Object(n.useState)("User"),I=Object(b.a)(C,2),T=I[0],A=I[1],D=Object(n.useState)(""),R=Object(b.a)(D,2),Y=R[0],U=R[1],M=Object(n.useState)([]),P=Object(b.a)(M,2),F=P[0],z=P[1],L=["User","Movie","Review"],q=Object(n.useState)(0),W=Object(b.a)(q,2),B=W[0],H=W[1],G=Object(n.useState)([]),K=Object(b.a)(G,2),V=K[0],X=K[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:(t=e.sent).error||X(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){var e=[];Y?"User"===T?Object.values(t).length&&V.forEach((function(a){t[a.author].display_name.toLowerCase().includes(Y.toLowerCase())&&e.push(a)})):"Movie"===T?V.forEach((function(t){c[t.movie_id]&&c[t.movie_id].movie_title.toLowerCase().includes(Y.toLowerCase())&&e.push(t)})):"Review"===T&&V.forEach((function(t){t.review.toLowerCase().includes(Y.toLowerCase())&&e.push(t)})):e=e.concat(Object(Ze.a)(V)),z(e.map((function(e){return Object.assign({},e,{selected:!1})})))}),[Y,V]);var J=[5*(g-1),5*(g-1)+5];J[1]>=F.length&&(J[1]=J[1]-(J[1]-F.length));var $=["Movie Name","Review","Rating","Posted On","Reported"],Z=[{valid:m.description,error:"Description is required"},{valid:m.start_date<m.end_date,error:"Start date must be before end date"},{valid:m.start_date!==m.end_date,error:"promotion duration is 0"},{valid:F.filter((function(e){return e.selected})).length,error:"No content selected"}];return r.a.createElement("div",{className:"row no-gutters p-sm-5 p-4"},r.a.createElement("div",{className:"col-60 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto py-3"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Promote Content"),r.a.createElement("div",{className:"row no-gutters"},"Edit, add and delete promotions")))),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Description"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("textarea",{value:m.description?m.description:"",onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(m.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(m.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),u((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(m.start_date);c.setHours(n),c.setMinutes(r),u((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(m.start_date)}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(m.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(m.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),u((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(m.end_date);c.setHours(n),c.setMinutes(r),u((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(m.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-3 h6 mt-4"},"Select Content To Promote"),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(It,{onSelect:function(e){return A(L[e])},className:"table-input-prepend-select col-auto bg-custom-primary text-white",items:L,btnName:"Search by ".concat(T)}),r.a.createElement("div",{className:"col position-relative",style:{maxWidth:"400px"}},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:Y,onChange:function(e){e.persist(),U(e.target.value)},className:"table-input pr-5 pl-3 w-100"})))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ut.a,{style:{minWidth:"100%"},onSwipedLeft:function(){H(B+1<4?B+1:B)},onSwipedRight:function(){H(B-1>=0?B-1:B)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:F.slice(J[0],J[1]).filter((function(e){return e.selected})).length===J[1]-J[0],onChange:function(e){z((function(t){for(var a=Object(Ze.a)(t),n=J[0];n<J[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},$[B]),$.map((function(e,t){return r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate",key:"x-col-".concat(t)},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,F.length?F.slice(5*(g-1),5*(g-1)+5).map((function(e,a){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(a)},r.a.createElement("td",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:e.selected,onChange:function(e){z((function(t){var n=Object(Ze.a)(t);return n[5*(g-1)+a].selected=e.target.checked,n}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(Object.values(t).length?t[e.author].photo:"",")")}})),Object.values(t).length?r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"h6 text-primary"},t[e.author].display_name),r.a.createElement("div",null,t[e.author].email)):""),r.a.createElement("td",{className:"".concat(0===B?"d-table-cell":"d-none d-xl-table-cell")},c[e.movie_id]?c[e.movie_id].movie_title:""),r.a.createElement("td",{className:"".concat(1===B?"d-table-cell":"d-none d-xl-table-cell")},e.comment?r.a.createElement("div",{className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.comment):r.a.createElement("div",{style:{minWidth:"200px"}},r.a.createElement("div",{className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.review))),r.a.createElement("td",{className:"".concat(2===B?"d-table-cell":"d-none d-xl-table-cell")},e.rating?"ok_rate"===e.rating?r.a.createElement("div",{style:{marginTop:"-4px"}},r.a.createElement(N,{size:24})):r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(h.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy_division_sign":"shit",set:"facebook",size:24})):"-"),r.a.createElement("td",{style:{whiteSpace:"nowrap"},className:"".concat(3===B?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,ot.a.format(new Date(e.date),"DD/MM/YYYY @ hh:mm A"))),r.a.createElement("td",{className:"".concat(e.reported?"text-danger":"text-green"," ").concat(4===B?"d-table-cell":"d-none d-xl-table-cell")},e.reported?"Abused":"Not Reported"))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(F.length/5),current:g,setCurrent:f}))),r.a.createElement("div",{className:"col-60 mt-1 px-0"},r.a.createElement("div",{style:{height:"50px",opacity:y?1:0},className:"row no-gutters align-items-center text-danger mb-2"},y),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Z.filter((function(e){return!e.valid}))).length){e.next=5;break}x(t[0].error),e.next=12;break;case 5:return n=F.filter((function(e){return e.selected})).map((function(e){return Object.assign({},m,{content_type:e.comment?"Comment":"Review",content:e.comment?{comment:e.comment}:{review:e.review,rating:e.rating},content_id:e._id,content_author:e.author,movie_title:e.movie_title,movie_genres:e.movie_genres,movie_poster:e.movie_poster,movie_release_date:e.movie_release_date,movie_id:e.movie_id})})),S(!0),e.next=9,j("/admin/promotions/create",n);case 9:r=e.sent,S(!1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Promotions created",message:"Promotions were successfully created",type:"success"}}),a());case 12:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:k,size:20}),"Save")))))})),Zt=function(e){var t=e.setEditNotification,a=e.setEditNotificationSection,c=e.setAddNewNotificationSection,s=Object(n.useState)(""),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(""),v=Object(b.a)(p,2),g=v[0],f=v[1],E=Object(n.useState)("Subject"),h=Object(b.a)(E,2),N=h[0],w=h[1],y=Object(n.useState)(0),x=Object(b.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)(1),k=Object(b.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)(""),T=Object(b.a)(I,2),A=T[0],D=T[1],R=Object(n.useState)(""),Y=Object(b.a)(R,2),U=Y[0],M=Y[1],P=Object(n.useState)({key:"",value:""}),F=Object(b.a)(P,2),z=F[0],L=F[1],q=Object(n.useState)([]),W=Object(b.a)(q,2),B=W[0],H=W[1],G=Object(n.useState)([]),K=Object(b.a)(G,2),V=K[0],X=K[1],J=Object(n.useState)(!1),$=Object(b.a)(J,2),Z=$[0],Q=$[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:(t=e.sent).error||H(t.reverse().map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z]);var ee=["App","Email","System"];Object(n.useEffect)((function(){var e=Object(Ze.a)(B);B.length&&(U&&("Subject"===N?e=e.filter((function(e){return e.subject.toLowerCase().includes(U.toLowerCase())})):"Description"===N&&(e=e.filter((function(e){return e.description.toLowerCase().includes(U.toLowerCase())})))),A&&(e=e.filter((function(e){return e.type===A}))),z.key&&(e=e.filter((function(e){return e[z.key]===z.value}))),X(e))}),[U,A,B,z]);var te=[5*(S-1),5*(S-1)+5];te[1]>=V.length&&(te[1]=te[1]-(te[1]-V.length));var ae=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>0&&void 0!==s[0]&&s[0]&&D(g),"Edit"!==m){e.next=7;break}(n=V.filter((function(e){return e.selected}))).length&&(t(n[0]),a()),e.next=15;break;case 7:if("Delete"!==m){e.next=15;break}if(!(r=V.filter((function(e){return e.selected}))).length){e.next=15;break}return e.next=12,xe(r.map((function(e){return e._id})),{status:"Deleted"});case 12:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Selected notifications deleted",message:"Selected notifications were successfully deleted",type:"success"}}),d.dispatch({type:"UPDATE_USER",userProperty:{update:Date.now()}})),Q(!Z);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Notifications"),r.a.createElement("div",{className:"row no-gutters"},"Create, send and manage notifications")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return c()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{onClick:function(){D(""),f(""),L({key:"",value:""})},className:"col-auto cursor-pointer ".concat(A||z.key?"text-dark":"text-primary")},"All (",B.length,")"),["Sent","Drafted","Deleted"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return L((function(t){return Object.assign({key:"status",value:e})}))},className:"col-auto cursor-pointer ".concat("status"===z.key&&z.value===e?"text-primary":"text-dark")},e," (",B.filter((function(t){return t.status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return u(["Delete"][e])},items:["Delete"],btnName:m||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return f(ee[e])},items:ee,btnName:g||"Select Type",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return ae(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return w(["Subject","Description"][e])},className:"input-light col-60",items:["Subject","Description"],btnName:"Search by ".concat(N)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:U,onChange:function(e){e.persist(),M(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{onSelect:function(e){return w(["Subject","Description"][e])},className:"table-input-prepend-select col-auto",items:["Subject","Description"],btnName:"Search by ".concat(N)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:U,onChange:function(e){e.persist(),M(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ut.a,{style:{minWidth:"100%"},onSwipedLeft:function(){O(_+1<4?_+1:_)},onSwipedRight:function(){O(_-1>=0?_-1:_)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:V.slice(te[0],te[1]).filter((function(e){return e.selected})).length===te[1]-te[0],onChange:function(e){X((function(t){for(var a=Object(Ze.a)(t),n=te[0];n<te[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},"Subject"),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},["Type","Description","Duration","Status"][_]),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Type")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Description")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Duration")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Status")))),r.a.createElement("tbody",null,V.length?V.slice(5*(S-1),5*(S-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:e.selected,onChange:function(e){X((function(t){var a=Object(Ze.a)(t);return a[5*(S-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"mb-2"},e.subject),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),a()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe([e._id],{status:"Deleted"});case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Notification was deleted",message:"Notification was successfully deleted",type:"success"}}),d.dispatch({type:"UPDATE_USER",userProperty:{update:Date.now()}})),Q(!Z);case 5:case"end":return t.stop()}}),t)})))},"Delete"))),r.a.createElement("td",{className:"".concat(0===_?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,e.type)),r.a.createElement("td",{className:"".concat(1===_?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{minWidth:"200px"},className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.description)),r.a.createElement("td",{className:"".concat(2===_?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{className:"d-flex mb-2"},r.a.createElement("div",{style:{width:"55px"}},"From:"),r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.start_date),"DD/MM/YYYY @ hh:mm A")))),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{style:{width:"55px"}},"To:"),r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},ot.a.format(new Date(e.end_date),"DD/MM/YYYY @ hh:mm A"))))),r.a.createElement("td",{className:"".concat(3===_?"d-table-cell":"d-none d-xl-table-cell")},e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(V.length/5),current:S,setCurrent:C})))))))},Qt=a(365),ea=a(363),ta=a(359),aa=Object(ta.a)((function(e){return{inputRoot:{"& .MuiOutlinedInput-notchedOutline":{border:"none"}}}})),na=Object(Tt.a)({palette:{primary:{main:"rgb(255, 0, 64)"},secondary:{main:"#202020"}}}),ra=function(e){var t=aa();return r.a.createElement(At.a,{theme:na},r.a.createElement(Qt.a,Object.assign({},e,{classes:t,multiple:!0,id:"tags-outlined",filterSelectedOptions:!0,renderInput:function(t){return r.a.createElement(ea.a,Object.assign({},t,{variant:"outlined",placeholder:e.placeholder}))}})))};var ca=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,user:e.user},t)}))((function(e){var t=e.currentNotification,a=e.getBack,c=e.publicUsers,s=e.user,o=["App","Email","System"],m=Date.now(),u=Object(n.useState)({type:"",subject:"",start_date:m,end_date:m,receivers:[],description:"",status:"Drafted"}),p=Object(b.a)(u,2),v=p[0],g=p[1],f=["Sent","Drafted","Deleted"],E=Object(n.useState)(""),h=Object(b.a)(E,2),N=h[0],w=h[1],y=Object(n.useState)(!1),x=Object(b.a)(y,2),_=x[0],O=x[1],j=[{valid:v.subject,error:"Subject is required"},{valid:v.type,error:"Select notification type"},{valid:v.receivers.length,error:"Select at least one receiver"},{valid:v.description,error:"Description is required"}];Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){g(t)}),[t]);return r.a.createElement("div",{className:"row no-gutters p-sm-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Edit notification"),r.a.createElement("div",{className:"row no-gutters"},"Edit existing notification")),r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Subject"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{disabled:"System"===v.type,type:"text",className:"w-100 ".concat("System"===v.type?"input-light-disabled":"input-light"," px-3"),value:v.subject,onChange:function(e){e.persist(),g((function(t){return Object.assign({},t,{subject:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement(It,{disabled:"System"===v.type,popoverClass:"col-sm-30 col-60",className:"input-light".concat("System"===v.type?"-disabled":""," col-60"),btnName:v.type?v.type:"Select",items:o,onSelect:function(e){return g((function(t){return Object.assign({},t,{type:o[e]})}))}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Notification to"),r.a.createElement(ra,{disabled:"System"===v.type,value:v.receivers,onChange:function(e,t){g((function(e){return Object.assign({},e,{receivers:t})}))},placeholder:"Search by username",color:"primary",className:"col-md-30 col-60 input-light-resize".concat("System"===v.type?"-disabled":""),options:Object.keys({All:"All","All users":"User","All admins":"Administrator","Inactive users":"Inactive","Active users":"Active"}).concat(Object.values(c).filter((function(e){return"Deleted"!==e.status}))),getOptionLabel:function(e){return e.display_name?e.display_name:e}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{disabled:"System"===v.type,value:v.description,onChange:function(e){e.persist();var t=e.target.value;t.split(" ").length<=500&&g((function(e){return Object.assign({},e,{description:t})}))},className:"".concat("System"===v.type?"textarea-light-disabled":"textarea-light"," w-100"),style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(v.description.split(" ").length<=499?"text-muted":"text-danger")},v.description?500-v.description.split(" ").length:500,"words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(v.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({disabled:"System"===v.type},e,{className:"input-light".concat("System"===v.type?"-disabled":""," w-100 pl-5 pr-3"),placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(v.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),g((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light".concat("System"===v.type?"-disabled":""),style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),"System"===v.type?r.a.createElement("div",{className:"w-100 pl-5"},ot.a.format(new Date(v.start_date),"hh:mm A")):r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(v.start_date);c.setHours(n),c.setMinutes(r),g((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(v.start_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(It,{disabled:"System"===v.type,popoverClass:"col-sm-30 col-60",className:"input-light".concat("System"===v.type?"-disabled":""," col-60"),btnName:v.status?v.status:"Select status",items:f,onSelect:function(e){return g((function(t){return Object.assign({},t,{status:f[e]})}))}})),r.a.createElement("div",{style:{height:"50px",opacity:N?1:0},className:"row no-gutters align-items-center text-danger my-2"},N),"System"!==v.type?r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:a},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=j.filter((function(e){return!e.valid}))).length){e.next=5;break}w(t[0].error),e.next=20;break;case 5:return O(!0),e.next=8,ye(v);case 8:if(n=e.sent,O(!1),!n.error){e.next=14;break}d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}),e.next=20;break;case 14:return d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Notification edited",message:"Notification was successfully edited",type:"success"}}),e.next=17,K(s._id);case 17:r=e.sent,d.dispatch({type:"SET_USER",user:r}),a();case 20:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:_,size:20}),"Save")):r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:a},"Go back"))))}));var sa=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,user:e.user},t)}))((function(e){var t=e.publicUsers,a=e.getBack,c=e.user,s=["App","Email","System"],o=Date.now(),m=Object(n.useState)({type:"",subject:"",receivers:[],start_date:o,end_date:o,description:"",status:"Sent"}),u=Object(b.a)(m,2),p=u[0],v=u[1],g=Object(n.useState)(""),f=Object(b.a)(g,2),E=f[0],h=f[1],N=Object(n.useState)(!1),w=Object(b.a)(N,2),y=w[0],x=w[1],_=["Sent","Drafted","Deleted"],O=[{valid:p.subject,error:"Subject is required"},{valid:p.type,error:"Select notification type"},{valid:p.receivers.length,error:"Select at least one receiver"},{valid:p.description,error:"Description is required"}];return r.a.createElement("div",{className:"row no-gutters p-sm-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Add new notification"),r.a.createElement("div",{className:"row no-gutters"},"Create a brand new notification and add to this site")),r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Subject"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"w-100 input-light px-3",value:p.subject,onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{subject:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement(It,{popoverClass:"col-sm-30 col-60",className:"input-light col-60 w-100",btnName:p.type?p.type:"Select",items:s,onSelect:function(e){return v((function(t){return Object.assign({},t,{type:s[e]})}))}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Notification to"),r.a.createElement(ra,{value:p.receivers,onChange:function(e,t){v((function(e){return Object.assign({},e,{receivers:t})}))},placeholder:"Search by username",color:"primary",className:"col-md-30 col-60 input-light-resize",options:Object.keys({All:"All","All users":"User","All admins":"Administrator","Inactive users":"Inactive","Active users":"Active"}).concat(Object.values(t).filter((function(e){return"Deleted"!==e.status}))),getOptionLabel:function(e){return e.display_name?e.display_name:e}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:p.description,onChange:function(e){e.persist();var t=e.target.value;t.split(" ").length<=500&&v((function(e){return Object.assign({},e,{description:t})}))},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(p.description.split(" ").length<=499?"text-muted":"text-danger")},p.description?500-p.description.split(" ").length:500,"words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(Bt.a,{value:ot.a.format(new Date(p.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Xe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(p.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),v((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Xe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Gt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(b.a)(t,2),n=a[0],r=a[1],c=new Date(p.start_date);c.setHours(n),c.setMinutes(r),v((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(p.start_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(It,{popoverClass:"col-sm-30 col-60",className:"input-light col-60",btnName:p.status?p.status:"Select status",items:_,onSelect:function(e){return v((function(t){return Object.assign({},t,{status:_[e]})}))}})),r.a.createElement("div",{style:{height:"50px",opacity:E?1:0},className:"row no-gutters align-items-center text-danger my-2"},E),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:a},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=O.filter((function(e){return!e.valid}))).length){e.next=5;break}h(t[0].error),e.next=20;break;case 5:return x(!0),e.next=8,we(p);case 8:if(n=e.sent,x(!1),!n.error){e.next=14;break}d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}),e.next=20;break;case 14:return d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Notification created",message:"Notification was successfully created",type:"success"}}),e.next=17,K(c._id);case 17:r=e.sent,d.dispatch({type:"SET_USER",user:r}),a();case 20:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:y,size:20}),"Save"))))})),oa=a(140);var ia=Object(p.b)((function(e,t){return Object(E.a)({ratings:e.ratings,publicUsers:e.publicUsers},t)}))((function(e){var t=e.setEditUser,a=e.setEditUserSection,c=e.setAddNewUserSection,s=e.publicUsers,o=(e.ratings,Object(n.useState)("")),m=Object(b.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),f=g[0],h=g[1],N=Object(n.useState)("User"),w=Object(b.a)(N,2),y=w[0],x=w[1],_=Object(n.useState)(0),O=Object(b.a)(_,2),k=O[0],S=O[1],C=Object(n.useState)(1),I=Object(b.a)(C,2),T=I[0],A=I[1],D=Object(n.useState)(""),R=Object(b.a)(D,2),Y=R[0],U=R[1],M=Object(n.useState)(""),P=Object(b.a)(M,2),F=P[0],z=P[1],L=Object(n.useState)(""),q=Object(b.a)(L,2),W=q[0],B=q[1],H=Object(n.useState)([]),G=Object(b.a)(H,2),K=G[0],V=G[1],X=Object(n.useState)([]),J=Object(b.a)(X,2),$=J[0],Z=J[1],Q=Object(n.useState)(!1),ee=Object(b.a)(Q,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,V(t.map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[te]),Object(n.useEffect)((function(){var e=Object(Ze.a)(K);K.length&&(W&&("User"===y?e=e.filter((function(e){return e.display_name.toLowerCase().includes(W.toLowerCase())})):"Email"===y&&(e=e.filter((function(e){return e.email.toLowerCase().includes(W.toLowerCase())})))),Y&&(e=e.filter((function(e){return e.role===Y}))),F&&(e=e.filter((function(e){return e.status===F})))),Z(e)}),[W,Y,K,F]);var ne=[5*(T-1),5*(T-1)+5];ne[1]>=$.length&&(ne[1]=ne[1]-(ne[1]-$.length));var ce=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r,c,o,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.length>0&&void 0!==l[0]&&l[0]&&U("All"===f?"":f),!(n=$.filter((function(e){return e.selected}))).length){e.next=15;break}if("Edit"!==u){e.next=9;break}t(n[0]),a(),e.next=15;break;case 9:return r={},"Delete"===u?r.status="Deleted":"Inactivate"===u?r.status="Inactive":"Block"===u?r.status="Blocked":"Activate"===u&&(r.status="Active"),e.next=13,ue(n.map((function(e){return e._id})),n.map((function(e){return s[e._id]._id})),r);case 13:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Users updated",message:"User were successfully updated",type:"success"}}),ae(!te),o=Object(E.a)({},s),n.forEach((function(e){o[e._id].status=r.status})),d.dispatch({type:"SET_PUBLICUSERS",publicUsers:o}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(a,n,t);case 2:(r=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Users updated",message:"User were successfully updated",type:"success"}}),ae(!te));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),oe=["Block","Inactivate","Activate","Delete"],ie=["Email","Role","Last login","Activity","Status"];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Users"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit and delete users")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return c()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"col-auto ".concat(F?"text-dark":"text-primary"),onClick:function(){return z("")}},"All (",K.length,")"),["Active","Inactive","Blocked"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{className:"col-auto cursor-pointer ".concat(F===e?"text-primary":"text-dark"),onClick:function(){return z(e)}},e," (",K.filter((function(t){return t.status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(oe[e])},items:oe,btnName:u||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return h(["All","Administrator","User"][e])},items:["All","Administrator","User"],btnName:f||"Select Role",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return ce(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return x(["User","Email"][e])},className:"input-light col-60",items:["User","Email"],btnName:"Search by ".concat(y)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:W,onChange:function(e){e.persist(),B(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{onSelect:function(e){return x(["User","Email"][e])},className:"table-input-prepend-select col-auto",items:["User","Email"],btnName:"Search by ".concat(y)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Xe.m,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:W,onChange:function(e){e.persist(),B(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ut.a,{style:{minWidth:"100%"},onSwipedLeft:function(){S(k+1<4?k+1:k)},onSwipedRight:function(){S(k-1>=0?k-1:k)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:$.slice(ne[0],ne[1]).filter((function(e){return e.selected})).length===ne[1]-ne[0],onChange:function(e){Z((function(t){for(var a=Object(Ze.a)(t),n=ne[0];n<ne[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Display Name"),r.a.createElement("div",{className:"d-block d-lg-none"},"Name")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},ie[k]),ie.map((function(e,t){return r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate",key:"column-".concat(t)},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,$.length?$.slice(5*(T-1),5*(T-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(Yt,{color:"primary",checked:e.selected,onChange:function(e){Z((function(t){var a=Object(Ze.a)(t);return a[5*(T-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(e.photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"text-primary mb-2 text-truncate",style:{maxWidth:"300px"}},e.display_name),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),a()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){se({status:"Blocked"},[e._id],[s[e._id]._id])}},"Block"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(l.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r=[e._id],c=[s[e._id]._id],j("/admin/users/deleteMultiple",{ids:r,pids:c});case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Users deleted",message:"User were successfully deleted",type:"success"}}),ae(!te),(n=Object(E.a)({},s))[e._id].status="Deleted",d.dispatch({type:"SET_PUBLICUSERS",publicUsers:n}));case 4:case"end":return t.stop()}var r,c}),t)})))},"Delete")))))),r.a.createElement("td",{className:"".concat(0===k?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,e.email)),r.a.createElement("td",{className:"".concat(1===k?"d-table-cell":"d-none d-xl-table-cell")},e.role),r.a.createElement("td",{className:"".concat(2===k?"d-table-cell":"d-none d-xl-table-cell")},e.last_login?Object(oa.format)(e.last_login):"No data"),r.a.createElement("td",{className:"".concat(3===k?"d-table-cell":"d-none d-xl-table-cell")},e.last_activity?Object(oa.format)(e.last_activity):"No data"),r.a.createElement("td",{className:"".concat("Active"===e.status?"text-green":"Inactive"===e.status?"text-orange":"text-danger"," ").concat(4===k?"d-table-cell":"d-none d-xl-table-cell")},e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil($.length/5),current:T,setCurrent:A})))))))}));var la=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers},t)}))((function(e){var t=e.getBack,a=e.publicUsers,c=Object(n.useState)({first_name:"",last_name:"",display_name:"",email:"",username:"",password:"",re_password:"",status:"Active",role:"User"}),s=Object(b.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(""),p=Object(b.a)(u,2),v=p[0],g=p[1],f=Object(n.useState)(!1),E=Object(b.a)(f,2),h=E[0],N=E[1],w=[{valid:o.email,error:"Email is required"},{valid:Ue(o.email),error:"Email is not valid"},{valid:o.password,error:"Password is required"},{valid:/[^\w\s]/.test(o.password)||/\d/.test(o.password),error:"Password must contain number or symbol"},{valid:o.password===o.re_password,error:"Passwords don't match"},{valid:o.password.length>=6,error:"Password must contain at least 6 characters"},{valid:!Object.values(a).map((function(e){return e.email})).includes(o.email),error:"This email address is taken"}],y=["Active","Inactive","Blocked"],x=["Administrator","User"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters border-bottom py-3 mb-5"},r.a.createElement("div",{className:"col-60 admin-screen-title"},"Add User"),r.a.createElement("div",{className:"col-60"},"Add brand new user")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"First name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:o.first_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{first_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Last name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:o.last_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{last_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.display_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{display_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"This name will be visible for everyone")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"*Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,value:o.email,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{email:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"*Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.password,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"*Confirm Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.re_password,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{re_password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-sm-20 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:y[e]})}))},items:y,btnName:o.status?o.status:"Select",className:"input-light px-3 col-60"}))),r.a.createElement("div",{className:"col-sm-20 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Role"),r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return m((function(t){return Object.assign({},t,{role:x[e]})}))},items:x,btnName:o.role?o.role:"Select",className:"input-light px-3 col-60"})))),r.a.createElement("div",{style:{height:"50px",opacity:v?1:0},className:"row no-gutters align-items-center text-danger"},v),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 col-sm-auto col-60 mb-3",onClick:function(){return t()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small col-sm-auto col-60 mb-3",onClick:Object(l.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=w.filter((function(e){return!e.valid}))).length){e.next=5;break}g(a[0].error),e.next=11;break;case 5:return N(!0),e.next=8,j("/admin/users/create",o);case 8:n=e.sent,N(!1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"User created",message:"User was successfully created",type:"success"}}),d.dispatch({type:"UPDATE_PUBLICUSERS",publicUser:Object($e.a)({},n.id,Object.assign({},o,{user_id:n.id,_id:n.pid}))}),t());case 11:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:h,size:20}),"Save"))))}));var ma=Object(p.b)((function(e,t){return Object(E.a)({no_display_name_characters:e.settings.no_display_name_characters},t)}))((function(e){var t=e.currentUser,a=e.getBack,c=e.no_display_name_characters,s=Object(n.useState)({first_name:"",last_name:"",display_name:"",email:"",username:"",password:"",re_password:"",status:"Active",role:"Administrator"}),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(""),v=Object(b.a)(p,2),g=v[0],f=v[1],h=Object(n.useState)(!1),N=Object(b.a)(h,2),w=N[0],y=N[1];Object(n.useEffect)((function(){t&&u(Object.assign({},t,{re_password:"",password:""}))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var x=[{valid:m.display_name.length<=c,error:"Display name is too long"},{valid:/[^\w\s]/.test(m.password)||/\d/.test(m.password),error:"Password must contain number or symbol"},{valid:m.password===m.re_password,error:"Passwords don't match"},{valid:m.password.length>=6,error:"Password must contain at least 6 characters"}],_=["Active","Inactive","Blocked"],O=["Administrator","User"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters border-bottom py-3 mb-5"},r.a.createElement("div",{className:"col-60 admin-screen-title"},"Edit User"),r.a.createElement("div",{className:"col-60"},"Edit existing user")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"First name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:m.first_name,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{first_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Last name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:m.last_name,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{last_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:m.display_name,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{display_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"This name will be visible for everyone")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,value:m.email,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{email:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:m.password,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Confirm Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:m.re_password,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{re_password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-sm-20 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return u((function(t){return Object.assign({},t,{status:_[e]})}))},items:_,btnName:m.status?m.status:"Select",className:"input-light px-3 col-60"}))),r.a.createElement("div",{className:"col-sm-20 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Role"),r.a.createElement(It,{popoverClass:"w-100",onSelect:function(e){return u((function(t){return Object.assign({},t,{role:O[e]})}))},items:O,btnName:m.role?m.role:"Select",className:"input-light px-3 col-60"})))),r.a.createElement("div",{style:{height:"50px",opacity:g?1:0},className:"row no-gutters align-items-center text-danger"},g),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 col-sm-auto col-60 mb-3",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small col-sm-auto col-60 mb-3",onClick:Object(l.a)(i.a.mark((function e(){var t,n,r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,n=Object(E.a)({},m),m.password&&(r=x.filter((function(e){return!e.valid}))).length&&(t=!1,f(r[0].error)),""===n.password&&(delete n.password,delete n.re_password),!t){e.next=11;break}return y(!0),e.next=8,j("/admin/users/edit",n);case 8:c=e.sent,y(!1),c.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"User updated",message:"User was successfully updated",type:"success"}}),(s=d.getState().publicUsers[m._id]).status=m.status,s.role=m.role,d.dispatch({type:"UPDATE_PUBLICUSERS",publicUser:s}),a());case 11:case"end":return e.stop()}}),e)})))},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:w,size:20}),"Save"))))})),ua=6,da=7,pa=8,va=9,ga=10,fa=11,Ea=12,ba=13,ha=14,Na=15;var wa=Object(p.b)((function(e,t){return Object(E.a)({dashboardMenuOpened:e.dashboardMenuOpened},t)}))((function(e){var t=e.dashboardMenuOpened,a=Object(n.useState)(0),c=Object(b.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(null),l=Object(b.a)(i,2),m=l[0],u=l[1],d=Object(n.useState)(null),p=Object(b.a)(d,2),v=p[0],g=p[1],f=Object(n.useState)(null),E=Object(b.a)(f,2),h=E[0],N=E[1],w=Object(n.useState)(null),y=Object(b.a)(w,2),x=y[0],_=y[1],O=Object(n.useState)(null),j=Object(b.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)(null),I=Object(b.a)(C,2),T=I[0],A=I[1];return r.a.createElement("div",{className:"row no-gutters justify-content-center",style:{minHeight:window.innerHeight}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters h-100 position-relative bg-light"},r.a.createElement(kt,{isMenuOpened:t,setSection:o,section:s}),r.a.createElement("div",{className:"col-auto d-none d-lg-block",style:{width:"300px"}},r.a.createElement(_t,{section:s,setSection:o})),r.a.createElement("div",{className:"col"},s>=6&&r.a.createElement("div",{className:"row no-gutters px-md-5 px-4 pt-4",style:{marginBottom:"-40px"}},r.a.createElement("div",{className:"col-auto cursor-pointer"},r.a.createElement(Xe.a,{fontSize:"24px",onClick:function(){return o(6===s||7===s?2:8===s||9===s?3:10===s||11===s?4:12===s||13===s?5:14===s||15===s?1:0)}}))),0===s?r.a.createElement(jt,null):1===s?r.a.createElement(ia,{setAddNewUserSection:function(){return o(Na)},setEditUser:function(e){return A(e)},setEditUserSection:function(){return o(ha)}}):2===s?r.a.createElement(Ft,{setEditReview:function(e){return u(e)},setEditReviewSection:function(){return o(ua)},setEditComment:function(e){return g(e)},setEditCommentSection:function(){return o(da)}}):3===s?r.a.createElement(qt,{setAddNewAnouncementSection:function(){return o(va)},setEditAnnouncement:function(e){return N(e)},setEditAnnouncementSection:function(){o(pa)}}):4===s?r.a.createElement(Xt,{setAddNewPromotionSection:function(){return o(fa)},setEditPromotion:function(e){return _(e)},setEditPromotionSection:function(){return o(ga)}}):5===s?r.a.createElement(Zt,{setAddNewNotificationSection:function(){return o(ba)},setEditNotification:function(e){return S(e)},setEditNotificationSection:function(){return o(Ea)}}):6===s?r.a.createElement(zt,{currentReview:m,getBack:function(){return o(2)}}):7===s?r.a.createElement(Lt,{currentComment:v,getBack:function(){return o(2)}}):8===s?r.a.createElement(Kt,{getBack:function(){return o(3)},currentAnnouncement:h}):9===s?r.a.createElement(Vt,{getBack:function(){return o(3)}}):10===s?r.a.createElement(Jt,{currentPromotion:x,getBack:function(){return o(4)}}):11===s?r.a.createElement($t,{getBack:function(){return o(4)}}):12===s?r.a.createElement(ca,{currentNotification:k,getBack:function(){return o(5)}}):13===s?r.a.createElement(sa,{getBack:function(){return o(5)}}):14===s?r.a.createElement(ma,{currentUser:T,getBack:function(){return o(1)}}):15===s?r.a.createElement(la,{getBack:function(){return o(1)}}):""))))})),ya=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:(a=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{type:"failure",title:"Error",message:a.error}}):(localStorage.setItem("movies_user_token",a.token),d.dispatch({type:"SET_USER",user:a}),f.push("/"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xa=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(b.a)(s,2),i=o[0],l=o[1];return r.a.createElement("div",{className:"row no-gutters justify-content-center aligm-items-start align-items-sm-center",style:{height:window.innerHeight}},r.a.createElement("div",{className:"col-xl-50 col-60 col-lg-50 col-md-30 col-sm-40 login-rounded overflow-hidden"},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col bg-dark d-lg-block d-none"},r.a.createElement("div",{className:"row no-gutters h-100 flex-center position-relative"},r.a.createElement("div",{className:"position-absolute d-flex align-items-center text-white cursor-pointer",onClick:function(){return f.push("/")},style:{top:"15px",left:"15px"}},r.a.createElement(Xe.f,{className:"mr-2"}),"Back to home"),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"square-150 mx-auto"},r.a.createElement(yt,null)),r.a.createElement("div",{className:"logo text-title-xl text-white"},"CozyPotato")))),r.a.createElement("div",{className:"col-60 col-lg-30 col-xl-25 col-md-auto p-sm-5 p-4 bg-light",style:{minHeight:window.innerHeight-100}},r.a.createElement("div",{className:"row no-gutters h-100 py-3"},r.a.createElement("div",{className:"col-60 d-flex align-items-start flex-wrap mb-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 h3 mb-3"},"Hello, welcome back"),r.a.createElement("div",{className:"col-60"},"Login to your account to review movies and interact with movies community"))),r.a.createElement("div",{className:"col-60 d-flex align-items-end flex-wrap"},r.a.createElement("div",{className:"row no-gutters w-100"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-center mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"input-light w-100 px-3",value:a,onChange:function(e){e.persist(),c(e.target.value)}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:i,onChange:function(e){e.persist(),l(e.target.value)},onKeyDown:function(e){13===e.keyCode&&ya({email:a,password:i})}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 btn-custom btn-custom-primary",onClick:function(){return ya({email:a,password:i})}},"Login")),r.a.createElement("div",{className:"row no-gutters justify-content-between",style:{fontSize:"14px"}},r.a.createElement("div",{className:"col-auto mr-4"},"Don't have an account?"," ",r.a.createElement("span",{className:"btn-link cursor-pointer",onClick:function(){return f.push("/signup")}},"Sign up")),r.a.createElement("div",{className:"col-auto btn-link cursor-pointer",onClick:function(){return f.push("/forgot-password")}},"Forgot password"))))))))))},_a=a(198),Oa=a(61),ja=a.n(Oa),ka=a(109),Sa=a.n(ka),Ca=a(110),Ia=a.n(Ca),Ta=a(111),Aa=a.n(Ta),Da=function(e){var t=e.type;return r.a.createElement("div",{className:"row no-gutters px-0"},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(ja.a,{fileType:"docx",filePath:"privacy-policy"===t?Ia.a:"cookies-policy"===t?Aa.a:"terms-and-conditions"===t?Sa.a:"",errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))};var Ra=Object(p.b)((function(e,t){return Object(E.a)({captcha_api_key:e.settings.captcha_api_key,no_display_name_characters:e.settings.no_display_name_characters},t)}))((function(e){var t=e.no_display_name_characters,a=e.captcha_api_key,c=Object(n.useState)(""),s=Object(b.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(""),p=Object(b.a)(u,2),v=p[0],g=p[1],E=Object(n.useState)(""),h=Object(b.a)(E,2),N=h[0],w=h[1],y=Object(n.useState)(!1),x=Object(b.a)(y,2),_=x[0],O=x[1],k=Object(n.useState)(!1),S=Object(b.a)(k,2),C=S[0],I=S[1],T=Object(n.useState)(""),A=Object(b.a)(T,2),D=A[0],R=A[1],Y=Object(n.useState)(""),U=Object(b.a)(Y,2),M=U[0],P=U[1],F=[{valid:Ue(o),error:"Email is not valid"},{valid:o.split("@")[0].length<t,error:"Email is too long"},{valid:/[^\w\s]/.test(v)||/\d/.test(v),error:"Password must contain number or symbol"},{valid:v===N,error:"Passwords don't match"},{valid:v.length>=6,error:"Password must contain at least 6 characters"},{valid:_,error:"Pass captcha validation"},{valid:C,error:"Check if you agree with privacy policy and terms and conditions"}],z=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=F.filter((function(e){return!e.valid}))).length){e.next=8;break}return e.next=4,j("/user/signup",{email:o,password:v});case 4:(a=e.sent).success?(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Account created!",message:"Login to start writing reviews and comments about your favorite movies",type:"success"}}),d.dispatch({type:"UPDATE_PUBLICUSERS",publicUser:Object($e.a)({},a.publicUser.user_id,a.publicUser)}),f.push("/login")):d.dispatch({type:"SET_NOTIFICATION",notification:{message:a.error,type:"failure",title:"Failed create account"}}),e.next=9;break;case 8:R(t[0].error);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters justify-content-center aligm-items-start align-items-sm-center py-sm-3",style:{minHeight:window.innerHeight}},r.a.createElement(Je,{open:M,onClose:function(){return P("")}},r.a.createElement(Da,{type:M})),r.a.createElement("div",{className:"col-xl-50 col-60 col-lg-50 col-md-30 col-sm-40 login-rounded overflow-hidden"},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col bg-dark d-lg-block d-none text-center"},r.a.createElement("div",{className:"row no-gutters h-100 flex-center position-relative"},r.a.createElement("div",{className:"position-absolute d-flex align-items-center text-white cursor-pointer",onClick:function(){return f.push("/")},style:{top:"15px",left:"15px"}},r.a.createElement(Xe.f,{className:"mr-2"}),"Back to home"),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"square-150 mx-auto"},r.a.createElement(yt,null)),r.a.createElement("div",{className:"logo text-title-xl text-white"},"CozyPotato")))),r.a.createElement("div",{className:"col-60 col-lg-30 col-xl-25 col-md-auto p-4 p-sm-5 bg-light",style:{minHeight:window.innerHeight-100}},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col-60 d-flex align-items-start flex-wrap"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 h3 mb-3"},"Create Account"))),r.a.createElement("div",{className:"col-60 d-flex align-items-end flex-wrap"},r.a.createElement("div",{className:"row no-gutters w-100"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-center mb-3"},r.a.createElement("div",{className:"col-60 mb-1"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"email",className:"input-light w-100 px-3",value:o,onChange:function(e){e.persist(),m(e.target.value)}}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 mb-1"},"Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:v,onChange:function(e){e.persist(),g(e.target.value)}})),r.a.createElement("div",{className:"col-60 text-muted font-size-14"},"Must be at least 6 characters and must contain number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 mb-1"},"Confirm Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:N,onKeyDown:function(e){13===e.keyCode&&z()},onChange:function(e){e.persist(),w(e.target.value)}})),r.a.createElement("div",{className:"col-60 text-muted font-size-14"},"Must be at least 6 characters and must contain number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(_a.a,{sitekey:a,onChange:function(e){e&&O(!0)}})),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(Yt,{color:"primary",checked:C,onChange:function(e){I(e.target.checked)}})),r.a.createElement("div",{className:"col"},"By registering you agree with"," ",r.a.createElement("span",{onClick:function(){return P("terms-and-conditions")},className:"btn-link"},"terms and conditions")," ","and"," ",r.a.createElement("span",{className:"btn-link",onClick:function(){return P("privacy-policy")}},"privacy policy"))),r.a.createElement("div",{style:{height:"40px",opacity:D?1:0},className:"row no-gutters align-items-center text-danger"},D),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 btn-custom btn-custom-primary",onClick:z},"Create Account")),r.a.createElement("div",{className:"row no-gutters justify-content-end",style:{fontSize:"14px"}},r.a.createElement("div",{className:"col-auto"},"Already have account?"," ",r.a.createElement("span",{className:"btn-link cursor-pointer",onClick:function(){return f.push("/login")}},"Login")))))))))))}));var Ya=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,notification:e.notification},t)}))((function(e){var t=e.notification,a=(e.publicUsers,Object(n.useState)(!1)),c=Object(b.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(!1),l=Object(b.a)(i,2),m=l[0],u=l[1];return Object(n.useEffect)((function(){var e;return t.expired||(e=setTimeout((function(){u(!0)}),5e3)),function(){!t.expired&&e&&clearTimeout(e)}}),[t]),Object(n.useEffect)((function(){m&&!s&&(d.dispatch({type:"UPDATE_NOTIFICATION",notification:{expired:!0}}),u(!1))}),[m,s]),Object(n.useEffect)((function(){if("success"!==t.type&&"object"===typeof t.message){var e={type:"System",subject:"System error occured",receivers:["All admins"],start_date:Date.now(),end_date:Date.now(),description:JSON.stringify(t.message).replace(/"/g,""),status:"Sent"};we(e)}}),[t.message]),r.a.createElement("div",{onMouseOver:function(){return o(!0)},onMouseLeave:function(){return o(!1)},className:"container-fluid toast-pro bg-over-root px-0",style:{maxWidth:"300px",bottom:t.expired?"-100%":"50px"}},r.a.createElement("div",{className:"row no-gutters p-3"},t.type&&r.a.createElement("div",{className:"col-auto pr-2"},"success"===t.type?r.a.createElement(Xe.d,{strokeWidth:"1px",fontSize:"24px",className:"text-success"}):r.a.createElement(Xe.i,{strokeWidth:"1px",fontSize:"24px",className:"text-primary"})),r.a.createElement("div",{className:"col pr-2 toast-title"},t.title),r.a.createElement("div",{className:"col-auto toast-close-icon",onClick:function(){return d.dispatch({type:"UPDATE_NOTIFICATION",notification:{expired:!0}})}},r.a.createElement(Xe.o,{fontSize:"24px",className:"text-white"}))),r.a.createElement("div",{className:"row no-gutters p-4 text-white"},"success"!==t.type&&"object"===typeof t.message?"Action failed":t.message))}));var Ua=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.movies,a=e.user,c=e.ratings,s=e.listType,o=void 0===s?"not wishlist":s,i=e.setMovie,l=e.setAddReviewOpen,m=e.owner,u=void 0!==m&&m,d=e.refreshProfile,p=void 0===d?function(){}:d,v=Object(n.useState)(1),g=Object(b.a)(v,2),E=g[0],h=g[1],N=Object(n.useState)(""),w=Object(b.a)(N,2),y=w[0],x=w[1],_=Object(n.useState)(!1),O=Object(b.a)(_,2),j=O[0],k=O[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,{open:j,onClose:function(){return k(!1)}},r.a.createElement(Ve,{movieId:y,onEnded:function(){return k(!1)}})),r.a.createElement("div",{className:"row"},t.slice(12*(E-1),12*(E-1)+12).map((function(e,t){var n=c[e.movie_id]?{id:e.movie_id,title:c[e.movie_id].movie_title,poster_path:c[e.movie_id].movie_poster,release_date:c[e.movie_id].movie_release_date,genres:c[e.movie_id].movie_genres}:{id:e.movie_id,title:"",poster_path:"",genres:[],release_date:""};return r.a.createElement("div",{key:"result-".concat(t),className:"col-lg-12 col-md-15 col-sm-20 col-60 p-3 text-white"},"watchedlist"!==o&&u?r.a.createElement("div",{className:"row no-gutters justify-content-end position-relative px-2 d-none d-sm-flex",style:{marginBottom:"-51px",zIndex:5,height:"44px",pointerEvents:"none"}},r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{movie:n,user:a}),"wishlist"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pl-1"}),r.a.createElement(Qe,{refreshProfile:function(){i(n),l(!0),p()},user:a,movieId:n.id})):"")):"",r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-60 col-auto mr-3 mr-sm-0"},r.a.createElement("div",{className:"row no-gutters mb-2 position-relative movies-list-image"},r.a.createElement("img",{alt:"poster of ".concat(n.id),width:"100%",style:{borderRadius:"13px"},src:n.poster_path?"https://image.tmdb.org/t/p/w342".concat(n.poster_path):"https://critics.io/img/movies/poster-placeholder.png"}),r.a.createElement("div",{onClick:function(){return f.push("/movie/".concat(n.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},r.a.createElement("div",{className:"square-50 rounded-circle d-flex flex-center play-btn",onClick:function(e){e.stopPropagation(),x(n.id),k(!0)}},r.a.createElement(Xe.l,{style:{fontSize:"30px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col-sm-60 col"},r.a.createElement("div",{className:"row no-gutters text-title-md mb-0 cursor-pointer",onClick:function(){return f.push("/movie/".concat(n.id))}},r.a.createElement("div",{className:"text-truncate"},n.title)),r.a.createElement("div",{className:"row no-gutters text-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},n.genres.length?n.genres.join("/"):"unknown")),r.a.createElement("div",{className:"row no-gutters mb-2 justify-content-end"},r.a.createElement(Me,{size:"small",selected:!!a.ratings[n.id]&&"excellent_rate"===a.ratings[n.id].rate_type,movie:n,emoji:"fire",className:"mr-1 mb-2",value:c[n.id]?c[n.id].excellent_rate:[]}),r.a.createElement(Me,{size:"small",selected:!!a.ratings[n.id]&&"good_rate"===a.ratings[n.id].rate_type,movie:n,emoji:"heart",className:"mr-1 mb-2",value:c[n.id]?c[n.id].good_rate:[]}),r.a.createElement(Me,{size:"small",selected:!!a.ratings[n.id]&&"ok_rate"===a.ratings[n.id].rate_type,movie:n,className:"mr-1 mb-2",emoji:"heavy_division_sign",value:c[n.id]?c[n.id].ok_rate:[]}),r.a.createElement(Me,{size:"small",emoji:"shit",value:c[n.id]?c[n.id].bad_rate:[],selected:!!a.ratings[n.id]&&"bad_rate"===a.ratings[n.id].rate_type,movie:n})),r.a.createElement("div",{className:"row no-gutters d-flex d-sm-none"},"watchedlist"!==o?r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{movie:n,user:a}),"wishlist"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pl-1"}),r.a.createElement(Qe,{refreshProfile:p,user:a,movieId:n.id})):""):""))))}))),r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(t.length/12),current:E,setCurrent:h}))))})),Ma=function(e){var t=e.movies,a=e.owner,c=e.refreshProfile,s=e.ratings,o=e.user,i=Object(n.useState)(0),l=Object(b.a)(i,2),m=l[0],u=l[1],d=function(e,t){var a=["All"];return e.forEach((function(e){t[e.movie_id]&&t[e.movie_id].movie_genres.forEach((function(e){e.name?a.includes(e.name)||a.push(e.name):a.includes(e)||a.push(e)}))})),a}(t,s),p=Object(n.useState)(!1),v=Object(b.a)(p,2),g=v[0],f=v[1],E=Object(n.useState)(!1),h=Object(b.a)(E,2),N=h[0],w=h[1];return r.a.createElement("div",{className:"col-60 px-0"},r.a.createElement(et,{movie:g,user:o,open:N,onClose:function(){w(!1),c()}}),r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},d.length>1?r.a.createElement(at.a,{style:{padding:"14px 0",width:"100%",overflowX:"auto",whiteSpace:"nowrap"}},d.map((function(e,t){return r.a.createElement("div",{onClick:function(){u(t)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(m===t?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},e)}))):"")),t.length?r.a.createElement(Ua,{setAddReviewOpen:w,setMovie:f,refreshProfile:c,owner:a,listType:"wishlist",movies:t.filter((function(e){return s[e.movie_id]&&s[e.movie_id].movie_genres.includes(d[m])||"All"===d[m]}))}):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5 text-white",style:{height:"150px"}},"You have not added any movies/series to your wishlist."))},Pa=function(e){var t=e.movies,a=e.ratings,c=Object(n.useState)(0),s=Object(b.a)(c,2),o=s[0],i=s[1],l=function(e,t){var a=["All"];return e.forEach((function(e){t[e.movie_id]&&t[e.movie_id].movie_genres.forEach((function(e){e.name?a.includes(e.name)||a.push(e.name):a.includes(e)||a.push(e)}))})),a}(t,a);return r.a.createElement("div",{className:"col-60 px-0"},r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},l.length>1?r.a.createElement(at.a,{style:{padding:"14px 0",maxWidth:"100%",overflowX:"auto",whiteSpace:"nowrap"}},l.map((function(e,t){return r.a.createElement("div",{onClick:function(){i(t)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(o===t?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},e)}))):"")),t.length?r.a.createElement(Ua,{listType:"watchedlist",movies:t.filter((function(e){return a[e.movie_id]&&a[e.movie_id].movie_genres.includes(l[o])||"All"===l[o]}))}):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5 text-white",style:{height:"150px"}},"You have not watched any movies/series yet. Please go to your wishlist any mark titles as watched."))};var Fa=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.reviews,a=e.publicUsers,c=e.ratings,s=e.owner,o=e.user,m=e.refreshReviews,u=Object(n.useState)({}),p=Object(b.a)(u,2),v=p[0],g=p[1],w=Object(n.useState)(!1),y=Object(b.a)(w,2),x=y[0],O=y[1],j=Object(n.useState)(!1),k=Object(b.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)(!1),T=Object(b.a)(I,2),A=T[0],D=T[1],Y=Object(n.useState)(-1),U=Object(b.a)(Y,2),M=U[0],P=U[1],F=Object(n.useState)(-1),L=Object(b.a)(F,2),q=L[0],W=L[1],B=Object(n.useState)(-1),H=Object(b.a)(B,2),G=H[0],K=H[1],V=Object(n.useState)(1),X=Object(b.a)(V,2),J=X[0],$=X[1],Z=Object(n.useRef)(null);Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===M){e.next=5;break}return e.next=3,z(M);case 3:t=e.sent,g((function(e){return Object.assign({},e,Object($e.a)({},M,t))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[M]);var Q=-1===G?1:G;return r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement(et,{userIsOwner:!0,open:x,onClose:function(){return O(!1)},movie:S,review:A,user:o,refreshReviews:m}),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-2",ref:Z}),t.length?t.slice(8*(Q-1),8*(Q-1)+8).map((function(e,t){return c[e.movie_id]?r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(t)},r.a.createElement("div",{key:"review-".concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,onClick:function(){return f.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4),")")))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2 col-auto"},"Posted review on"),r.a.createElement("span",{className:"text-muted col-auto mr-2"},ot.a.format(new Date(e.date),"MMM DD, YYYY")),s?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Edit review")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C({release_date:c[e.movie_id].movie_release_date,title:c[e.movie_id].movie_title,id:c[e.movie_id].tmdb_id}),D(e),O(!0);case 3:case"end":return t.stop()}}),t)})))},r.a.createElement(Xe.k,{fontSize:"24px"}))),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Delete review")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){var a,n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,W(e._id),t.next=4,R(e);case 4:a=t.sent,W(-1),a.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't delete comment",type:"failure",message:a.error}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Success",type:"success",message:"Comment successfully deleted"}}),n=c[e.movie_id],-1!==(r=n[e.rating].findIndex((function(t){return t===e.author})))&&n[e.rating].splice(r,1),d.dispatch({type:"UPDATE_RATINGS",rating:Object($e.a)({},e.movie_id,n)}),delete(s=Object(E.a)({},o.ratings))[e.movie_id],d.dispatch({type:"UPDATE_USER",userProperty:{ratings:s}}),m()),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))},q===e._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(Xe.n,{fontSize:"24px"})))):""))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 flex-grow-0 font-weigt-300 text-break"},e.review),r.a.createElement("div",{className:"row no-gutters align-items-center"},e.rating?"ok_rate"===e.rating?r.a.createElement(N,{size:24}):r.a.createElement(h.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy_division_sign":"shit",set:"facebook",size:24}):""),r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(_.j,{fontSize:"24px",className:"text-green"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(_.b,{onClick:function(){P(M===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"}))))))))),r.a.createElement(it.a,{in:M===e._id,className:"mb-3"},r.a.createElement("div",{className:"ml-4 py-2 text-light"},"Comments (",v[e._id]?v[e._id].length:0,")"),v[e._id]?v[e._id].slice(J*(J-1),J*(J-1)+5).map((function(e,t){return r.a.createElement("div",{key:"comment-".concat(M,"-").concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded ml-4 mb-2"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters align-items-center mb-2"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 h6 text-white mb-0"},a[e.author]?a[e.author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},ot.a.format(new Date(e.date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},e.comment),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(_.j,{fontSize:"24px",className:"text-green cursor-pointer"})))))))})):"",r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(lt,{count:Math.ceil(v[e._id]?v[e._id].length/5:1),current:J,setCurrent:$,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}}))))):""})):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5",style:{height:"150px"}},"You have not reviewed any movies/series. Your review will help your friends and family pick the right movie or series to watch."),r.a.createElement("div",{className:"row no-gutters justify-content-sm-end justify-content-center mt-2"},r.a.createElement("div",{className:"col-auto mb-4 mr-sm-2 mr-md-0"},r.a.createElement(lt,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(t.length/8),current:Q,setCurrent:K})))))}));var za=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.comments,a=e.publicUsers,c=e.ratings,s=e.owner,o=e.user,m=e.refreshComments,u=Object(n.useState)(-1),p=Object(b.a)(u,2),v=p[0],g=p[1],E=Object(n.useRef)(null),h=Object(n.useState)(!1),N=Object(b.a)(h,2),w=N[0],y=N[1],x=Object(n.useState)(!1),O=Object(b.a)(x,2),j=O[0],k=O[1],S=Object(n.useState)(!1),C=Object(b.a)(S,2),I=C[0],T=C[1],A=Object(n.useState)(-1),D=Object(b.a)(A,2),R=D[0],Y=D[1],U=-1===v?1:v;return r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement(gt,{comment:I,refreshComments:m,setComments:function(){},movie:w,open:j,onClose:function(){return k(!1)},user:o}),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-2",ref:E}),t.length?t.slice(8*(U-1),8*(U-1)+8).map((function(e,t){return r.a.createElement("div",{key:"comment-".concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,onClick:function(){return f.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 h6 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2 col-auto"},"Commented on"),r.a.createElement("span",{className:"text-muted col-auto mr-2"},ot.a.format(new Date(e.date),"MMM DD, YYYY")),s?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Edit comment")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y({release_date:c[e.movie_id].movie_release_date,title:c[e.movie_id].movie_title,id:c[e.movie_id].tmdb_id}),T(e),k(!0);case 3:case"end":return t.stop()}}),t)})))},r.a.createElement(Xe.k,{fontSize:"24px"}))),r.a.createElement(Ie,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Delete comment")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y(e._id),t.next=3,F(e._id);case 3:a=t.sent,Y(-1),a.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't delete comment",type:"failure",message:a.error}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Success",type:"success",message:"Comment successfully deleted"}}),m());case 6:case"end":return t.stop()}}),t)})))},R===e._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(Te,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(Xe.n,{fontSize:"24px"})))):""))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 flex-grow-0 font-weight-300"},e.comment),r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(_.j,{fontSize:"24px",className:"text-green"})))))))))})):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5",style:{height:"150px"}},"You have not commented on any comments. We encourage you to share your opinion on your friends and family comments."),r.a.createElement("div",{className:"row no-gutters justify-content-sm-end justify-content-center mt-2"},r.a.createElement("div",{className:"col-auto mb-4 mr-sm-2 mr-md-0"},r.a.createElement(lt,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(t.length/8),current:U,setCurrent:g})))))})),La=a(141),qa=function(e){var t=e.user,a=e.refreshProfile,c=e.editProfileOpen,s=e.onClose,o=e.userId,m=Object(n.useState)({first_name:"",last_name:"",display_name:"",photo:"",password:"",confirm_assword:"",_id:"",token:""}),u=Object(b.a)(m,2),p=u[0],v=u[1],g=Object(n.useState)(""),f=Object(b.a)(g,2),E=f[0],h=f[1],N=Object(n.useRef)(null);Object(n.useEffect)((function(){t.photo&&v((function(e){return Object.assign({},e,{first_name:t.first_name,last_name:t.last_name,display_name:t.display_name,email:t.email,photo:t.photo,token:t.token})}))}),[t.first_name]);var w=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],n={maxSizeMB:1,maxWidthOrHeight:100,useWebWorker:!0},e.prev=2,e.next=5,Object(La.a)(a,n);case 5:return r=e.sent,e.next=8,La.a.getDataUrlFromFile(r);case 8:c=e.sent,v((function(e){return Object.assign({},e,{photo:c})})),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),y=[{valid:/[^\w\s]/.test(p.password)||/\d/.test(p.password),error:"Password must contain number or symbol"},{valid:p.password===p.confirm_assword,error:"Passwords don't match"},{valid:p.password.length>=6,error:"Password must contain at least 6 characters"}];return r.a.createElement(Je,{open:c,onClose:s},r.a.createElement("div",{className:"col-xl-30 col-lg-40 col-md-50 col-58 bg-over-root-lighter rounded p-sm-5 p-4"},r.a.createElement("div",{className:"row no-gutters mb-3 text-title-lg"},"Update profile"),r.a.createElement("div",{className:"row no-gutters justify-content-center mb-5"},r.a.createElement("div",{className:"col-auto text-center"},r.a.createElement("div",{className:"row no-gutters justify-content-center"},r.a.createElement("div",{className:"square-100 bg-image rounded-circle d-flex align-items-end overflow-hidden mb-2",style:{backgroundImage:"url(".concat(p.photo,")")}},r.a.createElement("input",{spellCheck:!1,onChange:w,type:"file",className:"d-none",ref:N}))),r.a.createElement("div",{className:"btn-custom btn-custom-primary px-4",onClick:function(){return N.current.click()}},"Upload photo"))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-30 pr-2"},r.a.createElement("div",{className:"row no-gutters text-light"},"First Name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,type:"text",className:"input-light px-3 w-100",value:p.first_name,onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{first_name:e.target.value})}))}}))),r.a.createElement("div",{className:"col-30"},r.a.createElement("div",{className:"row no-gutters text-light"},"Last Name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,type:"text",className:"input-light px-3 w-100",value:p.last_name,onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{last_name:e.target.value})}))}})))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{disabled:!0,spellCheck:!1,type:"text",className:"input-light-disabled px-3 w-100 user-select-none",value:p.email}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Display Name"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,type:"text",className:"input-light px-3 w-100",value:p.display_name,onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{display_name:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"password",spellCheck:!1,className:"input-light px-3 w-100",value:p.password,onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{password:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Confirm Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,type:"password",className:"input-light px-3 w-100",value:p.confirm_assword,onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{confirm_assword:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters align-items-center text-danger justify-content-end",style:{height:"50px",opacity:E?1:0}},E),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-auto btn-custom btn-custom-secondary btn-small mr-sm-2 mb-2 col-60",onClick:s},"Cancel"),r.a.createElement("div",{className:"col-sm-auto col-60 btn-custom btn-custom-primary btn-small",onClick:Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=y.filter((function(e){return!e.valid}))).length||!p.password){e.next=5;break}h(t[0].error),e.next=11;break;case 5:return n={},Object.keys(p).forEach((function(e){p[e]&&(n[e]=p[e])})),e.next=9,$(n);case 9:(r=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Profile updates",message:"You successfully updated your profile",type:"success"}}),d.dispatch({type:"UPDATE_PUBLICUSERS",publicUser:Object($e.a)({},o,r.updatedPublicUser)}),d.dispatch({type:"UPDATE_USER",userProperty:r.updatedUser}),a(),s(),localStorage.movies_user_token=r.newToken);case 11:case"end":return e.stop()}}),e)})))},"Save"))))};var Wa=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,ratings:e.ratings,publicUsers:e.publicUsers},t)}))((function(e){var t=e.user,a=e.match.params.userId,c=e.publicUsers,s=e.ratings,o=e.match.params.section,m=Object(n.useState)({wishlist:[],comments:[],watchedlist:[],reviews:[],first_name:"",last_name:""}),u=Object(b.a)(m,2),d=u[0],p=u[1],v=Object(n.useState)(!1),g=Object(b.a)(v,2),f=g[0],E=g[1],h=Object(n.useState)(!1),N=Object(b.a)(h,2),w=N[0],y=N[1],x=Object(n.useState)([]),_=Object(b.a)(x,2),O=_[0],j=_[1],k=Object(n.useState)([]),S=Object(b.a)(k,2),C=S[0],I=S[1],T=Object(n.useRef)(!1),A=Object(n.useRef)(!1),D=Object(n.useState)(0),R=Object(b.a)(D,2),Y=R[0],U=R[1],M=Object(n.useState)(!1),P=Object(b.a)(M,2),F=P[0],z=P[1],L=Object(n.useState)(!1),q=Object(b.a)(L,2),W=q[0],B=q[1];return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,K(a);case 3:(t=e.sent).error||p(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,W,t.wishlist.length]),Object(n.useEffect)((function(){void 0!==o&&U(+o)}),[o]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==Y||T.current||!d.reviews.length){e.next=8;break}return T.current=!0,e.next=4,V(d.reviews);case 4:(t=e.sent).error||j(t.reverse()),e.next=14;break;case 8:if(3!==Y||A.current){e.next=14;break}return A.current=!0,e.next=12,J(d.comments);case 12:(a=e.sent).error||I(a.reverse());case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Y,d.reviews.length]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.current){e.next=6;break}return y(!w),e.next=4,V(d.reviews);case 4:(t=e.sent).error||j(t.reverse());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.current){e.next=6;break}return B(!W),e.next=4,J(d.comments);case 4:(t=e.sent).error||I(t.reverse());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w]),r.a.createElement("div",{className:"row no-gutters",style:{minHeight:"800px"}},r.a.createElement(qa,{userId:a,refreshProfile:function(){return B(!W)},editProfileOpen:F,user:t,onClose:function(){return z(!1)}}),r.a.createElement("div",{className:"col-60 content-container mx-auto p-sm-5 p-4"},r.a.createElement("div",{className:"row no-gutters justify-content-xl-between justify-content-center text-white bg-over-root-lighter p-sm-5 p-4 rounded mb-2"},r.a.createElement("div",{className:"col-auto mb-4 mr-lg-5"},r.a.createElement("div",{className:"row no-gutters justify-content-xl-start justify-content-center"},r.a.createElement("div",{className:"col-auto bg-image square-100 rounded-circle mr-md-4",style:{backgroundImage:"url(".concat(c[a]?c[a].photo:"",")")}}),r.a.createElement("div",{className:"col-60 col-md-auto"},d.first_name||d.last_name?r.a.createElement("div",{className:"row no-gutters text-title-lg justify-content-md-start justify-content-center"},r.a.createElement("div",{className:"col-auto mr-2"},d.first_name?d.first_name:""),r.a.createElement("div",{className:"col-auto"},d.last_name?d.last_name:"")):r.a.createElement("div",{className:"row no-gutters h5 justify-content-md-start justify-content-center"},"Full name is empty"),r.a.createElement("div",{className:"row no-gutters justify-content-md-start justify-content-center text-title-md mb-2"},r.a.createElement("div",{className:"text-truncate",style:{maxWidth:"150px"}},"@",c[a]?c[a].display_name:"")),t._id===a?r.a.createElement("div",{className:"row no-gutters justify-content-md-start justify-content-center"},r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-small",onClick:function(){return z(!0)}},"Edit Profile")):""))),r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-center h-100 align-items-center"},r.a.createElement("div",{className:"col-sm-auto col mr-sm-4"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Wishlist"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end"},d.wishlist.length)),r.a.createElement("div",{className:"col-sm-auto col mr-sm-4 mr-0"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Watched"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end"},d.watchedlist.length)),r.a.createElement("div",{className:"col-sm-auto col mr-sm-4 mr-0"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Reviews"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end profile-stats-title"},d.reviews.length)),r.a.createElement("div",{className:"col-sm-auto col"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Comments"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end"},d.comments.length))))),r.a.createElement("div",{className:"bg-over-root-lighter row no-gutters rounded w-100 justify-content-between text-white"},r.a.createElement("div",{className:"col-60"},r.a.createElement(at.a,{style:{maxWidth:"100%",overflowX:"auto",whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",style:{borderTop:"3px solid transparent",borderBottom:0===Y?"3px solid rgb(255, 0, 64)":"3px solid transparent"},onClick:function(){return U(0)}},"Wishlist"),r.a.createElement("div",{style:{borderTop:"3px solid transparent",borderBottom:1===Y?"3px solid rgb(255, 0, 64)":"3px solid transparent"},className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",onClick:function(){return U(1)}},"Watched"),r.a.createElement("div",{style:{borderTop:"3px solid transparent",borderBottom:2===Y?"3px solid rgb(255, 0, 64)":"3px solid transparent"},className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",onClick:function(){return U(2)}},"Reviews"),r.a.createElement("div",{style:{borderTop:"3px solid transparent",borderBottom:3===Y?"3px solid rgb(255, 0, 64)":"3px solid transparent"},className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",onClick:function(){return U(3)}},"Comments")))),0===Y?r.a.createElement(Ma,{ratings:s,refreshProfile:function(){return B(!W)},movies:d.wishlist,owner:t._id===d._id,user:t}):1===Y?r.a.createElement(Pa,{ratings:s,movies:d.watchedlist}):2===Y?r.a.createElement(Fa,{refreshReviews:function(){return E(!f)},user:t,ratings:s,reviews:O,owner:t._id===d._id}):3===Y?r.a.createElement(za,{refreshComments:function(){return y(!w)},user:t,ratings:s,comments:C,owner:t._id===d._id}):""))})),Ba=function(e){var t=e.Component,a=e.bearerPath,c=(e.user,Object(Se.a)(e,["Component","bearerPath","user"])),s=c.computedMatch.url,o=Object(n.useState)({ready:!1,valid:!1}),m=Object(b.a)(o,2),u=m[0],p=m[1];return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=localStorage.getItem("movies_user_token"))&&t.length){e.next=5;break}p((function(e){return Object.assign({},e,{ready:!0})})),e.next=9;break;case 5:return e.next=7,C({token:t});case 7:(a=e.sent).error?(f.push("/"),d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Your role is not admin",message:"Only website admins can access this page",type:"failure"}})):"Administrator"===a.role?p((function(e){return Object.assign({},e,{ready:!0,valid:!0})})):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Your role is not admin",message:"Contact website administrator to change your role",type:"failure"}}),f.push("/"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),u.ready?r.a.createElement(v.b,Object.assign({},c,{render:function(e){return u.valid?r.a.createElement(t,e):r.a.createElement(v.a,{to:{pathname:a,state:{successPath:s}}})}})):r.a.createElement("div",null)},Ha=a(195),Ga=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1],s=!1,o=localStorage.getItem("closed_movies_announcements");o=o?JSON.parse(o):[];var m,u=Object(Ha.a)(a);try{for(u.s();!(m=u.n()).done;){var d=m.value;if(!o.includes(d.description)){s=d;break}}}catch(E){u.e(E)}finally{u.f()}var p=Object(n.useState)(!1),v=Object(b.a)(p,2),g=v[0],f=v[1];return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:(t=e.sent).error||t.length&&c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),s&&s.description&&!g?r.a.createElement("div",{className:"row p-2 position-relative no-gutters justify-content-center ".concat("Warning"===s.type?"bg-warning":"Information"===s.type?"bg-primary":"Error"===s.type?"bg-danger":"")},r.a.createElement("div",{onClick:function(){f(!0),o.push(s.description),localStorage.setItem("closed_movies_announcements",JSON.stringify(o))},className:"square-20 rounded-circle d-flex flex-center bg-white cursor-pointer scale-transition position-absolute",style:{right:"10px",top:0,bottom:0,margin:"auto",zIndex:5}},r.a.createElement(Xe.o,{className:"text-dark"})),r.a.createElement("div",{className:"col-60 content-container text-white"},r.a.createElement("div",{className:"row no-gutters justify-content-center"},r.a.createElement("div",{className:"col-auto mr-2 d-none d-md-block",style:{width:"30px"}}),r.a.createElement("div",{className:"col mr-2 pl-2 pl-md-0"},r.a.createElement("div",{className:"row no-gutters justify-content-center"},s.description)),r.a.createElement("div",{className:"col-auto",style:{width:"30px"}})))):""};var Ka=function(e){return n.createElement("div",{className:"square-35 position-relative cursor-pointer"},n.createElement("div",{className:"position-absolute text-white",style:{top:"0px",right:"5px",fontSize:"10px"}},e.count?e.count:0),n.createElement("svg",Object.assign({viewBox:"-11 0 512 512",width:"100%"},e),n.createElement("path",{d:"M298.668 426.668c0 47.129-38.207 85.332-85.336 85.332S128 473.797 128 426.668c0-47.129 38.203-85.336 85.332-85.336 47.129 0 85.336 38.207 85.336 85.336zm0 0",fill:"#ffa000"}),n.createElement("path",{d:"M362.836 254.316c-72.32-10.328-128.168-72.515-128.168-147.648 0-21.336 4.562-41.578 12.648-59.95-10.921-2.558-22.27-4.05-33.984-4.05C130.988 42.668 64 109.652 64 192v59.477c0 42.218-18.496 82.07-50.945 109.503A37.235 37.235 0 000 389.332c0 20.59 16.746 37.336 37.332 37.336h352c20.59 0 37.336-16.746 37.336-37.336 0-10.922-4.758-21.27-13.27-28.543-31.488-26.644-49.75-65.324-50.562-106.473zm0 0",fill:"#ffc107"}),n.createElement("path",{d:"M490.668 106.668c0 58.91-47.758 106.664-106.668 106.664s-106.668-47.754-106.668-106.664C277.332 47.758 325.09 0 384 0s106.668 47.758 106.668 106.668zm0 0",fill:"#f44336"})))},Va=a(364);var Xa=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.movies,a=e.onClick;return r.a.createElement("div",{className:"row"},t.map((function(e,t){return r.a.createElement("div",{key:"result-".concat(t),className:"p-2 movie-card-minified",style:{flexBasis:"300px",flexGrow:1},onClick:function(){f.push("/movie/".concat(e.name?"serie-".concat(e.id):e.id)),a()}},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-3"},r.a.createElement("div",{className:"row no-gutters mb-2 position-relative"},r.a.createElement("div",{className:"square-70 bg-image rounded",style:{backgroundImage:"url(".concat(e.poster_path?"https://image.tmdb.org/t/p/w342".concat(e.poster_path):"https://critics.io/img/movies/poster-placeholder.png",")")}}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters mb-0 cursor-pointer",onClick:function(){return f.push("/movie/".concat(e.id))}},r.a.createElement("div",{className:"text-truncate"},e.title?e.title:e.name)),r.a.createElement("div",{className:"row no-gutters text-muted mb-2"},r.a.createElement("div",{className:"text-truncate",style:{maxWidth:"100%"}},e.genre_ids.length?e.genre_ids.map((function(e){var t=w.find((function(t){return t.id===e})),a=y.find((function(t){return t.id===e}));return t?t.name:a?a.name:"unkonwn"})).join("/"):"unknown")))))})))}));var Ja=Object(p.b)((function(e,t){return Object(E.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.reviews,a=e.publicUsers,c=e.ratings,s=Object(n.useState)(-1),o=Object(b.a)(s,2),i=o[0],l=o[1];return t.slice(0,8).map((function(e,t){return r.a.createElement("div",{onClick:function(){return f.push("/movie/".concat(e.movie_id))},key:"review-".concat(t),className:"row no-gutters p-2 border-bottom rounded mb-2 text-dark movie-card-minified"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"100px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters h6 mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4)),r.a.createElement("div",{className:"row no-gutters text-muted"},r.a.createElement("div",{className:"text-truncate"},e.movie_genres))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("span",{className:"mr-2"},"Posted review on"),r.a.createElement("span",{className:"text-muted"},ot.a.format(new Date(e.date),"MMM DD, YYYY"))))))),r.a.createElement("div",{className:"row no-gutters mb-3 font-size-14 flex-grow-0"},e.review),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},e.rating?r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(h.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy-division-sign":"shit",set:"facebook",size:24})):"")),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(_.j,{fontSize:"24px",className:"text-green"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto"},r.a.createElement(_.b,{onClick:function(){l(i===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})))))))))}))}));var $a=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,search:e.search,settings:e.settings},t)}))((function(e){var t=["All","Movies","Series","Reviews"],a=e.search.category,c=e.settings,s=Object(n.useState)(""),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)([]),v=Object(b.a)(p,2),g=v[0],E=v[1],h=Object(n.useState)([]),N=Object(b.a)(h,2),w=N[0],y=N[1],x=Object(n.useState)([]),_=Object(b.a)(x,2),O=_[0],j=_[1],k=Object(n.useState)(!1),S=Object(b.a)(k,2),C=S[0],I=S[1],T=Object(n.useRef)(!1),A=function(){d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:"You need to provide valid api key in admin dashboard",type:"failure"}})};return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=29;break}if(I(!0),T.current=!1,"Reviews"!==a&&"All"!==a){e.next=10;break}return e.next=6,te(m);case 6:(t=e.sent).error||T.current||E(t.slice(0,5)),e.next=11;break;case 10:E([]);case 11:if("Movies"!==a&&"All"!==a){e.next=18;break}return e.next=14,Ge(m,c.movies_api_key);case 14:(n=e.sent).results?T.current||y(n.results.slice(0,10)):A(),e.next=19;break;case 18:y([]);case 19:if("Series"!==a&&"All"!==a){e.next=26;break}return e.next=22,Ke(m,c.movies_api_key);case 22:(r=e.sent).results?T.current||j(r.results.slice(0,10)):A(),e.next=27;break;case 26:j([]);case 27:e.next=34;break;case 29:T.current=!0,I(!1),y([]),j([]),E([]);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[m,a]),r.a.createElement("div",{className:"row no-gutters w-100"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(It,{popoverClass:"col-auto",items:t,onSelect:function(e){return d.dispatch({type:"UPDATE_SEARCH",search:{category:t[e]}})},popoverWidth:"150px",className:"col-auto input-prepend-select",btnName:a}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement("input",{onBlur:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:I(!1);case 3:case"end":return e.stop()}}),e)}))),onFocus:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I(!0));case 1:case"end":return e.stop()}}),e)}))),value:m,onKeyUp:function(e){13===e.keyCode&&(u(""),d.dispatch({type:"UPDATE_SEARCH",search:{query:m}}),f.push("/search"))},onChange:function(e){e.persist(),u(e.target.value)},type:"text",spellCheck:!1,className:"w-100 input"}),r.a.createElement(Xe.m,{onClick:function(){return f.push("/search")},fontSize:"24px",className:"position-absolute text-white cursor-pointer",style:{top:0,bottom:0,right:"20px",margin:"auto"}}))),r.a.createElement("div",{className:"row no-gutters position-absolute px-3 bg-white w-100 overflow-auto",style:{top:"50px",left:0,maxHeight:"500px"}},r.a.createElement("div",{className:"col-60"},C?r.a.createElement(r.a.Fragment,null,w.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters pt-3 pb-1 font-weight-bold"},"Movies (",w.length,")"),r.a.createElement(Xa,{onClick:function(){return u("")},movies:w})):"",O.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters pt-3 pb-1 font-weight-bold"},"Series (",O.length,")"),r.a.createElement(Xa,{movies:O,onClick:function(){return u("")}})):"",g.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters pt-3 pb-1 font-weight-bold"},"Reviews (",g.length,")"),r.a.createElement(Ja,{reviews:g,onClick:function(){return u("")}})):""):""),r.a.createElement("div",{className:"col-60"}))))}));var Za=Object(Va.a)(Object(p.b)((function(e,t){return Object(E.a)({user:e.user,search:e.search,dashboardMenuOpened:e.dashboardMenuOpened},t)}))((function(e){var t=e.user,a=e.dashboardMenuOpened,c=e.height,s=Object(n.useState)(!0),o=Object(b.a)(s,2),m=o[0],u=o[1],p=Object(n.useRef)(100),g=Object(n.useState)("up"),E=Object(b.a)(g,2),h=E[0],N=E[1],w=Object(n.useState)([]),y=Object(b.a)(w,2),x=y[0],O=y[1],k=Object(n.useRef)(null),S=Object(v.e)();return Object(n.useEffect)((function(){function e(){var e=window.scrollY;p.current<e?N("down"):N("up"),p.current=e,u(0===e)}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.notifications){e.next=5;break}return e.next=3,he(t.notifications);case 3:(a=e.sent).error||O(a.map((function(e){return Object.assign({},e,{seen:!1})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(n.useEffect)((function(){c&&d.dispatch({type:"SET_HEIGHT",height:c})}),[c]),"/login"===S.pathname||"/signup"===S.pathname||"/forgot-password"===S.pathname||S.pathname.includes("/reset-password")?r.a.createElement("div",null):r.a.createElement("div",{className:"col-60 px-0",style:{position:"sticky",zIndex:59,transition:"top 0.5s",top:"up"===h?"0px":"-".concat(c,"px"),left:0,right:0}},r.a.createElement(Ga,null),r.a.createElement("div",{className:"bg-transition row no-gutters justify-content-center".concat(m?"":" bg-root")},r.a.createElement("div",{className:"col-60".concat("/admin"!==S.pathname?" content-container":"")},r.a.createElement("div",{className:"row no-gutters justify-content-between px-3 py-2 align-items-center flex-nowrap"},r.a.createElement("div",{className:"col-auto d-none d-sm-block pr-sm-5 pr-3 text-white pl-sm-3 pl-2"},r.a.createElement("div",{className:"row no-gutters align-items-end cursor-pointer",onClick:function(){return f.push("/")}},r.a.createElement("div",{className:"square-50 mr-2"},r.a.createElement(yt,null)),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters h4 logo"},"CozyPotato"),r.a.createElement("div",{className:"row no-gutters justify-content-end text-light",style:{fontSize:"13px",marginTop:"-14px"}},"Community")))),r.a.createElement("div",{className:"d-block d-sm-none cursor-pointer",onClick:function(){return f.push("/")}},r.a.createElement("div",{className:"square-40 mx-auto"},r.a.createElement(yt,null)),r.a.createElement("div",{className:"col-auto text-white"},r.a.createElement("div",{className:"row no-gutters logo h5"},"CozyPotato"),r.a.createElement("div",{className:"row no-gutters justify-content-end text-light",style:{fontSize:"10px",marginTop:"-10px"}},"Community"))),r.a.createElement("div",{className:"col pr-3 d-none d-md-block"},r.a.createElement($a,{navbarHeight:c})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},t.display_name?r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Ie,{content:function(e){return r.a.createElement("div",{className:"container-fluid rounded px-0 overflow-auto",style:{maxWidth:"400px",width:"100%",maxHeight:"450px"}},x.length?x.map((function(e,a){return r.a.createElement("div",{key:"notificaiton-".concat(a),className:"row no-gutters p-3".concat(a!==x.length-1?" border-bottom":"")},r.a.createElement("div",{className:"col-60 text-left mb-1 font-weight-bold"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col mr-3"},e.subject),r.a.createElement("div",{className:"col-auto text-left text-primary-custom"},r.a.createElement("small",null,ot.a.format(new Date(e.start_date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"col-60 text-left font-size-13"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col mr-3 text-break"},e.description),r.a.createElement("div",{className:"col-auto"},r.a.createElement(Xe.p,{onClick:Object(l.a)(i.a.mark((function a(){var n,r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c=e._id,s=t._id,j("/user/notifications/delete",{id:c,userId:s});case 2:a.sent.error||(n=d.getState().user.notifications,-1!==(r=n.findIndex((function(t){return t===e._id})))&&n.splice(r,1),d.dispatch({type:"UPDATE_USER",userProperty:{notifications:n}}));case 4:case"end":return a.stop()}var c,s}),a)}))),fontSize:"26px",className:"cursor-pointer notification-close-icon"})))))})):r.a.createElement("div",{className:"row no-gutters flex-center p-4"},"You don't have notifications right now"))}},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Ka,{count:x.length}))))):"",r.a.createElement("div",{className:"col-auto text-white"},t.display_name?r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement(Ie,{content:function(e){return r.a.createElement("div",{style:{borderRadius:"4px",overflow:"hidden",minWidth:"".concat(e,"px")}},"Administrator"===t.role?r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),f.push("/admin")}},"Administration"):"",r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),f.push("/profile/".concat(t._id))}},"My Profile"),r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),f.push("/profile/".concat(t._id,"/2"))}},"My Reviews"),r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),f.push("/profile/".concat(t._id,"/0"))}},"My Wishlist"),r.a.createElement("div",{className:"popover-item",onClick:function(){k.current.click(),localStorage.removeItem("movies_user_token"),d.dispatch({type:"SET_USER",user:{first_name:"",last_name:"",display_name:"",photo:"",token:"",email:"",ratings:{},reviews:[],wishlist:[],watchedlist:[],notifications:[]}}),f.push("/")}},"Logout"))}},r.a.createElement("div",{className:"col-60",ref:k},r.a.createElement("div",{className:"row no-gutters align-items-center cursor-pointer"},r.a.createElement("div",{className:"col-auto mr-2 rounded-circle square-40 bg-image",style:{backgroundImage:"url(".concat(t.photo,")"),border:"1px solid white"}}),r.a.createElement("div",{className:"col-auto mr-2 d-none d-sm-block"},r.a.createElement("div",{className:"text-truncate",style:{maxWidth:"120px"}},t.display_name)),r.a.createElement("div",{className:"col-auto user-select-none"},r.a.createElement(Xe.e,{fontSize:"14px"})))))):r.a.createElement("div",{className:"row no-gutters pr-sm-3 pr-2 align-items-center"},r.a.createElement("div",{className:"col-auto cursor-pointer fb-btn",onClick:function(){f.push("/login")}},"Login"),r.a.createElement("div",{className:"col-auto cursor-pointer fb-btn",onClick:function(){return f.push("/signup")}},"Signup"))),"/admin"===S.pathname?r.a.createElement(_.e,{className:"text-white col-auto d-block d-lg-none cursor-pointer",fontSize:"34px",onClick:function(){return d.dispatch({type:"SET_DASHBOARD_MENU_OPENED",isOpened:!a})}}):""))))))})));var Qa=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,settings:e.settings},t)}))((function(e){var t=e.user,a=e.settings,n=[{name:"Home",path:"/",condition:!0},{name:"My Wishlist",condition:t.display_name,path:t._id?"/profile/".concat(t._id,"/0"):"/login"},{condition:t.display_name,name:"My Reviews",path:t._id?"/profile/".concat(t._id,"/2"):"/login"},{name:"About Us",path:"/",condition:!0},{name:"Contact",path:"/",condition:!0}],c=[{icon:Et.b,path:a.FacebookLink},{icon:Et.c,path:a.InstagramLink},{icon:Et.d,path:a.LinkedinLink},{icon:Et.f,path:a.TwitterLink}],s=[{name:"Privacy policy",path:"/privacy-policy"},{name:"Cookies Policy",path:"/cookies-policy"},{name:"Terms And Conditions",path:"/terms-and-conditions"}],o=Object(v.e)();return"/login"===o.pathname||"/signup"===o.pathname||"/forgot-password"===o.pathname||o.pathname.includes("/reset-password")?"":r.a.createElement("div",{className:"row no-gutters justify-content-center bg-over-root text-muted"},r.a.createElement("div",{className:"px-sm-5 px-4 py-4 col-60".concat("/admin"!==o.pathname?" content-container":"")},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center font-size-16"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters"},n.filter((function(e){return e.condition})).map((function(e,t){return r.a.createElement("div",{key:"footer-item-".concat(t),className:"col-auto btn-tertiary text-muted-light",onClick:function(){return f.push(e.path)}},e.name)})))),r.a.createElement("div",{className:"col-md-auto col-60 px-3 mb-2"},r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-md-start"},c.map((function(e,t){return r.a.createElement("div",{key:"social-icon-".concat(t),className:"col-auto scale-transition cursor-pointer mr-".concat(t===c.length-1?"0":"2")},r.a.createElement("div",{className:"square-40 rounded-circle bg-white d-flex flex-center",onClick:function(){window.open(e.path)}},r.a.createElement(e.icon,{fontSize:"24px",className:"text-dark"})))}))))),r.a.createElement("div",{className:"row no-gutters justify-content-md-between justify-content-center"},r.a.createElement("div",{className:"col-auto px-3"},"\xa92020 CozyPotato, Inc."),r.a.createElement("div",{className:"col-auto px-3"},r.a.createElement("div",{className:"row no-gutters"},s.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"footer-item-".concat(t)},r.a.createElement("div",{className:"col-auto link-primary d-sm-block d-none",onClick:function(){return f.push(e.path)}},e.name),r.a.createElement("div",{className:"col-auto link-primary d-block d-sm-none",onClick:function(){return f.push(e.path)}},e.name.split(" ")[0]),t!==s.length-1&&r.a.createElement("div",{className:"px-2"},"|"))})))))))}));var en=Object(p.b)((function(e,t){return Object(E.a)({user:e.user,ratings:e.ratings,settings:e.settings},t)}))((function(e){var t=e.match.params.movieId,a=e.ratings,c=e.settings.movies_api_key,s=e.user,o=Object(n.useState)(-1),m=Object(b.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)({poster_path:"",genres:[],title:"",overview:"",director:"",cast:[],runtime:0,release_date:"",id:""}),g=Object(b.a)(v,2),E=g[0],h=g[1],N=Object(n.useState)(!1),w=Object(b.a)(N,2),y=w[0],x=w[1];return Object(n.useEffect)((function(){E.title&&q(E)}),[E.title]),Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var a,n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!c){e.next=14;break}return e.next=3,We(t,c);case 3:return a=e.sent,h((function(e){return Object.assign({},e,Object.assign({},a,{title:a.name,release_date:a.first_air_date}))})),e.next=7,He(t,c);case 7:n=e.sent,r=n.crew?n.crew.find((function(e){return"Director"===e.job})):null,s=r?r.name:"unknown",o=n.cast?n.cast.map((function(e){return e.name})):[],a.director=s,a.cast=o,h((function(e){return Object.assign({},e,{director:s,cast:o})}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.scrollTo(0,0),function(){e.apply(this,arguments)}()}),[t,c]),r.a.createElement("div",{className:"row no-gutters justify-content-center bg-movie-over-root position-relative"},r.a.createElement("div",{className:"position-absolute w-100 d-block d-lg-none",style:{top:0,left:0}},r.a.createElement("div",{className:"position-relative",style:{height:window.innerHeight,overflow:"hidden"}},r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{alt:E.poster_path,width:"100%",src:"https://image.tmdb.org/t/p/w342/".concat(E.poster_path)}),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgba(0, 0, 0, 0.3) 90%, black)",top:0,left:0}})),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgb(0 0 0 / 30%), black)",top:0,left:0}}))),r.a.createElement(Je,{open:y,onClose:function(){return x(!1)}},r.a.createElement(Ve,{movieId:t,onEnded:function(){return x(!1)}})),r.a.createElement("div",{className:"col-60 text-white px-md-5 py-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters py-5 mb-5"},r.a.createElement("div",{className:"col-auto mr-5 d-none d-lg-block"},r.a.createElement("div",{className:"w-100 position-relative"},r.a.createElement("img",{alt:E.poster_path,style:{borderRadius:"25px"},width:"300px",src:"https://image.tmdb.org/t/p/w342/".concat(E.poster_path)}),r.a.createElement("div",{onClick:function(){return f.push("/movie/".concat(E.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},r.a.createElement("div",{className:"square-60 rounded-circle d-flex flex-center play-btn",onClick:function(e){e.stopPropagation(),x(!0)}},r.a.createElement(Xe.l,{style:{fontSize:"35px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col position-relative"},r.a.createElement("div",{className:"row no-gutters position-relative",style:{zIndex:5}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters h5"},E.title," (",E.release_date.substring(0,4),")"),r.a.createElement("div",{className:"row no-gutters text-movie-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},E.genres.map((function(e){return e.name})).join("/"))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-auto font-weight-500 mr-2"},"Duration:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},Ye(E.runtime))),r.a.createElement("div",{className:"row no-gutters mb-4 text-light"},E.overview),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Director:"),r.a.createElement("div",{className:"col-auto mr-5 text-movie-muted"},E.director?E.director:"unknown"))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Cast:"),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"text-clamp-2 text-muted-light cursor-pointer",onClick:function(e){e.currentTarget.classList.contains("text-clamp-2")?e.currentTarget.classList.remove("text-clamp-2"):e.currentTarget.classList.add("text-clamp-2")}},E.cast.join("    "))))))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(Me,{selected:!!s.ratings[E.id]&&"excellent_rate"===s.ratings[E.id].rate_type,movie:E,emoji:"fire",className:"mr-2 mb-2",value:a[E.id]?a[E.id].excellent_rate:0}),r.a.createElement(Me,{selected:!!s.ratings[E.id]&&"good_rate"===s.ratings[E.id].rate_type,movie:E,emoji:"heart",className:"mr-2 mb-2",value:a[E.id]?a[E.id].good_rate:0}),r.a.createElement(Me,{selected:!!s.ratings[E.id]&&"ok_rate"===s.ratings[E.id].rate_type,movie:E,className:"mr-2 mb-2",emoji:"heavy_division_sign",value:a[E.id]?a[E.id].ok_rate:0}),r.a.createElement(Me,{emoji:"shit",value:a[E.id]?a[E.id].bad_rate:0,selected:!!s.ratings[E.id]&&"bad_rate"===s.ratings[E.id].rate_type,movie:E})),r.a.createElement("div",{className:"row no-gutters mb-5"},r.a.createElement("div",{className:"col-auto mr-2"},"Release date:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},ot.a.format(new Date(E.release_date),"MMMM DD, YYYY"))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-md-start"},r.a.createElement("div",{className:"col-auto mr-3 btn-custom btn-custom-primary btn-small",onClick:function(){s.token?p(u+1):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Add Review",r.a.createElement(Et.e,{fontSize:"20px",className:"ml-2"})),r.a.createElement(De,{movie:E,user:s})))))),r.a.createElement(ft,{movie:E,user:s,addReviewTrigger:u})),r.a.createElement("div",{className:"col-60"},r.a.createElement(Qa,null)))})),tn=function(){return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters px-0",style:{minHeight:"800px"}},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(ja.a,{fileType:"docx",filePath:Aa.a,errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))},an=function(){return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters px-0",style:{minHeight:"800px"}},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(ja.a,{fileType:"docx",filePath:Sa.a,errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))},nn=function(){return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters px-0",style:{minHeight:"800px"}},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(ja.a,{fileType:"docx",filePath:Ia.a,errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))},rn=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(b.a)(s,2),m=o[0],u=o[1],p=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue(t)){e.next=4;break}u("Email is not valid"),e.next=8;break;case 4:return e.next=6,je(t);case 6:(a=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{type:"failure",title:"Error",message:a.error}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{type:"success",title:"Password reset link sent",message:"We sent email with password reset link to your email box. If you didn't get email, check spam folder"}}),f.push("/login"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters justify-content-center aligm-items-start align-items-sm-center",style:{height:window.innerHeight}},r.a.createElement("div",{className:"col-xl-50 col-60 col-lg-50 col-md-30 col-sm-40 login-rounded overflow-hidden"},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col bg-dark d-lg-block d-none"},r.a.createElement("div",{className:"row no-gutters h-100 flex-center position-relative"},r.a.createElement("div",{className:"position-absolute d-flex align-items-center text-white cursor-pointer",onClick:function(){return f.push("/")},style:{top:"15px",left:"15px"}},r.a.createElement(Xe.f,{className:"mr-2"}),"Back to home"),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"square-150 mx-auto"},r.a.createElement(yt,null)),r.a.createElement("div",{className:"logo text-title-xl text-white"},"CozyPotato")))),r.a.createElement("div",{className:"col-60 col-lg-30 col-xl-25 col-md-auto p-sm-5 p-4 bg-light",style:{minHeight:window.innerHeight-100}},r.a.createElement("div",{className:"row no-gutters h-100 py-3 align-items-center"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 h3 mb-2"},"Forgot Password?"),r.a.createElement("div",{className:"col-60"},"Enter email where you want to receive password reset link.")),r.a.createElement("div",{className:"row no-gutters justify-content-center mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"input-light w-100 px-3",value:a,onKeyDown:function(e){13===e.keyCode&&p(a)},onChange:function(e){e.persist(),c(e.target.value)}}))),r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-60 btn-custom btn-custom-primary",onClick:function(){return p(a)}},"Send me reset link")),r.a.createElement("div",{style:{height:"40px",opacity:m?1:0},className:"row no-gutters align-items-center text-danger"},m),r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"btn-link col-auto mr-3",onClick:function(){return f.push("/login")}},"Login"),r.a.createElement("div",{className:"btn-link col-auto",onClick:function(){return f.push("/signup")}},"Sign up"))))))))},cn=function(e){var t=e.match.params.token,a=Object(n.useState)(""),c=Object(b.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(""),u=Object(b.a)(m,2),p=u[0],v=u[1],g=Object(n.useState)(""),E=Object(b.a)(g,2),h=E[0],N=E[1],w=[{valid:/[^\w\s]/.test(s)||/\d/.test(s),error:"Password must contain number or symbol"},{valid:s===p,error:"Passwords don't match"},{valid:s.length>=6,error:"Password must contain at least 6 characters"}],y=function(){var e=Object(l.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=w.filter((function(e){return!e.valid}))).length){e.next=8;break}return e.next=4,ke(t,a);case 4:(r=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{type:"failure",title:"Error",message:r.error}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{type:"success",title:"Password reseted",message:"Password successfully changed. You can login"}}),f.push("/login")),e.next=9;break;case 8:N(n[0].error);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters justify-content-center aligm-items-start align-items-sm-center",style:{height:window.innerHeight}},r.a.createElement("div",{className:"col-xl-50 col-60 col-lg-50 col-md-30 col-sm-40 login-rounded overflow-hidden"},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col bg-dark d-lg-block d-none"},r.a.createElement("div",{className:"row no-gutters h-100 flex-center position-relative"},r.a.createElement("div",{className:"position-absolute d-flex align-items-center text-white cursor-pointer",onClick:function(){return f.push("/")},style:{top:"15px",left:"15px"}},r.a.createElement(Xe.f,{className:"mr-2"}),"Back to home"),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"square-150 mx-auto"},r.a.createElement(yt,null)),r.a.createElement("div",{className:"logo text-title-xl text-white"},"CozyPotato")))),r.a.createElement("div",{className:"col-60 col-lg-30 col-xl-25 col-md-auto p-sm-5 p-4 bg-light",style:{minHeight:window.innerHeight-100}},r.a.createElement("div",{className:"row no-gutters h-100 py-3 align-items-center"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 h3 mb-2"},"Reset Password"),r.a.createElement("div",{className:"col-60"},"Enter new password in input fields")),r.a.createElement("div",{className:"row no-gutters justify-content-center mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"New Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:s,onChange:function(e){e.persist(),o(e.target.value)}}))),r.a.createElement("div",{className:"row no-gutters justify-content-center mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Confirm New Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:p,onKeyDown:function(e){13===e.keyCode&&y(s,t)},onChange:function(e){e.persist(),v(e.target.value)}}))),r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-60 btn-custom btn-custom-primary",onClick:function(){return y(s,t)}},"Set new password")),r.a.createElement("div",{style:{height:"40px",opacity:h?1:0},className:"row no-gutters align-items-center text-danger"},h),r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"btn-link col-auto mr-3",onClick:function(){return f.push("/login")}},"Login"),r.a.createElement("div",{className:"btn-link col-auto",onClick:function(){return f.push("/signup")}},"Sign up"))))))))};var sn=function(){return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne((function(e){e.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action required",message:"Settings are not set. Inform website administrator to set Api key and other settings for the website",type:"failure"}}):e.length?d.dispatch({type:"UPDATE_SETTINGS",settings:e[0]}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action required",message:"Settings are not set. Inform website administrator to set Api key and other settings for the website",type:"failure"}})})),I((function(e){var t={};e.forEach((function(e){t[e.tmdb_id]=e})),d.dispatch({type:"SET_RATINGS",ratings:t})})),T((function(e){var t={};e.forEach((function(e){t[e.user_id]=e})),d.dispatch({type:"SET_PUBLICUSERS",publicUsers:t})})),null===(t=localStorage.getItem("movies_user_token"))||!t.length){e.next=9;break}return e.next=7,C({token:t});case 7:(a=e.sent).error||d.dispatch({type:"SET_USER",user:a});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(p.a,{store:d},r.a.createElement(v.c,{history:f},r.a.createElement("div",{className:"container-fluid px-0"},r.a.createElement(Za,null),r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/terms-and-conditions",component:an}),r.a.createElement(v.b,{exact:!0,path:"/cookies-policy",component:tn}),r.a.createElement(v.b,{exact:!0,path:"/privacy-policy",component:nn}),r.a.createElement(v.b,{exact:!0,path:"/",component:vt}),r.a.createElement(v.b,{exact:!0,path:"/movie/:movieId/:reviewId/:commentId",component:bt}),r.a.createElement(v.b,{exact:!0,path:"/movie/:movieId/:reviewId",component:bt}),r.a.createElement(v.b,{exact:!0,path:"/movie/:movieId",component:bt}),r.a.createElement(v.b,{exact:!0,path:"/series/:movieId",component:en}),r.a.createElement(v.b,{exact:!0,path:"/search",component:wt}),r.a.createElement(Ba,{exact:!0,path:"/admin",bearerPath:"/login",Component:wa}),r.a.createElement(v.b,{exact:!0,path:"/login",component:xa}),r.a.createElement(v.b,{exact:!0,path:"/signup",component:Ra}),r.a.createElement(v.b,{exact:!0,path:"/forgot-password",component:rn}),r.a.createElement(v.b,{exact:!0,path:"/reset-password/:token",component:cn}),r.a.createElement(v.b,{exact:!0,path:"/profile/:userId/:section",component:Wa}),r.a.createElement(v.b,{exact:!0,path:"/profile/:userId",component:Wa})),r.a.createElement(Qa,null),r.a.createElement(Ya,null))))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(sn,null)),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.759c35ca.chunk.js.map