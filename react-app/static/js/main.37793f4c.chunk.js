(this.webpackJsonpreports=this.webpackJsonpreports||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/TermsAndConditions.ab5b934e.docx"},110:function(e,t,a){e.exports=a.p+"static/media/PrivacyPolicy.f98adba2.docx"},111:function(e,t,a){e.exports=a.p+"static/media/CookiesPolicy.b364bd24.docx"},207:function(e,t,a){e.exports=a(317)},212:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=(a(212),a(5)),l=a.n(o),i=a(6),m=a(89);var u=Object(m.b)({publicUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PUBLICUSERS":return t.publicUsers;case"UPDATE_PUBLICUSERS":return Object.assign({},e,t.publicUser);default:return e}},ratings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RATINGS":return t.ratings;case"UPDATE_RATINGS":return Object.assign({},e,t.rating);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first_name:"",last_name:"",display_name:"",photo:"",token:"",email:"",ratings:{},reviews:[],wishlist:[],watchedlist:[],notifications:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;case"UPDATE_USER":return Object.assign({},e,t.userProperty);default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:"",category:"All"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH":return t.search;case"UPDATE_SEARCH":return Object.assign({},e,t.search);default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",message:"",expired:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.notification;case"UPDATE_NOTIFICATION":return Object.assign({},e,t.notification);default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movies_api_key:"",movie_data_api:"",latest_movies_api:"",no_popular_reviews:5,no_popular_movies:5,no_allowed_reviews:5,no_comment_characters:400,no_review_words:80,bg_image_refresh_time_days:1,bg_image_refresh_time_hours:0,bg_image_refresh_time_minutes:0,FacebookLink:"",InstagramLink:"",TwitterLink:"",LinkedinLink:"",current_bg_movie:{date_set:Date.now(),id:"300671",poster_path:"/4qnEeVPM8Yn5dIVC4k4yyjrUXeR.jpg",backdrop_path:"/ayDMYGUNVvXS76wQgFwTiUIDNb5.jpg",release_date:"2016-01-13",overview:"An American Ambassador is killed during an attack at a U.S. compound in Libya as a security team struggles to make sense out of the chaos.",title:"13 Hours: The Secret Soldiers of Benghazi",genres:[{id:28,name:"Action"},{id:36,name:"History"},{id:53,name:"Thriller"}],runtime:144}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SETTINGS":return t.settings;case"UPDATE_SETTINGS":return Object.assign({},e,t.settings);default:return e}},navbarHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HEIGHT":return t.height;default:return e}},dashboardMenuOpened:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DASHBOARD_MENU_OPENED":return t.isOpened;default:return e}}}),d=Object(m.c)(u,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),p=a(9),v=a(362),g=a(53),E=Object(g.a)(),b=a(8),f=a(2),N=a(22),h=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],w=[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}],y=[{name:"excellent_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(N.a,{emoji:"fire",set:"facebook",size:24}))},{name:"good_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(N.a,{emoji:"heart",set:"facebook",size:24}))},{name:"ok_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(N.a,{emoji:"heavy_division_sign",set:"facebook",size:24}))},{name:"bad_rate",element:r.a.createElement("div",{className:"text-center py-3",style:{lineHeight:"100%"}},r.a.createElement(N.a,{emoji:"shit",set:"facebook",size:24}))}],x=a(14),_=function(e,t){return fetch("".concat("").concat(e),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},O=function(e){return fetch("".concat("").concat(e)).then((function(e){return e.json()}))},j=function(e){return _("/user/login",e)},k=function(e){return _("/user/loginWithToken",e)},S=function(e){O("/ratings/get/all").then((function(t){return e(t)}))},C=function(e){return O("/publicUsers/get/all").then((function(t){return e(t)}))},I=function(e,t,a,n){return _("/reviews/update",{review:e,movieId:t,user:a,apiKey:n})},T=function(e){return _("/reviews/get/movie",{movieId:e})},A=function(e){return _("/reviews/getPromoted/movie",{movieId:e})},D=function(e,t){return _("/comments/update",{user:t,comment:e})},Y=function(e){return _("/comments/get/review",{reviewId:e})},M=function(e,t,a){return _("/movie/addToWishlist",{user:e,movieId:t,apiKey:a})},R=function(e,t){return _("/movie/views/add",{movieId:e,apiKey:t})},U=function(e,t){return _("/reviews/like",{user:e,reviewId:t})},P=function(e,t){return _("/comments/like",{user:e,commentId:t})},F=function(e,t){return _("/reviews/report",{user:e,reviewId:t})},z=function(e,t){return _("/comments/report",{user:e,commentId:t})},L=function(e){return _("/users/get",{userId:e})},q=function(e){return _("/reviews/get/user",{reviewIds:e})},W=function(e){return _("/comments/get/user",{commentIds:e})},B=function(e){return _("/users/edit",{update:e})},H=function(e){return _("/reviews/get/popular",{limit:e})},G=function(e){return _("/reviews/get/recent",{limit:e})},K=function(e){return _("/movies/get/recommended",{limit:e})},V=function(e){return _("/reviews/search",{query:e})},X=function(e){return _("/settings/updateOrCreate",e)},J=function(e){O("/settings/get").then((function(t){return e(t)}))},$=function(){return O("/admin/users/get")},Z=function(){return O("/admin/reviews/get")},Q=function(){return O("/admin/comments/get")},ee=function(e,t){return _("/admin/reviews/edit",{review:e,user:t})},te=function(e,t){return _("/admin/comments/edit",{comment:e,user:t})},ae=function(e){return _("/admin/reviews/delete",e)},ne=function(e){return _("/admin/comments/delete",e)},re=function(e,t,a){return _("/admin/users/editMultiple",{ids:e,pids:t,update:a})},ce=function(){return O("/admin/announcements/get")},se=function(e){return _("/admin/announcements/create",e)},oe=function(e){return _("/admin/announcements/delete",e)},le=function(e){return _("/admin/announcements/edit",e)},ie=function(){return O("/announcements/getActive")},me=function(){return O("/admin/promotions/get")},ue=function(e){return _("/admin/promotions/edit",e)},de=function(e){return _("/user/notifications/get/",{ids:e})},pe=function(){return O("/admin/notifications/get")},ve=function(e){return _("/admin/notifications/create",e)},ge=function(e){return _("/admin/notifications/edit",e)},Ee=function(e,t){return _("/admin/notifications/delete",{ids:e,update:t})},be=function(e,t){return _("/movie/moveToWatchedList",{user:e,movieId:t})},fe=function(){return O("/reviews/getPromoted")},Ne=a(112),he=(a(219),a(187)),we=function(e){var t=e.className,a=e.onOpen,c=void 0===a?function(){}:a,s=e.position,o=void 0===s?"bottom":s,l=e.arrow,i=void 0===l||l,m=e.theme,u=void 0===m?"light":m,d=e.content,p=void 0===d?function(){}:d,v=e.trigger,g=void 0===v?"click":v,E=e.delay,b=void 0===E?0:E,N=e.animation,h=void 0===N?"scale":N,w=e.open,y=void 0===w?void 0:w,x=e.onHide,_=void 0===x?function(){}:x,O=(e.popoverWidth,Object(Ne.a)(e,["className","onOpen","position","arrow","theme","content","trigger","delay","animation","open","onHide","popoverWidth"])),j=Object(n.useState)(0),k=Object(f.a)(j,2),S=k[0],C=k[1];Object(n.useEffect)((function(){return function(){for(var e=document.getElementsByClassName("tippy-popper"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}}),[]);var I=Object(n.useState)(!1),T=Object(f.a)(I,2),A=T[0],D=T[1];return r.a.createElement(he.Tooltip,{onShow:function(){A||(D(!0),c())},onHide:_,delay:b,hideDelay:0,html:p(S),position:o,trigger:g,theme:u,arrow:i,interactive:!0,animation:h,open:y,unmountHTMLWhenHide:!0,className:t},r.a.cloneElement(O.children,Object.assign({},O.children.props,{ref:function(e){if(e&&(0===S&&C(e.getBoundingClientRect().width),O.children)){var t=O.children.ref;t&&"current"in t&&(t.current=e),"function"===typeof t&&t(e)}}})))},ye=function(e){var t=e.loading,a=e.size,n=void 0===a?50:a,c=e.theme,s=void 0===c?"light":c;return t&&r.a.createElement("div",{className:"w-100 h-100 d-flex flex-center"},r.a.createElement("div",{className:"loader-".concat(s),style:{width:"".concat(n,"px"),height:"".concat(n,"px")}}))};var xe=Object(p.b)((function(e,t){return Object(b.a)({apiKey:e.settings.movies_api_key},t)}))((function(e){var t=e.user,a=e.movie,c=e.apiKey,s=Object(n.useState)(!1),o=Object(f.a)(s,2),m=o[0],u=o[1],p=function(){var e=Object(i.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.display_name){e.next=10;break}if(!a.id){e.next=8;break}return u(!0),e.next=5,M(t,a.id,c);case 5:r=e.sent,u(!1),r.updatedUser?(d.dispatch({type:"UPDATE_USER",userProperty:r.updatedUser}),d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Movie ".concat(n," wishlist"),message:"Movie successfully ".concat(n," your wishlist"),type:"success"}}),S((function(e){var t={};e.forEach((function(e){t[e.tmdb_id]=e})),d.dispatch({type:"SET_RATINGS",ratings:t})}))):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:JSON.stringify(r.error).replace(/"/g,""),type:"failure"}});case 8:e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You need to login to add movie to wishlist",type:"failure"}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=-1!==t.wishlist.findIndex((function(e){return e.movie_id===a.id.toString()}));return-1!==t.watchedlist.findIndex((function(e){return e.movie_id===a.id.toString()}))?"":r.a.createElement(we,{theme:"dark",position:"top",content:function(e){return r.a.createElement("div",{className:"px-3 py-2"},v?"Remove from wishlist":"Add to wishlist")},trigger:"mouseenter"},r.a.createElement("div",{style:{pointerEvents:"all"},className:"btn-custom ".concat(v?"btn-custom-danger":"btn-custom-iconic")},m?r.a.createElement(ye,{size:30,loading:m,color:"white"}):v?r.a.createElement(x.c,{onClick:function(){return p("removed from")},fontSize:"24px"}):r.a.createElement(x.g,{onClick:function(){return p("added to")},className:"text-title-xl",style:{marginRight:"-5px"}})))})),_e=function(e,t){var a,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];for(a=n.length-1;a>0&&!(e>=n[a].value);a--);return(e/n[a].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[a].symbol},Oe=function(e){var t=Math.floor(e/60),a=e-60*t;return"".concat(t,"h ").concat(a,"m")},je=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())};var ke=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.emoji,a=e.onClick,n=e.size,c=void 0===n?"normal":n,s=e.allowRate,o=void 0!==s&&s,m=e.selected,u=e.className,d=e.value;return r.a.createElement("div",{onClick:Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&a&&a();case 1:case"end":return e.stop()}}),e)}))),className:"col-auto btn-reaction-".concat(c," ").concat(o?"btn-reaction":"").concat(m?" btn-reaction-selected":"").concat(u?" ".concat(u):"")},r.a.createElement("div",{className:"row no-gutters align-items-center h-100 justify-content-center"},void 0!==d&&null!==d?r.a.createElement("div",{className:"col mr-".concat("small"!==c?"2":"1")},_e(d,1)):"",r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{style:{marginBottom:"normal"===c?"-6px":"-2px"}},r.a.createElement(N.a,{emoji:t,set:"facebook",size:"small"===c?14:"normal"===c?16:28})))))})),Se=a(188),Ce=a.n(Se),Ie=(a(72),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return"".concat("https://api.themoviedb.org/3").concat(e,"?api_key=").concat(a,"&").concat(["language=en-US"].concat(t).join("&"))}),Te=function(e,t){return fetch(Ie("/discover/movie",["sort_by=popularity.desc","with_genres=".concat(e.join(","))],t)).then((function(e){return e.json()}))},Ae=function(e,t){return fetch(Ie("/movie/".concat(e,"/videos"),[],t)).then((function(e){return e.json()}))},De=function(e,t){return fetch(Ie("/tv/".concat(e),[],t)).then((function(e){return e.json()}))},Ye=function(e,t){return fetch(Ie("/movie/".concat(e),[],t)).then((function(e){return e.json()}))},Me=function(e,t){return fetch(Ie("/movie/".concat(e,"/credits"),[],t)).then((function(e){return e.json()}))},Re=function(e,t){var a=Ie("/search/movie",["query=".concat(e)],t);return fetch(a).then((function(e){return e.json()}))},Ue=function(e,t){var a=Ie("/search/tv",["query=".concat(encodeURI(e))],t);return fetch(a).then((function(e){return e.json()}))};var Pe=Object(p.b)((function(e,t){return Object(b.a)({settings:e.settings},t)}))((function(e){var t=e.movieId,a=e.settings,c=e.onEnded,s=Object(n.useState)([]),o=Object(f.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(""),p=Object(f.a)(d,2),v=p[0],g=p[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a.movies_api_key){e.next=5;break}return e.next=3,Ae(t,a.movies_api_key);case 3:(n=e.sent).results&&n.results.length?u(n.results.map((function(e){return e.key}))):g("We couldn't find trailer for this movie");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a.movies_api_key]),r.a.createElement("div",{className:"col-xl-33 col-lg-36 col-md-39 col-sm-42 col-60"},r.a.createElement("div",{className:"row no-gutters"},m.length?r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"trailer-player-wrapper"},r.a.createElement(Ce.a,{onEnded:c,config:{youtube:{playerVars:{showinfo:0,iv_load_policy:3}}},playing:!0,className:"trailer-player",controls:!0,width:"100%",height:"100%",url:"https://www.youtube.com/watch?v=".concat(m[0])}))):v?r.a.createElement("div",{className:"text-white h4 m-auto"},v):""))})),Fe=a(10),ze=function(e){return Object(n.useEffect)((function(){e.open?document.body.style.overflow="hidden":document.body.style.overflow="visible"}),[e.open]),e.open?r.a.createElement("div",{className:"container-fluid w-100 h-100 modal-container px-0 text-white overflow-auto"},r.a.createElement("div",{className:"row no-gutters justify-content-end",style:{position:"sticky",top:0}},r.a.createElement("div",{onClick:e.onClose,className:"modal-closer"},r.a.createElement(Fe.m,{fontSize:"24px",strokeWidth:"2px"}))),r.a.createElement("div",{className:"row no-gutters h-100 align-items-center justify-content-center"},e.children)):""};var Le=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.movies,a=e.user,c=e.ratings,s=Object(n.useState)(""),o=Object(f.a)(s,2),l=o[0],i=o[1],m=Object(n.useState)(!1),u=Object(f.a)(m,2),d=u[0],p=u[1];return r.a.createElement("div",{className:"row justify-content-end"},r.a.createElement(ze,{open:d,onClose:function(){return p(!1)}},r.a.createElement(Pe,{movieId:l,onEnded:function(){return p(!1)}})),t.map((function(e,t){return r.a.createElement("div",{key:"result-".concat(t),className:"col-lg-12 col-md-15 col-sm-20 col-60 p-3 text-white"},r.a.createElement("div",{className:"row no-gutters justify-content-end position-relative px-2 d-none d-sm-flex",style:{marginBottom:"-51px",zIndex:5,height:"44px",pointerEvents:"none"}},r.a.createElement(xe,{movie:e,user:a})),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-60 col-auto mr-3 mr-sm-0"},r.a.createElement("div",{className:"row no-gutters mb-2 position-relative movies-list-image"},r.a.createElement("img",{alt:e.poster_path,width:"100%",style:{borderRadius:"13px"},className:"img-clickable",src:e.poster_path?"https://image.tmdb.org/t/p/w342".concat(e.poster_path):"https://critics.io/img/movies/poster-placeholder.png"}),r.a.createElement("div",{onClick:function(){return E.push("/".concat(e.name?"series":"movie","/").concat(e.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},r.a.createElement("div",{className:"square-50 rounded-circle d-flex flex-center play-btn",onClick:function(t){t.stopPropagation(),i(e.id),p(!0)}},r.a.createElement(Fe.k,{style:{fontSize:"30px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col-sm-60 col"},r.a.createElement("div",{className:"row no-gutters text-title-md mb-0 cursor-pointer",onClick:function(){return E.push("/movie/".concat(e.id))}},r.a.createElement("div",{className:"text-truncate"},e.title?e.title:e.name)),r.a.createElement("div",{className:"row no-gutters text-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},e.genre_ids.length?e.genre_ids.map((function(t){var a=e.title?h.find((function(e){return e.id===t})):w.find((function(e){return e.id===t}));return a?a.name:"unknown"})).join("/"):"unknown")),r.a.createElement("div",{className:"row no-gutters justify-content-sm-end mb-2"},r.a.createElement(ke,{selected:!!a.ratings[e.id]&&"excellent_rate"===a.ratings[e.id].rate_type,movie:e,emoji:"fire",className:"mr-1 mb-2",size:"small",value:c[e.id]?c[e.id].excellent_rate:0}),r.a.createElement(ke,{size:"small",selected:!!a.ratings[e.id]&&"good_rate"===a.ratings[e.id].rate_type,movie:e,emoji:"heart",className:"mr-1 mb-2",value:c[e.id]?c[e.id].good_rate:0}),r.a.createElement(ke,{size:"small",selected:!!a.ratings[e.id]&&"ok_rate"===a.ratings[e.id].rate_type,movie:e,className:"mr-1 mb-2",emoji:"heavy_division_sign",value:c[e.id]?c[e.id].ok_rate:0}),r.a.createElement(ke,{size:"small",emoji:"shit",value:c[e.id]?c[e.id].bad_rate:0,selected:!!a.ratings[e.id]&&"bad_rate"===a.ratings[e.id].rate_type,movie:e})),r.a.createElement("div",{className:"row no-gutters d-flex d-sm-none"},r.a.createElement(xe,{movie:e,user:a})))))})))})),qe=a(47),We=[{name:"All",genresIds:[]},{name:"Suspense & Thriller",genresIds:[27,53]},{name:"Action & Adventure",genresIds:[28,12]},{name:"Romance",genresIds:[10749]},{name:"Crime & Drama",genresIds:[80,18]},{name:"Sci-Fi",genresIds:[878]},{name:"History & Documentary",genresIds:[36,99]}];var Be=Object(p.b)((function(e,t){return Object(b.a)({settings:e.settings},t)}))((function(e){var t=e.apiKey,a=e.settings,c=Object(n.useRef)(),s=Object(n.useState)([]),o=Object(f.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)("All"),p=Object(f.a)(d,2),v=p[0],g=p[1],E=Object(n.useState)([]),b=Object(f.a)(E,2),N=b[0],h=b[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a.no_popular_movies){e.next=5;break}return e.next=3,Te(m,t);case 3:n=e.sent,h(n.results.slice(0,a.no_popular_movies));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[m,t,a]),Object(n.useEffect)((function(){c.current.recalculate()}),[N]),r.a.createElement("div",{className:"row no-gutters justify-content-center text-white"},r.a.createElement("div",{className:"col-60 py-3 px-md-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters h5"},r.a.createElement("div",{className:"col-auto",style:{padding:"6px 30px 6px 0px",background:"linear-gradient(to left, #ff0037, transparent)",borderRadius:"0 4px 4px 0"}},"Popular Movies")),r.a.createElement("div",{className:"row no-gutters text-light"},"Most watched movies in last 30 days"),r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-4"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(qe.a,{ref:c,style:{padding:"14px 0",maxWidth:"100%",overflowX:"auto",whiteSpace:"nowrap"}},We.map((function(e,t){return r.a.createElement("div",{onClick:function(){g(e.name),u(e.genresIds)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(v===e.name?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},e.name)}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Le,{movies:N}))))})),He=function(e){var t=e.movies;return r.a.createElement("div",{className:"row no-gutters"},t.map((function(e,t){return r.a.createElement("div",{className:"col-sm-15 col-md-12 col-lg-15 col-60 pr-2 pb-2 text-white position-relative",key:"recommended-today-movie-".concat(t)},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-60 col-auto mr-3 mr-sm-0"},r.a.createElement("img",{alt:e.movie_poster,className:"img-clickable movies-list-image",onClick:function(){return E.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px"},src:"https://image.tmdb.org/t/p/w154".concat(e.movie_poster)})),r.a.createElement("div",{className:"col-sm-60 col d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters cursor-pointer",onClick:function(){return E.push("/movie/".concat(e.movie_id))}},e.movie_title),r.a.createElement("div",{className:"row no-gutters text-muted"},r.a.createElement("small",{className:"text-truncate"},e.movie_genres)))))})))},Ge=a(25),Ke=a(12),Ve=a.n(Ke),Xe=a(353),Je=function(e){var t=e.count,a=e.current,c=e.setCurrent,s=e.classNames,o=void 0===s?{selected:"input-light-selected",notSelected:"input-light"}:s,l=a===t?a-2:a-1>=1?a-1:a,i=l+1,m=i+1;return Object(n.useEffect)((function(){1===t&&c(1)}),[t]),t>1?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters d-flex d-lg-none user-select-none"},r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 mr-1 cursor-pointer"),onClick:function(){return c(a-1>=1?a-1:a)}},r.a.createElement(Fe.f,{fontSize:"16px"})),r.a.createElement("div",{className:"".concat(o.selected," col-auto text-center mr-1"),style:{width:"50px"}},a),r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 cursor-pointer"),onClick:function(){return c(a+1<=t?a+1:a)}},r.a.createElement(Fe.g,{fontSize:"16px"}))),r.a.createElement("div",{className:"row no-gutters user-select-none d-none d-lg-flex"},r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 mr-1 cursor-pointer"),onClick:function(){return c(a-1>=1?a-1:a)}},"Previous"),l-1>=1&&r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," text-center mr-1 cursor-pointer"),style:{width:"50px"},onClick:function(){return c(l-1>=1?l-1:l)}},"..."),l>=1&&r.a.createElement("div",{style:{width:"50px"},className:"px-0 col-auto ".concat(a===l?o.selected:o.notSelected," text-center mr-1 cursor-pointer"),onClick:function(){return c(l)}},l),i<=t&&i>=1&&r.a.createElement("div",{style:{width:"50px"},className:"px-0 col-auto ".concat(a===i?o.selected:o.notSelected," text-center mr-1 cursor-pointer"),onClick:function(){return c(i)}},i),m<=t&&m>=1&&r.a.createElement("div",{className:"px-0 col-auto ".concat(a===m?o.selected:o.notSelected," text-center mr-1 cursor-pointer"),style:{width:"50px"},onClick:function(){return c(m)}},m),m+1<=t&&r.a.createElement("div",{onClick:function(){return c(m+1<=t?m+1:a)},className:"col-auto ".concat(o.notSelected," text-center mr-1 cursor-pointer"),style:{width:"50px"}},"..."),r.a.createElement("div",{className:"col-auto ".concat(o.notSelected," px-3 cursor-pointer"),onClick:function(){return c(a+1<=t?a+1:a)}},"Next"))):""};var $e=Object(p.b)((function(e,t){return Object(b.a)({settings:e.settings},t)}))((function(e){var t=e.open,a=e.onClose,c=e.user,s=e.review,o=e.movie,m=e.reviewAuthor,u=(e.setComments,e.setReviewIdOfVisibleComments),p=e.refreshComments,v=e.refreshReviews,g=e.settings,E=Object(n.useState)({comment:""}),N=Object(f.a)(E,2),h=N[0],w=N[1],y=Object(n.useState)(""),x=Object(f.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)(!1),k=Object(f.a)(j,2),S=k[0],C=k[1];return r.a.createElement(ze,{open:t,onClose:a},r.a.createElement("div",{className:"col-xl-42 p-4 bg-over-root-lighter rounded mx-4"},r.a.createElement("div",{className:"row no-gutters h5 mb-4"},"Reply to ",m.display_name),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-3 d-none d-md-block"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c.photo,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters d-flex d-md-none justify-content-between mb-3"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c.photo,")")}})),r.a.createElement("div",{className:"col-auto d-flex align-items-end ".concat(h.comment.length<=g.no_comment_characters-1?"text-muted":"text-danger")},h.comment?g.no_comment_characters-h.comment.length:g.no_comment_characters," ","characters left")),r.a.createElement("div",{className:"row no-gutters mb-2",style:{height:"150px"}},r.a.createElement("textarea",{onChange:function(e){e.persist();var t=e.target.value;t.length<=g.no_comment_characters&&w((function(e){return Object.assign({},e,{comment:t})}))},value:h.comment,spellCheck:!1,placeholder:"Add your comment...",style:{resize:"none"},className:"w-100 h-100 textarea"})),r.a.createElement("div",{className:"row no-gutters justify-content-md-end justify-content-center"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto d-none d-md-block ".concat(h.comment.length<=g.no_comment_characters-1?"text-muted":"text-danger")},h.comment?g.no_comment_characters-h.comment.length:g.no_comment_characters," ","characters left"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters align-items-center text-danger justify-content-end",style:{height:"30px",opacity:_?1:0}},_)),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small",onClick:Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.comment){e.next=4;break}O("Type comment"),e.next=18;break;case 4:if(!c.token){e.next=17;break}return C(!0),t=Object.assign({},h,{author_name:c.display_name,movie_id:o.id,comment_id:s.comment_id,review_id:s._id,review:s.review,review_author:s.author,notificationReceivers:s.notificationReceivers}),delete(n=Object(b.a)({},c)).photo,w({comment:""}),e.next=12,D(t,n);case 12:r=e.sent,C(!1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't add your comment",type:"failure",message:JSON.stringify(r.error).replace(/"/g,"")}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"You successfully writed comment",type:"success",message:"Your comment successfully added"}}),a(),u(s._id),p(),v()),e.next=18;break;case 17:O("You need to login to write comment");case 18:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:S,size:20}),"Send"))))))}));var Ze=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,settings:e.settings,ratings:e.ratings,user:e.user},t)}))((function(e){var t=e.publicUsers,a=e.settings,c=e.user,s=e.ratings,o=Object(n.useState)({}),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)([]),g=Object(f.a)(v,2),b=g[0],h=g[1],w=Object(n.useState)([]),y=Object(f.a)(w,2),_=y[0],O=y[1],j=Object(n.useState)(-1),k=Object(f.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)(-1),T=Object(f.a)(I,2),A=T[0],D=T[1],M=Object(n.useState)(-1),R=Object(f.a)(M,2),F=R[0],L=R[1],q=Object(n.useState)(-1),W=Object(f.a)(q,2),B=W[0],G=W[1],K=Object(n.useState)(1),V=Object(f.a)(K,2),X=V[0],J=V[1],$=Object(n.useRef)(null),Z=Object(n.useState)({movie_title:"",movie_id:"",movie_genres:"",movie_release_date:"",movie_poster:""}),Q=Object(f.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!1),ne=Object(f.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(!1),oe=Object(f.a)(se,2),le=oe[0],ie=oe[1],me=Object(n.useState)(!1),ue=Object(f.a)(me,2),de=ue[0],pe=ue[1],ve=Object(n.useState)({}),ge=Object(f.a)(ve,2),Ee=ge[0],be=ge[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===S){e.next=7;break}return e.next=3,Y(S);case 3:t=e.sent,a={},t.forEach((function(e){a[e._id]=e})),p((function(e){return Object.assign({},e,Object(Ge.a)({},S,a))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[S,le]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,n,r,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.no_popular_reviews){e.next=12;break}return e.next=3,fe();case 3:return t=e.sent,n=[],r={},t.error||t.forEach((function(e){n.push(e.content_id),r[e.content_id]=e})),be(r),e.next=10,H(a.no_popular_reviews);case 10:(c=e.sent).error||(s=[],o=[],c.forEach((function(e){n.includes(e._id)?(e.promoted=!0,s.push(e)):o.push(e)})),O(s),h(o));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,de]);return r.a.createElement("div",{className:"row no-gutters justify-content-center text-white"},r.a.createElement("div",{className:"col-60 content-container py-3 px-md-5 px-4"},r.a.createElement("div",{className:"row no-gutters h5"},r.a.createElement("div",{className:"col-auto",style:{padding:"6px 30px 6px 0px",background:"linear-gradient(to left, #ff0037, transparent)",borderRadius:"0 4px 4px 0"}},"Popular Reviews")),r.a.createElement("div",{className:"row no-gutters text-light mb-3"},"Most commented reviews in last 30 days"),r.a.createElement("div",{className:"row no-gutters mb-2",ref:$}),_.concat(b).slice(0,8).map((function(e,a){var n=Ee[e._id]?Ee[e._id].content.rating:e.rating,o=Ee[e._id]?Ee[e._id].content.review:e.review;return r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(a)},r.a.createElement("div",{key:"review-".concat(a),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:"poster-of-".concat(e.movie_id),onClick:function(){return E.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(s[e.movie_id]?s[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png")}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(s[e.movie_id]?s[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},s[e.movie_id]?s[e.movie_id].movie_title:""," ","(",s[e.movie_id]?s[e.movie_id].movie_release_date.substring(0,4):"",")")))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[e.author]?t[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},t[e.author]?t[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2"},"Posted on"),r.a.createElement("span",{className:"text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-size-14 flex-grow-0 font-weight-300 text-break"},o),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===n?"fire":"good_rate"===n?"heart":"ok_rate"===n?"heavy-division-sign":"shit",set:"facebook",size:24})))),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},F===a?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:F===a,size:20})):r.a.createElement(x.k,{onClick:Object(i.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.token){t.next=13;break}if(c._id===e.author){t.next=10;break}return L(a),t.next=5,U(c,e._id);case 5:n=t.sent,L(-1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):pe(!de),t.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own review",type:"failure"}});case 11:t.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return t.stop()}}),t)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(x.b,{onClick:function(){C(S===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){c.token?(te(Object.assign({},e,{notificationReceivers:[t[e.author]]})),ce(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))))),r.a.createElement(Xe.a,{in:S===e._id,className:"mb-3"},r.a.createElement("div",{className:"h5 py-2 text-white",style:{marginLeft:"30px"}},"Comments (",u[e._id]?Object.values(u[e._id]).length:0,")"),u[e._id]?function e(a,n){return a.map((function(a,s){return u[n._id][a]?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginLeft:"".concat(60*u[n._id][a].notificationReceivers.length-30,"px")},key:"comment-".concat(S,"-").concat(s),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2 indented-comment"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(t[u[n._id][a].author]?t[u[n._id][a].author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[u[n._id][a].author]?t[u[n._id][a].author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},t[u[n._id][a].author]?t[u[n._id][a].author].display_name:""))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},"Commented on"),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},Ve.a.format(new Date(u[n._id][a].date),"MMM DD, YYYY")))),r.a.createElement(we,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-over-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.token){e.next=9;break}return G(a),e.next=4,z(c,a);case 4:t=e.sent,G(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment reported",message:"Comment was successfully reported. We will review it soon.",type:"success"}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report comment",type:"failure"}});case 10:case"end":return e.stop()}}),e)})))},B===a?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(x.d,{fontSize:"24px"})))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},u[n._id][a].comment),r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},u[n._id][a].likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},A===s?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:A===s,size:20})):r.a.createElement(x.k,{onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.token){e.next=13;break}if(c._id===u[n._id][a].author){e.next=10;break}return D(s),e.next=5,P(c,a);case 5:t=e.sent,D(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):ie(!le),e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own comment",type:"failure"}});case 11:e.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return e.stop()}}),e)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){c.token?(te(Object.assign({},n,{comment_id:a,notificationReceivers:u[n._id][a].notificationReceivers.concat([t[u[n._id][a].author]])})),ce(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))),e(u[n._id][a].comments,n)):""}))}(Object.values(u[e._id]).filter((function(e){return 1===e.notificationReceivers.length})).map((function(e){return e._id})),e):"",r.a.createElement("div",{className:"row no-gutters justify-content-end mt-2"},r.a.createElement("div",{className:"col-auto ml-4"},r.a.createElement(Je,{count:Math.ceil(u[e._id]?u[e._id].length/5:1),current:X,setCurrent:J,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))})),r.a.createElement($e,{refreshReviews:function(){return pe(!de)},setReviewIdOfVisibleComments:C,refreshComments:function(){return ie(!le)},setComments:p,movie:{id:ee.movie_id},reviewAuthor:t[ee.author]?t[ee.author]:{display_name:""},review:ee,open:re,onClose:function(){return ce(!1)},user:c})))}));var Qe=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings,user:e.user},t)}))((function(e){var t=e.publicUsers,a=e.user,c=e.ratings,s=Object(n.useState)({}),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)([]),v=Object(f.a)(p,2),g=v[0],b=v[1],h=Object(n.useState)(-1),w=Object(f.a)(h,2),y=w[0],_=w[1],O=Object(n.useState)(-1),j=Object(f.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)(-1),I=Object(f.a)(C,2),T=I[0],A=I[1],D=Object(n.useState)(-1),M=Object(f.a)(D,2),R=M[0],F=M[1],L=Object(n.useState)(1),q=Object(f.a)(L,2),W=q[0],B=q[1],H=Object(n.useRef)(null),K=Object(n.useState)(!1),V=Object(f.a)(K,2),X=V[0],J=V[1],$=Object(n.useState)({movie_title:"",movie_id:"",movie_genres:"",movie_release_date:"",movie_poster:""}),Z=Object(f.a)($,2),Q=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(f.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),se=Object(f.a)(ce,2),oe=se[0],le=se[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===y){e.next=7;break}return e.next=3,Y(y);case 3:t=e.sent,a={},t.forEach((function(e){a[e._id]=e})),u((function(e){return Object.assign({},e,Object(Ge.a)({},y,a))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y,ne]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(10);case 2:(t=e.sent).error||b(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[oe]);return r.a.createElement("div",{className:"row no-gutters justify-content-center text-white"},r.a.createElement("div",{className:"col-60 content-container py-3 px-md-5 px-4"},r.a.createElement("div",{className:"row no-gutters h5"},r.a.createElement("div",{className:"col-auto",style:{padding:"6px 30px 6px 0px",background:"linear-gradient(to left, #ff0037, transparent)",borderRadius:"0 4px 4px 0"}},"Recent Reviews")),r.a.createElement("div",{className:"row no-gutters text-light mb-3"},"Most recent reviews in days"),r.a.createElement("div",{className:"row no-gutters mb-2",ref:H}),g.slice(0,8).map((function(e,n){return r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(n)},r.a.createElement("div",{key:"review-".concat(n),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:"poster-of-".concat(e.movie_id),onClick:function(){return E.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id]?c[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png")}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id]?c[e.movie_id].movie_poster:"https://critics.io/img/movies/poster-placeholder.png",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},c[e.movie_id]?c[e.movie_id].movie_title:""," ","(",c[e.movie_id]?c[e.movie_id].movie_release_date.substring(0,4):"",")")))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[e.author]?t[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},t[e.author]?t[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2"},"Posted on"),r.a.createElement("span",{className:"text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-size-14 flex-grow-0 font-weight-300 text-break"},e.review),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},e.rating?r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy-division-sign":"shit",set:"facebook",size:24})):"")),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},T===n?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:T===n,size:20})):r.a.createElement(x.k,{onClick:Object(i.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.token){t.next=13;break}if(a._id===e.author){t.next=10;break}return A(n),t.next=5,U(a,e._id);case 5:r=t.sent,A(-1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):le(!oe),t.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own review",type:"failure"}});case 11:t.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return t.stop()}}),t)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(x.b,{onClick:function(){_(y===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){a.token?(ee(Object.assign({},e,{notificationReceivers:[t[e.author]]})),J(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))))),r.a.createElement(Xe.a,{in:y===e._id,className:"mb-3"},r.a.createElement("div",{className:"h5 py-2 text-white",style:{marginLeft:"30px"}},"Comments (",m[e._id]?Object.values(m[e._id]).length:0,")"),m[e._id]?function e(n,c){return n.map((function(n,s){return m[c._id][n]?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginLeft:"".concat(60*m[c._id][n].notificationReceivers.length-30,"px")},key:"comment-".concat(y,"-").concat(s),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2 indented-comment"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(t[m[c._id][n].author]?t[m[c._id][n].author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(t[m[c._id][n].author]?t[m[c._id][n].author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},t[m[c._id][n].author]?t[m[c._id][n].author].display_name:""))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},"Commented on"),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},Ve.a.format(new Date(m[c._id][n].date),"MMM DD, YYYY")))),r.a.createElement(we,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-over-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=9;break}return F(n),e.next=4,z(a,n);case 4:t=e.sent,F(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment reported",message:"Comment was successfully reported. We will review it soon.",type:"success"}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report comment",type:"failure"}});case 10:case"end":return e.stop()}}),e)})))},R===n?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(x.d,{fontSize:"24px"})))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},m[c._id][n].comment),r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},m[c._id][n].likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},k===s?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:k===s,size:20})):r.a.createElement(x.k,{onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=13;break}if(a._id===m[c._id][n].author){e.next=10;break}return S(s),e.next=5,P(a,n);case 5:t=e.sent,S(-1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):re(!ne),e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own comment",type:"failure"}});case 11:e.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return e.stop()}}),e)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){a.token?(ee(Object.assign({},c,{comment_id:n,notificationReceivers:m[c._id][n].notificationReceivers.concat([t[m[c._id][n].author]])})),J(!0)):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))),e(m[c._id][n].comments,c)):""}))}(Object.values(m[e._id]).filter((function(e){return 1===e.notificationReceivers.length})).map((function(e){return e._id})),e):"",r.a.createElement("div",{className:"row no-gutters mt-2 justify-content-end"},r.a.createElement("div",{className:"col-auto ml-4"},r.a.createElement(Je,{count:Math.ceil(m[e._id]?m[e._id].length/5:1),current:W,setCurrent:B,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))})),r.a.createElement($e,{refreshReviews:function(){return le(!oe)},setReviewIdOfVisibleComments:_,refreshComments:function(){return re(!ne)},setComments:u,movie:{id:Q.movie_id},reviewAuthor:t[Q.author]?t[Q.author]:{display_name:""},review:Q,open:X,onClose:function(){return J(!1)},user:a})))})),et=function(){var e=1280,t=1280;return[300,780,1280].forEach((function(a){var n=Math.abs(window.innerWidth-a);n<t&&(t=n,e=a)})),e};var tt=Object(p.b)((function(e,t){return Object(b.a)({publicUser:e.publicUsers,ratings:e.ratings,settings:e.settings,user:e.user,navbarHeight:e.navbarHeight},t)}))((function(e){e.publicUsers;var t=e.ratings,a=e.user,c=e.settings,s=e.navbarHeight,o=Object(n.useState)([]),m=Object(f.a)(o,2),u=m[0],d=m[1],p=Object(n.useState)(!1),v=Object(f.a)(p,2),g=v[0],E=v[1],b=Object(n.useState)({backdrop_path:"",poster_path:"",runtime:0,title:"",overview:"",id:"",release_date:"",genres:[]}),N=Object(f.a)(b,2),h=N[0],w=N[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(c.current_bg_movie),!c.movies_api_key){e.next=6;break}return e.next=4,K(8);case 4:(t=e.sent).error||d(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),r.a.createElement("div",{className:"row no-gutters",style:{marginTop:"-".concat(s,"px")}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters align-items-end position-relative overflow-hidden",style:{height:window.innerHeight}},r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{top:0,left:0,zIndex:2,background:"linear-gradient(180deg, rgba(0, 0, 0, 0.3) 72%, black)"}}),r.a.createElement(ze,{open:g,onClose:function(){return E(!1)}},r.a.createElement(Pe,{movieId:h.id,onEnded:function(){return E(!1)}})),r.a.createElement("div",{className:"col-60 position-absolute",style:{top:0,left:0,right:0,maxWidth:"1200px",margin:"auto"}},r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{alt:h.poster_path,className:"d-block d-lg-none",width:"100%",src:"https://image.tmdb.org/t/p/w500".concat(h.poster_path)}),r.a.createElement("img",{alt:h.poster_path,className:"d-none d-lg-block",width:"100%",src:"https://image.tmdb.org/t/p/w".concat(et()).concat(h.backdrop_path)}),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgba(0, 0, 0, 0.3) 90%, black), linear-gradient(to right, black, transparent, black)",top:0,left:0}}))),r.a.createElement("div",{className:"col-60 px-md-5 px-4 py-4 position-relative mx-auto content-container",style:{zIndex:5}},r.a.createElement("div",{className:"row no-gutters justify-content-between position-relative"},r.a.createElement("div",{className:"col-60 col-sm-40 col-lg-30 d-flex flex-column justify-content-end text-white"},r.a.createElement("div",{className:"row no-gutters mb-4 text-title-lg",style:{fontWeight:"700"}},h.title),r.a.createElement("div",{className:"row no-gutters text-light mb-4 font-weight-300"},h.overview),r.a.createElement("div",{className:"row no-gutters mb-5"},r.a.createElement("div",{className:"col-auto mr-2"},h.release_date.substring(0,4),r.a.createElement("strong",{className:"px-3"},"\u2022"),h.genres.map((function(e){return e.name})).join("/"),r.a.createElement("strong",{className:"px-3"},"\u2022"),Oe(h.runtime)),r.a.createElement("div",{className:"col-auto mr-2"}),r.a.createElement("div",{className:"col-auto mr-2"})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-auto mr-3 btn-custom btn-custom-primary btn-small",onClick:function(){return E(!0)}},"Play Trailer"),r.a.createElement(xe,{movie:h,user:a})),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ke,{selected:!!a.ratings[h.id]&&"excellent_rate"===a.ratings[h.id].rate_type,movie:h,emoji:"fire",className:"mr-2 mb-2",value:t[h.id]?t[h.id].excellent_rate:0}),r.a.createElement(ke,{selected:!!a.ratings[h.id]&&"good_rate"===a.ratings[h.id].rate_type,movie:h,emoji:"heart",className:"mr-2 mb-2",value:t[h.id]?t[h.id].good_rate:0}),r.a.createElement(ke,{selected:!!a.ratings[h.id]&&"ok_rate"===a.ratings[h.id].rate_type,movie:h,className:"mr-2 mb-2",emoji:"heavy_division_sign",value:t[h.id]?t[h.id].ok_rate:0}),r.a.createElement(ke,{selected:!!a.ratings[h.id]&&"bad_rate"===a.ratings[h.id].rate_type,movie:h,emoji:"shit",value:t[h.id]?t[h.id].bad_rate:0}))),r.a.createElement("div",{className:"col-23 d-none d-lg-block"},r.a.createElement("div",{className:"row no-gutters h5 text-white",style:{padding:"6px 10px",background:"linear-gradient(to right, #ff0037, transparent)",borderRadius:"4px 0 0 4px",marginBottom:"11px"}},"Today's Recommendation"),r.a.createElement(He,{movies:u,user:a,ratings:t}))))),r.a.createElement("div",{className:"row no-gutters d-flex d-lg-none"},r.a.createElement("div",{className:" col-60 py-4 px-md-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters h5 text-white",style:{padding:"6px 10px",background:"linear-gradient(to right, #ff0037, transparent)",borderRadius:"4px 0 0 4px",marginBottom:"18px"}},"Todays's Recommendation"),r.a.createElement(He,{movies:u,user:a,ratings:t}))))),r.a.createElement(Be,{apiKey:c.movies_api_key}),r.a.createElement(Ze,null),r.a.createElement(Qe,null)))})),at=a(15);var nt=Object(p.b)((function(e,t){return Object(b.a)({settings:e.settings,ratings:e.ratings},t)}))((function(e){var t=e.open,a=e.onClose,c=e.movie,s=e.user,o=e.refreshReviews,m=e.settings,u=e.ratings,p=Object(n.useState)({review:"",rating:""}),v=Object(f.a)(p,2),g=v[0],E=v[1],b=Object(n.useState)(""),N=Object(f.a)(b,2),h=N[0],w=N[1],y=Object(n.useState)(!1),x=Object(f.a)(y,2),_=x[0],O=x[1];return r.a.createElement(ze,{open:t,onClose:a},r.a.createElement("div",{className:"col-xl-42 p-4 bg-over-root-lighter rounded mx-4"},r.a.createElement("div",{className:"row no-gutters h5 mb-4"},"Add Review - ",c.title," (",c.release_date.substring(0,4),")"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-3 d-none d-md-block"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(s.photo,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters d-flex d-md-none mb-3 justify-content-between"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded-circle bg-image",style:{backgroundImage:"url(".concat(s.photo,")")}})),r.a.createElement("div",{className:"d-flex align-items-end col-auto ".concat(g.review.split(" ").length<=m.no_review_words-1?"text-muted":"text-danger")},g.review?m.no_review_words-g.review.split(" ").length:m.no_review_words," ","words left")),r.a.createElement("div",{className:"row no-gutters mb-2",style:{height:"150px"}},r.a.createElement("textarea",{onChange:function(e){e.persist();var t=e.target.value;t.split(" ").length<=m.no_review_words&&E((function(e){return Object.assign({},e,{review:t})}))},value:g.review,spellCheck:!1,placeholder:"Add your review...",style:{resize:"none"},className:"w-100 h-100 textarea"})),r.a.createElement("div",{className:"row no-gutters justify-content-between mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ke,{allowRate:!0,size:"big",onClick:function(){return E((function(e){return Object.assign({},e,{rating:"excellent_rate"})}))},selected:"excellent_rate"===g.rating,emoji:"fire",className:"mr-2 mb-2",value:u[c.id]?u[c.id].excellent_rate:0}),r.a.createElement(ke,{allowRate:!0,size:"big",onClick:function(){return E((function(e){return Object.assign({},e,{rating:"good_rate"})}))},selected:"good_rate"===g.rating,emoji:"heart",className:"mr-2 mb-2",value:u[c.id]?u[c.id].good_rate:0}),r.a.createElement(ke,{allowRate:!0,size:"big",onClick:function(){return E((function(e){return Object.assign({},e,{rating:"ok_rate"})}))},selected:"ok_rate"===g.rating,emoji:"heavy_division_sign",className:"mr-2 mb-2",value:u[c.id]?u[c.id].ok_rate:0}),r.a.createElement(ke,{allowRate:!0,size:"big",onClick:function(){return E((function(e){return Object.assign({},e,{rating:"bad_rate"})}))},emoji:"shit",selected:"bad_rate"===g.rating,className:"mr-2",value:u[c.id]?u[c.id].bad_rate:0}))),r.a.createElement("div",{className:"d-none d-md-block col-auto ".concat(g.review.split(" ").length<=m.no_review_words-1?"text-muted":"text-danger")},g.review?m.no_review_words-g.review.split(" ").length:m.no_review_words," ","words left")),r.a.createElement("div",{className:"row no-gutters align-items-center text-danger justify-content-end",style:{height:"30px",opacity:h?1:0}},h),r.a.createElement("div",{className:"row no-gutters justify-content-md-end justify-content-center"},r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small position-relative",onClick:Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.rating){e.next=4;break}w("Select rating"),e.next=15;break;case 4:if(g.review){e.next=8;break}w("Review is empty"),e.next=15;break;case 8:return O(!0),e.next=11,I(g,c.id,s,m.movies_api_key);case 11:t=e.sent,O(!1),E({review:"",rating:""}),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Couldn't add your review",type:"failure",message:JSON.stringify(t.error).replace(/"/g,"")}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"You successfully writed review",type:"success",message:"Your review successfully added"}}),(n=Object(at.a)(s.watchedlist)).push({movie_id:c.id.toString()}),d.dispatch({type:"UPDATE_USER",userProperty:{watchedlist:n}}),a(),o());case 15:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:_,size:20}),"Submit"))))))}));var rt=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers},t)}))((function(e){var t=e.movie,a=e.user,c=e.publicUsers,s=e.addReviewTrigger,o=e.seekReviewId,m=e.seekCommentId,u=Object(n.useState)([]),p=Object(f.a)(u,2),v=p[0],g=p[1],E=Object(n.useState)([]),b=Object(f.a)(E,2),h=b[0],w=b[1],y=Object(n.useState)(-1),_=Object(f.a)(y,2),O=_[0],j=_[1],k=Object(n.useState)(-1),S=Object(f.a)(k,2),C=S[0],I=S[1],D=Object(n.useState)(-1),M=Object(f.a)(D,2),R=M[0],L=M[1],q=Object(n.useState)({}),W=Object(f.a)(q,2),B=W[0],H=W[1],G=Object(n.useState)({}),K=Object(f.a)(G,2),V=K[0],X=K[1],J=Object(n.useState)(m?o:-1),$=Object(f.a)(J,2),Z=$[0],Q=$[1],ee=Object(n.useState)(-1),te=Object(f.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(1),ce=Object(f.a)(re,2),se=ce[0],oe=ce[1],le=Object(n.useRef)(null),ie=Object(n.useState)(!1),me=Object(f.a)(ie,2),ue=me[0],de=me[1],pe=Object(n.useState)(""),ve=Object(f.a)(pe,2),ge=ve[0],Ee=ve[1],be=Object(n.useState)(!1),fe=Object(f.a)(be,2),Ne=fe[0],he=fe[1],xe=Object(n.useState)(!1),Oe=Object(f.a)(xe,2),je=Oe[0],ke=Oe[1],Se=Object(n.useState)(!1),Ce=Object(f.a)(Se,2),Ie=Ce[0],Te=Ce[1];Object(n.useEffect)((function(){s>=0&&de(!0)}),[s]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===Z){e.next=7;break}return e.next=3,Y(Z);case 3:t=e.sent,a={},t.forEach((function(e){a[e._id]=e})),X((function(e){return Object.assign({},e,Object(Ge.a)({},Z,a))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z,Ne]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var a,n,r,c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=12;break}return e.next=3,A(t.id);case 3:return a=e.sent,n=[],r={},a.error||a.forEach((function(e){n.push(e.content_id),r[e.content_id]=e})),H(r),e.next=10,T(t.id);case 10:(c=e.sent).error||(s=[],i=[],c.reverse().forEach((function(e){e._id===o?s.unshift(e):n.includes(e._id)?(e.promoted=!0,s.push(e)):i.push(e)})),w(s),g(i));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,je]);var Ae=-1===ae?1:ae;return r.a.createElement("div",{className:"row no-gutters"},v.length?r.a.createElement("div",{className:"col-60 h5 mb-3"},"Reviews (",_e(v.length,1),")"):"",r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-2",ref:le}),h.concat(v).slice(8*(Ae-1),8*(Ae-1)+8).map((function(e,t){var n=B[e._id]?B[e._id].content.rating:e.rating,s=B[e._id]?B[e._id].content.review:e.review;return r.a.createElement(r.a.Fragment,{key:"review-fragment-".concat(t)},r.a.createElement("div",{ref:function(t){m||e._id===o&&t&&!Ie&&(Te(!0),t.scrollIntoView({behavior:"smooth"}))},key:"review-".concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2".concat(e._id!==o||m?"":" fading-shadow")},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(c[e.author?e.author:e.content_author]?c[e.author?e.author:e.content_author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-1"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(c[e.author]?c[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},c[e.author]?c[e.author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY")))))),r.a.createElement(we,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(i.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.token){t.next=9;break}return L(e._id),t.next=4,F(a,e._id);case 4:n=t.sent,L(-1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review reported",message:"Review was successfully reported. We will review it soon.",type:"success"}}),t.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report review",type:"failure"}});case 10:case"end":return t.stop()}}),t)})))},R===e._id?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(x.d,{fontSize:"24px"})))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},r.a.createElement("div",{className:"text-break"},s)),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(N.a,{emoji:"excellent_rate"===n?"fire":"good_rate"===n?"heart":"ok_rate"===n?"heavy_division_sign":"shit",set:"facebook",size:24})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},C===t?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:C===t,size:20})):r.a.createElement(x.k,{onClick:Object(i.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a.token){n.next=13;break}if(a._id===e.author){n.next=10;break}return I(t),n.next=5,U(a,e._id);case 5:r=n.sent,I(-1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):ke(!je),n.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like you own review",type:"failure"}});case 11:n.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return n.stop()}}),n)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(x.b,{onClick:function(){Q(Z===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){return Ee(Object.assign({},e,{notificationReceivers:[c[e.author]]}))}},"Reply")))))),r.a.createElement(Xe.a,{in:Z===e._id,className:"mb-3"},r.a.createElement("div",{style:{marginLeft:"30px"},className:"h5 py-2"},"Comments (",V[e._id]?Object.values(V[e._id]).length:0,")"),V[e._id]?function e(t,n){return t.map((function(t,s){return V[n._id][t]?r.a.createElement(r.a.Fragment,{key:"comment-fragment-".concat(Z,"-").concat(s)},r.a.createElement("div",{ref:function(e){t===m&&e&&!Ie&&(Te(!0),e.scrollIntoView({behavior:"smooth"}))},style:{marginLeft:"".concat(60*V[n._id][t].notificationReceivers.length-30,"px")},key:"comment-".concat(Z,"-").concat(s),className:"indented-comment row no-gutters p-4 bg-over-root-lighter rounded mb-2".concat(t===m?" fading-shadow":"")},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(c[V[n._id][t].author]?c[V[n._id][t].author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(c[V[n._id][t].author]?c[V[n._id][t].author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 text-title-md mb-0"},c[V[n._id][t].author]?c[V[n._id][t].author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},Ve.a.format(new Date(V[n._id][t].date),"MMM DD, YYYY")))))),r.a.createElement(we,{arrow:!1,position:"top",trigger:"mouseenter",theme:"dark",content:function(e){return r.a.createElement("div",{className:"py-2 px-3 rounded bg-root"},"Report Abuse")}},r.a.createElement("div",{className:"col-auto text-muted btn-tertiary-small d-flex flex-center",onClick:Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=9;break}return L(t),e.next=4,z(a,t);case 4:n=e.sent,L(-1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment reported",message:"Comment was successfully reported. We will review it soon.",type:"success"}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to report comment",type:"failure"}});case 10:case"end":return e.stop()}}),e)})))},R===t?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:!0,size:20})):r.a.createElement(x.d,{fontSize:"24px"})))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},V[n._id][t].comment),r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},V[n._id][t].likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},O===s?r.a.createElement("div",{className:"square-20"},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:O===s,size:20})):r.a.createElement(x.k,{onClick:Object(i.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=13;break}if(a._id===V[n._id][t].author){e.next=10;break}return j(s),e.next=5,P(a,t);case 5:r=e.sent,j(-1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):he(!Ne),e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You can not like your own comment",type:"failure"}});case 11:e.next=14;break;case 13:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to like review",type:"failure"}});case 14:case"end":return e.stop()}}),e)}))),fontSize:"24px",className:"text-green scale-transition cursor-pointer"})),r.a.createElement("div",{className:"col-auto text-orange btn-tertiary",onClick:function(){a.token?Ee(Object.assign({},n,{comment_id:t,notificationReceivers:V[n._id][t].notificationReceivers.concat([c[V[n._id][t].author]])})):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Reply")))))),e(V[n._id][t].comments,n)):""}))}(Object.values(V[e._id]).filter((function(e){return 1===e.notificationReceivers.length})).map((function(e){return e._id})),e):"",r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil(V[e._id]?V[e._id].length/5:1),current:se,setCurrent:oe,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))})),r.a.createElement("div",{className:"row no-gutters justify-content-end pt-2"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(v.length/8),current:Ae,setCurrent:ne})),r.a.createElement(nt,{open:ue,onClose:function(){return de(!1)},movie:t,user:a,refreshReviews:function(){return ke(!je)}}),r.a.createElement($e,{refreshReviews:function(){return ke(!je)},setReviewIdOfVisibleComments:Q,refreshComments:function(){return he(!Ne)},setComments:X,movie:t,reviewAuthor:c[ge.author]?c[ge.author]:{display_name:""},review:ge,open:ge,onClose:function(){return Ee("")},user:a}))))})),ct=a(33);var st=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,ratings:e.ratings,settings:e.settings},t)}))((function(e){var t=e.match.params.movieId,a=e.ratings,c=e.settings.movies_api_key,s=e.match.params.reviewId,o=e.match.params.commentId,m=e.user,u=Object(n.useState)(-1),p=Object(f.a)(u,2),v=p[0],g=p[1],b=Object(n.useState)({poster_path:"",genres:[],title:"",overview:"",director:"",cast:[],runtime:0,release_date:"",id:""}),N=Object(f.a)(b,2),h=N[0],w=N[1],y=Object(n.useState)(!1),x=Object(f.a)(y,2),_=x[0],O=x[1];return Object(n.useEffect)((function(){h.title&&(R(h.id,c),h.id in a||d.dispatch({type:"UPDATE_RATINGS",rating:Object(Ge.a)({},h.id,{excellent_rate:0,ok_rate:0,bad_rate:0,good_rate:0,movie_poster:h.poster_path,movie_title:h.title,movie_genres:h.genres.map((function(e){return e.name})),movie_release_date:h.release_date})}))}),[h.title]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var a,n,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!c){e.next=14;break}return e.next=3,Ye(t,c);case 3:return a=e.sent,w((function(e){return Object.assign({},e,a)})),e.next=7,Me(t,c);case 7:n=e.sent,r=n.crew?n.crew.find((function(e){return"Director"===e.job})):null,s=r?r.name:"unknown",o=n.cast?n.cast.map((function(e){return e.name})):[],a.director=s,a.cast=o,w((function(e){return Object.assign({},e,{director:s,cast:o})}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.scrollTo(0,0),function(){e.apply(this,arguments)}()}),[t,c]),r.a.createElement("div",{className:"row no-gutters justify-content-center bg-movie-over-root position-relative"},r.a.createElement("div",{className:"position-absolute w-100 d-block d-lg-none",style:{top:0,left:0}},r.a.createElement("div",{className:"position-relative",style:{height:window.innerHeight,overflow:"hidden"}},r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{alt:h.poster_path,width:"100%",src:"https://image.tmdb.org/t/p/w342/".concat(h.poster_path)}),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgba(0, 0, 0, 0.3) 90%, black)",top:0,left:0}})),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgb(0 0 0 / 30%), black)",top:0,left:0}}))),r.a.createElement(ze,{open:_,onClose:function(){return O(!1)}},r.a.createElement(Pe,{movieId:t,onEnded:function(){return O(!1)}})),r.a.createElement("div",{className:"col-60 text-white px-md-5 py-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters mb-5"},r.a.createElement("div",{className:"col-auto mr-5 d-none d-lg-block"},r.a.createElement("div",{className:"w-100 position-relative"},r.a.createElement("img",{alt:h.poster_path,style:{borderRadius:"25px"},width:"300px",src:"https://image.tmdb.org/t/p/w342/".concat(h.poster_path)}),r.a.createElement("div",{onClick:function(){return E.push("/movie/".concat(h.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},r.a.createElement("div",{className:"square-60 rounded-circle d-flex flex-center play-btn",onClick:function(e){e.stopPropagation(),O(!0)}},r.a.createElement(Fe.k,{style:{fontSize:"35px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col position-relative"},r.a.createElement("div",{className:"row no-gutters position-relative",style:{zIndex:5}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters h5"},h.title," (",h.release_date.substring(0,4),")"),r.a.createElement("div",{className:"row no-gutters text-movie-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},h.genres.map((function(e){return e.name})).join("/"))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-auto font-weight-500 mr-2"},"Duration:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},Oe(h.runtime))),r.a.createElement("div",{className:"row no-gutters mb-4 text-light"},h.overview),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Director:"),r.a.createElement("div",{className:"col-auto mr-5 text-movie-muted"},h.director?h.director:"unknown"))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Cast:"),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"text-clamp-2 text-muted-light cursor-pointer",onClick:function(e){e.currentTarget.classList.contains("text-clamp-2")?e.currentTarget.classList.remove("text-clamp-2"):e.currentTarget.classList.add("text-clamp-2")}},h.cast.join("    "))))))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ke,{selected:!!m.ratings[h.id]&&"excellent_rate"===m.ratings[h.id].rate_type,movie:h,emoji:"fire",className:"mr-2 mb-2",value:a[h.id]?a[h.id].excellent_rate:0}),r.a.createElement(ke,{selected:!!m.ratings[h.id]&&"good_rate"===m.ratings[h.id].rate_type,movie:h,emoji:"heart",className:"mr-2 mb-2",value:a[h.id]?a[h.id].good_rate:0}),r.a.createElement(ke,{selected:!!m.ratings[h.id]&&"ok_rate"===m.ratings[h.id].rate_type,movie:h,className:"mr-2 mb-2",emoji:"heavy_division_sign",value:a[h.id]?a[h.id].ok_rate:0}),r.a.createElement(ke,{emoji:"shit",value:a[h.id]?a[h.id].bad_rate:0,selected:!!m.ratings[h.id]&&"bad_rate"===m.ratings[h.id].rate_type,movie:h})),r.a.createElement("div",{className:"row no-gutters mb-5"},r.a.createElement("div",{className:"col-auto mr-2"},"Release date:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},Ve.a.format(new Date(h.release_date),"MMMM DD, YYYY"))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-md-start"},r.a.createElement("div",{className:"col-auto mr-3 btn-custom btn-custom-primary btn-small",onClick:function(){m.token?g(v+1):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Add Review",r.a.createElement(ct.e,{fontSize:"20px",className:"ml-2"})),r.a.createElement(xe,{movie:h,user:m})))))),r.a.createElement(rt,{seekCommentId:o,seekReviewId:s,movie:h,user:m,addReviewTrigger:v})))}));var ot=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.reviews,a=e.publicUsers,c=e.ratings,s=Object(n.useState)(-1),o=Object(f.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(1),p=Object(f.a)(d,2),v=p[0],g=p[1],b=Object(n.useState)({}),h=Object(f.a)(b,2),w=h[0],y=h[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===m){e.next=5;break}return e.next=3,Y(m);case 3:t=e.sent,y((function(e){return Object.assign({},e,Object(Ge.a)({},m,t))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[m]),t.slice(0,8).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(t)},r.a.createElement("div",{key:"review-".concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,onClick:function(){return E.push("/movie/".concat(e.movie_id))},width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white h6 mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4)),r.a.createElement("div",{className:"row no-gutters text-muted"},r.a.createElement("div",{className:"text-truncate"},e.movie_genres))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2"},"Posted review on"),r.a.createElement("span",{className:"text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-size-14 flex-grow-0 font-weight-300"},e.review),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},e.rating?r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy-division-sign":"shit",set:"facebook",size:24})):"")),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(x.k,{fontSize:"24px",className:"text-green"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto"},r.a.createElement(x.b,{onClick:function(){u(m===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"}))))))))),r.a.createElement(Xe.a,{in:m===e._id,className:"mb-3"},r.a.createElement("div",{className:"ml-4 h5 py-2 text-white"},"Comments (",w[e._id]?w[e._id].length:0,")"),w[e._id]?w[e._id].slice(v*(v-1),v*(v-1)+5).map((function(e,t){return r.a.createElement("div",{key:"comment-".concat(m,"-").concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded ml-4 mb-2"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters align-items-center mb-2"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 h6 text-white mb-0"},a[e.author]?a[e.author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3"},e.comment),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(x.k,{fontSize:"24px",className:"text-green cursor-pointer"})))))))})):"",r.a.createElement("div",{className:"row no-gutters mt-2 justify-content-end"},r.a.createElement("div",{className:"col-auto ml-4"},r.a.createElement(Je,{count:Math.ceil(w[e._id]?w[e._id].length/5:1),current:v,setCurrent:g,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}})))))}))})),lt=function(e){var t={0:"All"};return e.forEach((function(e){e.genre_ids.forEach((function(a){var n=e.title?h.find((function(e){return e.id===a})):w.find((function(e){return e.id===a}));n&&n.name&&(a in t||(t[a]=n.name))}))})),t};var it=Object(p.b)((function(e,t){return Object(b.a)({settings:e.settings,search:e.search},t)}))((function(e){var t=e.search,a=e.settings,c=Object(n.useState)([]),s=Object(f.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)([]),p=Object(f.a)(u,2),v=p[0],g=p[1],E=Object(n.useState)([]),b=Object(f.a)(E,2),N=b[0],h=b[1],w=Object(n.useState)(0),y=Object(f.a)(w,2),x=y[0],_=y[1],O=Object(n.useState)(0),j=Object(f.a)(O,2),k=j[0],S=j[1],C=t.category,I=function(){d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:"You need to provide valid api key in admin dashboard",type:"failure"}})};Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.query){e.next=25;break}if("Reviews"!==C&&"All"!==C){e.next=8;break}return e.next=4,V(t.query);case 4:(n=e.sent).error||m(n),e.next=9;break;case 8:m([]);case 9:if("Movies"!==C&&"All"!==C){e.next=16;break}return e.next=12,Re(t.query,a.movies_api_key);case 12:(r=e.sent).results?g(r.results):I(),e.next=17;break;case 16:g([]);case 17:if("Series"!==C&&"All"!==C){e.next=24;break}return e.next=20,Ue(t.query,a.movies_api_key);case 20:(c=e.sent).results?h(c.results):I(),e.next=25;break;case 24:h([]);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var T=lt(v),A=lt(N);return r.a.createElement("div",{className:"row no-gutters justify-content-center bg-over-root",style:{minHeight:window.innerHeight}},r.a.createElement("div",{className:"col-60 d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters flex-grow-0"}),r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters flex-grow-1 justify-content-center"},r.a.createElement("div",{className:"col-60 p-5 text-white content-container d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters h4"},"Search Results"),r.a.createElement("div",{className:"row no-gutters text-muted border-bottom pb-3"},"Showing all results")),r.a.createElement("div",{className:"col-60"},v.length?r.a.createElement("div",{className:"row no-gutters h5 mb-2"},"Movies (",v.length,")"):"",r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-4"},r.a.createElement("div",{className:"col-auto"},Object.keys(T).length>1?r.a.createElement(qe.a,{style:{padding:"14px 0",width:"100%",overflowX:"auto",whiteSpace:"nowrap"}},Object.keys(T).map((function(e,t){return r.a.createElement("div",{onClick:function(){_(e)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(+x===+e?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},T[e])}))):""))),r.a.createElement("div",{className:"col-60"},v.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Le,{movies:v.filter((function(e){return e.genre_ids.includes(+x)||0===+x}))})):"",r.a.createElement("div",{className:"py-2 row no-gutters"}),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60"},N.length?r.a.createElement("div",{className:"row no-gutters h5 mb-2"},"Series (",N.length,")"):"",r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-4"},r.a.createElement("div",{className:"col-auto"},Object.keys(A).length>1?r.a.createElement(qe.a,{style:{padding:"14px 0",width:"100%",overflowX:"auto",whiteSpace:"nowrap"}},Object.keys(A).map((function(e,t){return r.a.createElement("div",{onClick:function(){S(e)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(+k===+e?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},A[e])}))):"")))),N.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Le,{movies:N.filter((function(e){return e.genre_ids.includes(+k)||0===+k}))})):"",r.a.createElement("div",{className:"py-2 row no-gutters"}),o.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters h5 mb-2"},"Reviews (",o.length,")"),r.a.createElement(ot,{reviews:o})):""))))))))}));var mt=function(e){return n.createElement("svg",Object.assign({fill:"transparent",id:"logo__svg8",viewBox:"0 0 98.1 111.451",height:"100%"},e),n.createElement("defs",{id:"logo__defs2"},n.createElement("clipPath",{clipPathUnits:"userSpaceOnUse",id:"logo__clipPath923"},n.createElement("rect",{id:"logo__rect925",width:595.99,height:569.726,x:359.033,y:144.727,ry:10.993,fill:"#14bf4f",fillOpacity:.52,strokeWidth:2.513,strokeLinecap:"square",paintOrder:"markers fill stroke"})),n.createElement("clipPath",{id:"logo__clipPath857",clipPathUnits:"userSpaceOnUse"},n.createElement("rect",{ry:11.18,y:200.285,x:462.025,height:421.234,width:370.77,id:"logo__rect859",fill:"#14bf4f",fillOpacity:.52,strokeWidth:2.443,strokeLinecap:"square",paintOrder:"markers fill stroke"}))),n.createElement("g",{id:"logo__layer1",transform:"translate(-52.373 -23.252)"},n.createElement("g",{id:"logo__g917",transform:"matrix(.26458 0 0 .26458 -69.87 -29.74)",clipPath:"url(#logo__clipPath857)"},n.createElement("path",{id:"logo__rect870",d:"M2-3h1286v1026H2z"}),n.createElement("g",{id:"logo__g894"},n.createElement("path",{id:"logo__path872",d:"M582.17 504.56c-.49.61-1.24.71-1.88 1.03-7.21 3.59-11.41 9.32-12.53 17.34-.5 3.58-.2 7.07.57 10.55.95 4.29 3.05 7.95 6.19 11.01.33.32.68.6 1 .93.28.29.36.64.07.96-.49.54-1.03 1.03-1.51 1.57-4.22 4.78-6.45 10.36-6.11 16.73.58 10.7 7.16 18.96 16.77 21.94.86.27 1.8.3 2.58.87.28.71-.29 1.17-.55 1.69-3.92 7.96-3.6 15.77.77 23.46.31.54.78 1 .83 1.69-.24.55-.76.33-1.16.37-.45.04-.91.01-1.36.01-12.73 0-25.46 0-38.19.01-3.46 0-6.91-.03-10.37.02-8.48.12-16.11-2.48-23.04-7.22-11.1-7.6-17.68-18.06-19.61-31.41-.2-1.35-.37-2.7-.37-4.07.01-16.55-.06-33.1.02-49.65.05-10.03 3.1-19.14 9.2-27.14 5.2-6.82 11.88-11.71 19.87-14.79 5.55-2.14 10.19-5.53 14.06-10.02 2.51-2.91 4.62-6.08 6.44-9.44 3.45-6.37 5.63-13.18 7.11-20.24 1.61-7.69 2.25-15.46 2.19-23.3-.03-4.01 1-7.74 3.02-11.18 3.25-5.51 7.97-9.16 14.2-10.7 12.53-3.11 25.43 6.37 26.53 18.57.59 6.57.3 13.07-.42 19.58-.59 5.33-1.33 10.64-2.39 15.9-1.48 7.32-3.67 14.43-6.41 21.38-.46 1.16-1.19 1.99-2.05 2.82-3.72 3.57-6.06 7.88-6.98 12.98-.98 5.4-.04 10.47 2.39 15.34.38.77 1.08 1.43 1.12 2.41z",className:"logo__st0"}),n.createElement("path",{id:"logo__path874",d:"M652.59 618.75c.16-1.11.69-1.64 1.07-2.24 3.91-6.12 5.54-12.8 4.79-20.02-.17-1.62-.61-3.21-.92-4.81-.1-.51.07-.89.6-1.03 1.41-.36 2.82-.7 4.23-1.06 21.37-5.42 40.31-15.44 56.69-30.21 18.45-16.63 31.25-36.94 39.23-60.38.5-1.46 1.02-2.92 1.4-4.41.5-1.9-.94-3.2-2.86-2.63-.69.2-1.35.54-2.02.82-5.52 2.33-11.09 4.56-16.8 6.41-5.55 1.8-11.23 3-17.03 3.61-3.89.41-7.79.67-11.67 1.12-2.31.27-4-.53-5.5-2.26-2-2.29-3.68-4.71-4.49-7.69-.9-3.32-.49-6.47.98-9.54.87-1.83 2.13-3.38 3.47-4.87.83-.92 1.86-1.43 3.1-1.52.82-.06 1.63-.17 2.44-.21 18.74-1.03 35.75-7.12 51-17.94 19.67-13.95 32.95-32.57 39.65-55.79 1.56-5.42 2.53-10.96 3.14-16.58 1.44-13.31-.37-26.29-3.84-39.11-3.07-11.32-7.82-21.88-14.66-31.46-8.18-11.45-18.57-20.38-30.88-27.12-8.24-4.51-16.89-8.05-26.01-10.37-.53-.13-1.06-.26-1.57-.44-.83-.28-1.14-1.31-.58-1.99.34-.42.76-.78 1.16-1.15 4.27-3.96 8.54-7.9 12.81-11.86 2.07-1.92 4.16-3.81 6.17-5.78.77-.76 1.49-.81 2.43-.44 5.08 2 10.07 4.2 14.84 6.85 29.34 16.29 49.33 40.48 60.49 72.02 3.13 8.85 4.97 18.02 5.89 27.38.72 7.26.86 14.54.29 21.79-2.11 26.66-11.41 50.53-28.29 71.35-2.06 2.54-4.26 4.98-6.51 7.35-2.94 3.09-4.53 6.72-4.99 10.94-3.71 34.36-17.62 64.25-39.98 90.31-14.67 17.09-32.59 29.96-52.98 39.44-13.08 6.08-26.69 10.52-40.91 13.05-1.05.2-2.13.3-3.38.47z",className:"logo__st1"}),n.createElement("path",{id:"logo__path876",d:"M478.72 519.92c-.5-.47-.63-1.11-.86-1.69-4.42-11.29-7.62-22.91-9.37-34.92-.58-3.95-1.23-7.9-1.91-11.84-.56-3.25-.51-6.52-.46-9.79.05-3.73.12-7.45.13-11.18.01-2.91.14-5.79.65-8.68 1.37-7.69 2.45-15.43 4.34-23.02 6.18-24.86 17.44-47.13 34.09-66.6 20.87-24.41 46.77-41.16 77.51-50.44 5.83-1.76 11.74-3.22 17.76-4.17 1.82-.29 3.12-1.07 4.32-2.47 7.94-9.33 17.04-17.38 27.25-24.18.3-.2.6-.4.91-.6 1.15-.71 1.24-.74 2.09.13 1.53 1.55 3.02 3.15 4.55 4.71.69.71.94 1.53.78 2.49-.07.45-.12.9-.21 1.35-1.42 7.12-2.87 14.24-4.27 21.37-.24 1.22-.76 2.17-1.72 2.98a51.582 51.582 0 00-3.59 3.34c-9.65 9.94-21.33 16.11-34.77 19.32-19.29 4.6-36.74 13.15-52.2 25.58-21.51 17.28-36.31 39.19-44.61 65.49-2.91 9.21-4.75 18.64-5.63 28.27-.67 7.36-.68 14.71-.26 22.07.27 4.8.84 9.6 1.83 14.32.29 1.4 0 2.36-.95 3.42-7.06 7.89-11.63 17.07-13.84 27.42-.38 1.77-.58 3.58-.88 5.38-.11.69.01 1.46-.68 1.94z",className:"logo__st1"}),n.createElement("path",{id:"logo__path878",d:"M684.32 203.33c.82.51.98 1.37 1.31 2.09 4.75 10.31 9.53 20.6 14.15 30.97.95 2.14 2.04 3.58 4.52 3.47 11.54 2 23.09 4.01 34.63 6.01.27.05.55.1.77.24.24.14.39.42.15.66-.57.58-1.17 1.14-1.78 1.69-8.21 7.59-16.44 15.16-24.64 22.77-2.32 2.15-2.39 1.45-1.86 5.14.8 5.57 1.64 11.14 2.45 16.72.89 6.11 1.76 12.23 2.63 18.34.05.35.01.72.01 1.09-.93.13-1.52-.54-2.19-.92-9.75-5.46-19.47-10.96-29.2-16.45-.32-.18-.67-.31-.95-.54-1.57-1.25-3.05-.99-4.77-.13-10.07 5.05-20.18 10-30.28 14.97-.87.43-1.77.79-2.66 1.19-.37-.88-.09-1.58.05-2.28 2.25-11.22 4.52-22.43 6.77-33.65.6-2.98.59-2.98-1.59-5.22-7.78-8.03-15.57-16.06-23.35-24.09-.62-.64-1.22-1.3-1.98-2.11.99-.54 1.88-.57 2.73-.67 8.48-.99 16.97-1.96 25.46-2.94 3.07-.35 6.13-.77 9.21-1.04 1.45-.13 2.24-.8 2.9-2.06 4.1-7.9 8.27-15.76 12.42-23.63 1.7-3.2 3.39-6.4 5.09-9.62z",className:"logo__st0"}),n.createElement("path",{id:"logo__path880",d:"M623.34 542.48h-36.81c-1.18 0-2.35 0-3.52-.28-4.03-.99-6.84-4.24-6.95-8.36-.1-4.09-.01-8.18-.03-12.27-.02-3.59 2.82-7.96 7.69-8.57.9-.11 1.81-.16 2.71-.16 24.72-.01 49.44-.01 74.16 0 .99 0 2 .05 2.98.22 4.14.73 7.22 4.1 7.36 8.28.14 4.18.14 8.36.01 12.54-.15 4.68-3.82 8.25-8.62 8.59-.81.06-1.64.02-2.45.02-12.17-.01-24.35-.01-36.53-.01z",className:"logo__st0"}),n.createElement("path",{id:"logo__path882",d:"M623.37 578.52h-36.8c-1.27 0-2.53 0-3.79-.34-3.89-1.04-6.62-4.26-6.72-8.27-.1-4.18-.11-8.36.01-12.54.12-4.17 3.25-7.6 7.35-8.28.98-.16 1.99-.22 2.98-.22 24.72-.01 49.43-.01 74.15 0 .91 0 1.82.04 2.71.17 4.27.62 7.51 4 7.67 8.29.15 4.17.14 8.36.01 12.54-.15 4.7-3.82 8.28-8.59 8.62-.81.06-1.64.02-2.45.02-12.17.01-24.35.01-36.53.01z",className:"logo__st0"}),n.createElement("path",{id:"logo__path884",d:"M620.62 505.62c-6.18 0-12.37-.02-18.55.01-3.5.02-6.64-.99-9.33-3.22-4.56-3.78-6.17-8.75-5.07-14.42 1.09-5.62 4.67-9.32 10.13-11.1 1.57-.51 3.21-.62 4.85-.62 11.91 0 23.82 0 35.74.01 5.36.01 9.69 2.09 12.85 6.47 5.14 7.13 2.02 19.96-8.82 22.6-1.13.28-2.35.25-3.52.26-6.1.02-12.19.01-18.28.01z",className:"logo__st0"}),n.createElement("path",{id:"logo__path886",d:"M619.47 614.55c-5.82 0-11.63-.01-17.45 0-2.46 0-4.65-.7-6.49-2.38-1.84-1.67-2.9-3.78-2.96-6.23-.1-4.09-.17-8.19.01-12.27.16-3.75 2.06-6.5 5.57-8.05 1.11-.49 2.28-.6 3.46-.61 1.91-.02 3.82-.01 5.73-.01h28.36c.82 0 1.64.01 2.45.03 4.74.12 8.34 4.48 8.33 8.5-.01 4 .06 8-.01 12-.08 5.04-3.7 8.74-8.74 9-1.36.07-2.73.02-4.09.02h-14.17z",className:"logo__st0"}),n.createElement("path",{id:"logo__path888",d:"M733.06 336.76c7.64-.27 16.28 5.85 16.29 16.22.01 10.03-8.33 16.74-16.61 16.68a16.298 16.298 0 01-16.24-16.62c.17-10.3 8.58-16.54 16.56-16.28z",className:"logo__st1"}),n.createElement("path",{id:"logo__path890",d:"M706.71 419.78c-5.31.04-11.12-4.33-11.9-9.26-.56-3.55.49-6.65 2.66-9.37 1.19-1.5 2.79-2.58 4.58-3.33 2.17-.9 4.39-1.15 6.63-.36 4.18 1.46 7.2 4.09 8.35 8.54.42 1.63.38 3.24-.12 4.82-1.38 4.33-4.03 7.44-8.55 8.69-.7.19-1.43.23-1.65.27z",className:"logo__st1"}),n.createElement("path",{id:"logo__path892",d:"M662.89 381.33c.18 4.2-3.56 9.55-8.04 10.98-1.69.54-3.44.61-5.12.19-3.8-.95-6.71-3.14-8.53-6.66-.82-1.59-.95-3.31-.8-5.05.58-6.87 6.71-11.24 12.19-10.68 5.47.56 10.36 5.78 10.3 11.22z",className:"logo__st1"})))),n.createElement("style",{id:"style868",type:"text/css"},".logo__st0{fill:#fbfbfb}.logo__st1{fill:#fd0040}"))},ut=[{name:"Settings",icon:x.j},{name:"User Management",icon:x.e},{name:"Reviews & Comments",icon:x.h},{name:"Announcements",icon:ct.a},{name:"Promotions",icon:Fe.j},{name:"Notifications",icon:Fe.b}],dt=function(e){var t=e.section,a=e.setSection,n=e.isMenuOpened,c=e.mobile,s=void 0!==c&&c;return r.a.createElement("div",{className:"row no-gutters bg-over-root-lighter text-white h-100 admin-menu"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center d-flex d-lg-none px-5 mb-4"},r.a.createElement("div",{className:"col-auto h3"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"square-50 mr-2"},r.a.createElement(mt,null)),r.a.createElement("div",{className:"col-auto logo text-title-lg"},"CozyPotato"))),r.a.createElement("div",{className:"col-auto"},r.a.createElement(x.f,{className:"cursor-pointer",fontSize:"34px",onClick:function(){d.dispatch({type:"SET_DASHBOARD_MENU_OPENED",isOpened:!n})}}))),ut.map((function(e,c){return r.a.createElement("div",{key:"left-menu-item-".concat(c),className:"row no-gutters px-4 mb-2",style:{borderLeft:t===c?"4px solid rgb(255, 0, 64)":"4px solid transparent"}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{onClick:function(){a(c),s&&d.dispatch({type:"SET_DASHBOARD_MENU_OPENED",isOpened:!n})},key:"menu-item-".concat(c),className:"align-items-center px-3 btn-custom text-left row no-gutters".concat(t===c?" bg-custom-primary":"")},r.a.createElement(e.icon,{className:"col-auto mr-2",fontSize:"24px"}),r.a.createElement("div",{className:"col-auto"},e.name))))}))))},pt=[{icon:ct.b,name:"Facebook"},{icon:ct.c,name:"Instagram"},{icon:ct.d,name:"Linkedin"},{icon:ct.f,name:"Twitter"}];var vt=Object(p.b)((function(e,t){return Object(b.a)({settings:e.settings},t)}))((function(e){var t=e.settings,a=Object(n.useState)(""),c=Object(f.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(!1),u=Object(f.a)(m,2),p=u[0],v=u[1],g=[{valid:(/^http/.test(t.FacebookLink)||""===t.FacebookLink)&&(/^http/.test(t.TwitterLink)||""===t.TwitterLink)&&(/^http/.test(t.LinkedinLinks)||""===t.LinkedinLink)&&(/^http/.test(t.InstagramLink)||""===t.InstagramLink),error:"Social link must start with http:// or https://"}];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters border-bottom pb-3 mb-5"},r.a.createElement("div",{className:"col-60 admin-screen-title"},"Settings"),r.a.createElement("div",{className:"col-60"},"Configuration settings for admin panel")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-sm-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Configure API for popular movies (main for now)"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{type:"text",placeholder:"Enter API key",value:t.movies_api_key,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{movies_api_key:e.target.value}})},className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Configure API for movie data"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.movie_data_api,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{movie_data_api:e.target.value}})},type:"text",placeholder:"Enter API key",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Configure API for latest movies"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{type:"text",placeholder:"Enter API key",value:t.latest_movies_api,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{latest_movies_api:e.target.value}})},className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of popular reviews to show"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_popular_reviews,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_popular_reviews:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of popular movies to show"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_popular_movies,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_popular_movies:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of Reviews allowed per day per user"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_allowed_reviews,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_allowed_reviews:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of characters allowed in comments"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_comment_characters,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_comment_characters:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-lg-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Number of words allowed in review"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.no_review_words,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{no_review_words:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-xl-40 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Background image refresh time (days, hours, minutes)"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-20 pr-3"},r.a.createElement("div",{className:"row no-gutters text-muted"},"days"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.bg_image_refresh_time_days,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{bg_image_refresh_time_days:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-20 pr-3"},r.a.createElement("div",{className:"row no-gutters text-muted"},"hours"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.bg_image_refresh_time_hours,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{bg_image_refresh_time_hours:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-20 "},r.a.createElement("div",{className:"row no-gutters text-muted"},"minutes"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{value:t.bg_image_refresh_time_minutes,onChange:function(e){e.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:{bg_image_refresh_time_minutes:e.target.value}})},min:0,type:"number",className:"px-3 input-light w-100"}))))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Current background movie"),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("img",{alt:t.current_bg_movie.backdrop_path,style:{maxWidth:"500px"},width:"100%",src:"https://image.tmdb.org/t/p/w500".concat(t.current_bg_movie.backdrop_path)})),r.a.createElement("div",{className:"row no-gutters mb-1"},"Title"),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("input",{disabled:!0,className:"input-light-disabled w-100 px-3",value:t.current_bg_movie.title})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-auto mr-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Set Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{disabled:!0,className:"input-light-disabled px-3",value:Ve.a.format(new Date(t.current_bg_movie.date_set),"YYYY-MM-DD @ hh:mm A")}))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Refresh Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{disabled:!0,className:"input-light-disabled px-3",value:Ve.a.format(new Date(t.current_bg_movie.date_set+6e4*t.bg_image_refresh_time_minutes+36e5*t.bg_image_refresh_time_hours+864e5*t.bg_image_refresh_time_days),"YYYY-MM-DD @ hh:mm A")})))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-small",onClick:Object(i.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.movies_api_key){e.next=9;break}return v(!0),e.next=4,n=t.movies_api_key,_("/changeBackgroundMovie",{apiKey:n});case 4:a=e.sent,v(!1),a.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:a.error,type:"failure"}}):d.dispatch({type:"UPDATE_SETTINGS",settings:{current_bg_movie:a}}),e.next=10;break;case 9:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You need to set movies api key to change background movie",type:"failure"}});case 10:case"end":return e.stop()}var n}),e)})))},p?r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:p,size:20}):"Refresh"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Set social links"),pt.map((function(e,a){return r.a.createElement("div",{className:"row no-gutters mb-2",key:"social-icons-settings-".concat(a)},r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement("div",{className:"square-40 rounded-circle bg-white d-flex flex-center"},r.a.createElement(e.icon,{fontSize:"24px",className:"text-dark"}))),r.a.createElement("div",{className:"col"},r.a.createElement("input",{spellCheck:!1,type:"text",placeholder:"Paste ".concat(e.name," link"),value:t["".concat(e.name,"Link")],onChange:function(t){t.persist(),d.dispatch({type:"UPDATE_SETTINGS",settings:Object(Ge.a)({},"".concat(e.name,"Link"),t.target.value)})},className:"px-3 input-light w-100"})))}))),r.a.createElement("div",{className:"col-60 mt-3"},r.a.createElement("div",{style:{height:"30px",opacity:s?1:0},className:"row no-gutters align-items-center text-danger"},s),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto"},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=g.filter((function(e){return!e.valid}))).length){e.next=5;break}o(a[0].error),e.next=10;break;case 5:return o(""),e.next=8,X(t);case 8:e.sent.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:"Settings were not updated",type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Settings updated!",message:"Settings were successfully updated",type:"success"}}),J((function(e){e.error||e.length&&d.dispatch({type:"UPDATE_SETTINGS",settings:e[0]})})));case 10:case"end":return e.stop()}}),e)})))},"Save"))))))))})),gt=function(e){var t=e.isMenuOpened,a=e.setSection,n=e.section;return r.a.createElement("div",{className:"d-block d-lg-none col-60 col-sm-40 col-md-30 col-lg-20 col-xl-15 vh-100 zindex-99 ".concat(t?"":"zindex-0-1"),style:{position:"fixed",right:0,top:0}},r.a.createElement("div",{className:"w-100 h-100 position-relative"},r.a.createElement("div",{className:"container-fluid px-0",style:{height:"100%",width:"100%",right:t?0:"-100%",transition:"right 0.3s",position:"absolute",zIndex:10,background:"white"}},r.a.createElement(dt,{mobile:!0,className:"text-white bg-internly-90 col-12",section:n,isMenuOpened:t,setSection:a}))))},Et=a(193),bt=a.n(Et),ft=function(e){var t=e.items,a=e.btnName,c=e.className,s=void 0===c?"":c,o=e.multipleSelect,l=void 0!==o&&o,i=e.popoverClass,m=void 0===i?"":i,u=(e.popoverWidth,e.onSelect),d=void 0===u?function(){}:u,p=Object(n.useState)(!1),v=Object(f.a)(p,2),g=v[0],E=v[1],b=Object(n.useRef)(null);return r.a.createElement(we,{className:m,arrow:!1,onOpen:function(){return E(!0)},onHide:function(){return E(!1)},content:function(e){return r.a.createElement("div",{className:"bg-white",style:{maxHeight:"400px",overflowY:"auto",width:e}},t.map((function(e,t){return r.a.createElement("div",{key:bt()(),className:"popover-item w-100",onClick:function(){d(t),l||b.current.click()}},r.a.createElement("div",null,e.item?e.item:e))})))}},r.a.createElement("div",{ref:b,className:"cursor-pointer user-select-none d-flex justify-content-between align-items-center "+s},r.a.createElement("div",{className:"mr-2"},a),r.a.createElement(x.a,{fontSize:"16px",strokeWidth:"1.5px",className:"text-internly",style:{transform:"rotate(".concat(g?"180deg":"0deg",")"),transition:"transform 0.3s"}})))},Nt=a(197),ht=a(357),wt=a(366),yt=Object(Nt.a)({palette:{primary:{main:"rgb(255, 0, 64)"},secondary:{main:"#202020"}}}),xt=function(e){return r.a.createElement(ht.a,{theme:yt},r.a.createElement(wt.a,e))},_t=a(38);var Ot=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.setEditReviewSection,a=e.setEditReview,c=e.publicUsers,s=e.ratings,o=Object(n.useState)(""),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(f.a)(v,2),b=g[0],h=g[1],w=Object(n.useState)("User"),y=Object(f.a)(w,2),x=y[0],_=y[1],O=Object(n.useState)(0),j=Object(f.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)(1),I=Object(f.a)(C,2),T=I[0],A=I[1],D=Object(n.useState)(""),Y=Object(f.a)(D,2),M=Y[0],R=Y[1],U=Object(n.useState)(""),P=Object(f.a)(U,2),F=P[0],z=P[1],L=Object(n.useState)({key:"",value:""}),q=Object(f.a)(L,2),W=q[0],B=q[1],H=Object(n.useState)([]),G=Object(f.a)(H,2),K=G[0],V=G[1],X=Object(n.useState)([]),J=Object(f.a)(X,2),$=J[0],Q=J[1],ee=Object(n.useState)(!1),te=Object(f.a)(ee,2),ne=te[0],re=te[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:(t=e.sent).error||V(t.reverse().map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ne]),Object(n.useEffect)((function(){var e=Object(at.a)(K);K.length&&(F&&("User"===x?e=e.filter((function(e){return c[e.author].display_name.toLowerCase().includes(F.toLowerCase())})):"Review"===x?e=e.filter((function(e){return e.review.toLowerCase().includes(F.toLowerCase())})):"Movie"===x&&(e=e.filter((function(e){return s[e.movie_id]&&s[e.movie_id].movie_title.toLowerCase().includes(F.toLowerCase())})))),M&&(e=e.filter((function(e){return c[e.author].role===M}))),"role"===W.key&&W.value&&(e=e.filter((function(e){return c[e.author][W.key]===W.value}))),e="deleted"===W.key&&W.value?e.filter((function(e){return e.deleted===W.value})):e.filter((function(e){return!e.deleted})),Q(e))}),[F,M,K,W]);var ce=[5*(T-1),5*(T-1)+5];ce[1]>=$.length&&(ce[1]=ce[1]-(ce[1]-$.length));var se=function(){var e=Object(i.a)(l.a.mark((function e(){var n,r,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>0&&void 0!==s[0]&&s[0]&&R("All"===b?"":b),"Edit"!==u){e.next=7;break}(n=$.filter((function(e){return e.selected}))).length&&(a(n[0]),t()),e.next=15;break;case 7:if("Delete"!==u){e.next=15;break}if(!(r=$.filter((function(e){return e.selected}))).length){e.next=15;break}return e.next=12,ae(r.map((function(e){return e._id})));case 12:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Reviews were deleted",message:"Reviews were successfully deleted",type:"success"}}),re(!ne);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=["Title","Review","Rating","Posted on","Reported"];return r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"col-auto cursor-pointer ".concat(W.key||M?"text-dark":"text-primary"),onClick:function(){B({key:"",value:""}),R("")}},"All (",K.filter((function(e){return!e.deleted})).length,")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return B((function(e){return Object.assign({},e,{key:"role",value:"Administrator"})}))},className:"cursor-pointer col-auto ".concat("role"===W.key&&"Administrator"===W.value?"text-primary":"text-dark")},"By Administrators (",Object.values(c).length?K.filter((function(e){return c[e.author]&&"Administrator"===c[e.author].role&&!e.deleted})).length:"",")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return B((function(e){return Object.assign({},e,{key:"deleted",value:!0})}))},className:"cursor-pointer col-auto ".concat("deleted"===W.key&&!0===W.value?"text-primary":"text-dark")},"Deleted (",K.filter((function(e){return e.deleted})).length,")")),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(["Delete"][e])},items:["Delete"],btnName:u||"Select Action",className:"input-light px-3 col-auto "}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return h(["All","Administrator","User"][e])},items:["All","Administrator","User"],btnName:b||"Select Role",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return se(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return _(["User","Review","Movie"][e])},className:"input-light col-60",items:["User","Review","Movie"],btnName:"Search by ".concat(x)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:F,onChange:function(e){e.persist(),z(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{onSelect:function(e){return _(["User","Review","Movie"][e])},className:"table-input-prepend-select col-auto",items:["User","Review","Movie"],btnName:"Search by ".concat(x)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:F,onChange:function(e){e.persist(),z(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(_t.a,{style:{minWidth:"100%"},onSwipedLeft:function(){S(k+1<4?k+1:k)},onSwipedRight:function(){S(k-1>=0?k-1:k)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:K.slice(ce[0],ce[1]).filter((function(e){return e.selected})).length===ce[1]-ce[0],onChange:function(e){Q((function(t){for(var a=Object(at.a)(t),n=ce[0];n<ce[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},oe[k]),oe.map((function(e,t){return r.a.createElement("th",{key:"header-col-".concat(t),className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,$.length?$.slice(5*(T-1),5*(T-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:e.selected,onChange:function(e){Q((function(t){var a=Object(at.a)(t);return a[5*(T-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",null,c[e.author]?r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c[e.author].photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"h6 text-primary"},c[e.author].display_name),r.a.createElement("div",{className:"mb-2"},c[e.author].email),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){a(e),t()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae([e._id]);case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review was deleted",message:"Review was successfully deleted",type:"success"}}),re(!ne);case 5:case"end":return t.stop()}}),t)})))},"Delete"))))):""),r.a.createElement("td",{className:"".concat(0===k?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{maxWidth:"150px"}},s[e.movie_id]?s[e.movie_id].movie_title:"")),r.a.createElement("td",{className:"".concat(1===k?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,r.a.createElement("div",{style:{minWidth:"200px"},className:"cursor-pointer user-select-none btn-link text-clamp-4",onClick:function(t){E.push("/movie/".concat(e.movie_id,"/").concat(e._id))}},e.review))),r.a.createElement("td",{className:"".concat(2===k?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy_division_sign":"shit",set:"facebook",size:24}))),r.a.createElement("td",{className:"".concat(3===k?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.date),"DD/MM/YYYY @ hh:mm A"))),r.a.createElement("td",{className:"".concat(4===k?"d-table-cell":"d-none d-xl-table-cell")},e.reported?r.a.createElement("div",{className:"text-danger"},"Abused"):r.a.createElement("div",{className:"text-success"},"No")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil($.length/5),current:T,setCurrent:A})))))}));var jt=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.setEditCommentSection,a=e.setEditComment,c=e.publicUsers,s=e.ratings,o=Object(n.useState)(""),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(f.a)(v,2),b=g[0],N=g[1],h=Object(n.useState)("User"),w=Object(f.a)(h,2),y=w[0],x=w[1],_=Object(n.useState)(0),O=Object(f.a)(_,2),j=O[0],k=O[1],S=Object(n.useState)(1),C=Object(f.a)(S,2),I=C[0],T=C[1],A=Object(n.useState)(""),D=Object(f.a)(A,2),Y=D[0],M=D[1],R=Object(n.useState)({key:"",value:""}),U=Object(f.a)(R,2),P=U[0],F=U[1],z=Object(n.useState)(""),L=Object(f.a)(z,2),q=L[0],W=L[1],B=Object(n.useState)([]),H=Object(f.a)(B,2),G=H[0],K=H[1],V=Object(n.useState)({}),X=Object(f.a)(V,2),J=X[0],$=X[1],Z=Object(n.useState)([]),ee=Object(f.a)(Z,2),te=ee[0],ae=ee[1],re=Object(n.useState)(!1),ce=Object(f.a)(re,2),se=ce[0],oe=ce[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:(t=e.sent).error||(K(t.reverse().map((function(e){return Object.assign({},e,{selected:!1})}))),a={},t.forEach((function(e){a[e._id]=e})),$(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[se]),Object(n.useEffect)((function(){var e=Object(at.a)(G);G.length&&(q&&("User"===y?e=e.filter((function(e){return c[e.author].display_name.toLowerCase().includes(q.toLowerCase())})):"Comment"===y&&(e=e.filter((function(e){return e.comment.toLowerCase().includes(q.toLowerCase())})))),Y&&(e=e.filter((function(e){return c[e.author].role===Y}))),"role"===P.key&&P.value&&(e=e.filter((function(e){return c[e.author][P.key]===P.value}))),e="deleted"===P.key&&P.value?e.filter((function(e){return e.deleted===P.value})):e.filter((function(e){return!e.deleted})),ae(e))}),[q,Y,G,P]);var le=[5*(I-1),5*(I-1)+5];le[1]>=te.length&&(le[1]=le[1]-(le[1]-te.length));var ie=function(){var e=Object(i.a)(l.a.mark((function e(){var n,r,c,s,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.length>0&&void 0!==o[0]&&o[0]&&M("All"===b?"":b),!(n=te.filter((function(e){return e.selected}))).length){e.next=17;break}if("Edit"!==u){e.next=9;break}a(n[0]),t(),e.next=17;break;case 9:return r=n.map((function(e){return e._id})),c=Object(at.a)(r),function e(t){c=c.concat(t),t.forEach((function(t){return e(J[t].comments)}))}(r),e.next=15,ne(c);case 15:(s=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:s.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comments were deleted",message:"Comments were successfully deleted",type:"success"}}),oe(!se));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"col-auto cursor-pointer ".concat(P.key||Y?"text-dark":"text-primary"),onClick:function(){F({key:"",value:""}),M("")}},"All (",G.filter((function(e){return!e.deleted})).length,")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return F((function(e){return Object.assign({},e,{key:"role",value:"Administrator"})}))},className:"cursor-pointer col-auto ".concat("role"===P.key&&"Administrator"===P.value?"text-primary":"text-dark")},"By Administrators (",Object.values(c).length?G.filter((function(e){return"Administrator"===c[e.author].role&&!e.deleted})).length:"",")"),r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return F((function(e){return Object.assign({},e,{key:"deleted",value:!0})}))},className:"cursor-pointer col-auto ".concat("deleted"===P.key&&!0===P.value?"text-primary":"text-dark")},"Deleted (",G.filter((function(e){return e.deleted})).length,")")),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(["Delete"][e])},items:["Delete"],btnName:u||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return N(["All","Administrator","User"][e])},items:["All","Administrator","User"],btnName:b||"Select Role",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return ie(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return x(["User","Comment"][e])},className:"input-light col-60",items:["User","Comment"],btnName:"Search by ".concat(y)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:q,onChange:function(e){e.persist(),W(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{onSelect:function(e){return x(["User","Comment"][e])},className:"table-input-prepend-select col-auto",items:["User","Comment"],btnName:"Search by ".concat(y)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:q,onChange:function(e){e.persist(),W(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(_t.a,{style:{minWidth:"100%"},onSwipedLeft:function(){k(j+1<4?j+1:j)},onSwipedRight:function(){k(j-1>=0?j-1:j)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:te.slice(le[0],le[1]).filter((function(e){return e.selected})).length===le[1]-le[0],onChange:function(e){ae((function(t){for(var a=Object(at.a)(t),n=le[0];n<le[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},["Comment","In Repsonse To","Posted On","Reported"][j]),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Comment")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"In Response To")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Posted On")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Reported")))),r.a.createElement("tbody",null,te.length?te.slice(5*(I-1),5*(I-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:e.selected,onChange:function(e){ae((function(t){var a=Object(at.a)(t);return a[5*(I-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",null,r.a.createElement("div",null,c[e.author]?r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(c[e.author].photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"text-primary"},c[e.author].display_name),r.a.createElement("div",{className:"mb-2"},c[e.author].email),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){a(e),t()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(i.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[e._id],function e(t){a=a.concat(t),t.forEach((function(t){return e(J[t].comments)}))}(a),t.next=5,ne(a);case 5:(n=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Comment was deleted",message:"Comment was successfully deleted",type:"success"}}),oe(!se);case 8:case"end":return t.stop()}}),t)})))},"Delete")))):"")),r.a.createElement("td",{className:"".concat(0===j?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,r.a.createElement("div",{style:{minWidth:"200px"},className:"cursor-pointer user-select-none btn-link text-clamp-4",onClick:function(t){E.push("/movie/".concat(e.movie_id,"/").concat(e.review_id,"/").concat(e._id))}},e.comment))),r.a.createElement("td",{className:"".concat(1===j?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,"Movie:"," ",s[e.movie_id]?s[e.movie_id].movie_title:""),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{onClick:Object(i.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E.push("/movie/".concat(e.movie_id,"/").concat(e.review_id));case 1:case"end":return t.stop()}}),t)}))),className:"text-primary cursor-pointer",style:{whiteSpace:"nowrap"}},"View Review"))),r.a.createElement("td",{className:"".concat(2===j?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.date),"DD/MM/YYYY @ hh:mm A"))),r.a.createElement("td",{className:"".concat(3===j?"d-table-cell":"d-none d-xl-table-cell")},e.reported?r.a.createElement("div",{className:"text-danger"},"Abused"):r.a.createElement("div",{className:"text-success"},"No")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:"text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil(te.length/5),current:I,setCurrent:T})))))})),kt=function(e){var t=e.setEditReview,a=e.setEditReviewSection,c=e.setEditCommentSection,s=e.setEditComment,o=(e.containerSpacing,Object(n.useState)(0)),l=Object(f.a)(o,2),i=l[0],m=l[1];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto pb-3"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Reviews & Comments"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit or delete reviews and comments")),r.a.createElement("div",{className:"col-auto py-3"},r.a.createElement("div",{className:"row no-gutters cursor-pointer"},r.a.createElement("div",{style:{width:"150px"},onClick:function(){return m(0)},className:"rounded-left col table-btn".concat(0===i?" table-btn-selected":"")},"Reviews"),r.a.createElement("div",{style:{width:"150px"},onClick:function(){return m(1)},className:"rounded-right col table-btn".concat(1===i?" table-btn-selected":"")},"Comments"))))),r.a.createElement("div",{className:"col-60"},0===i?r.a.createElement(Ot,{setEditReviewSection:a,setEditReview:t}):r.a.createElement(jt,{setEditComment:s,setEditCommentSection:c})))};var St=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.currentReview,a=e.publicUsers,c=e.getBack,s=e.ratings,o=Object(n.useState)({}),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)({display_name:"",email:""}),g=Object(f.a)(v,2),E=g[0],b=g[1],N=Object(n.useState)(!1),h=Object(f.a)(N,2),w=h[0],x=h[1];Object(n.useEffect)((function(){t&&(p(t),b(a[t.author]))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var _=Object.values(s).map((function(e){return e.movie_title}));return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Reviews & Comments"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit and delete reviews and comments")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"input-light w-100 px-3",value:E.display_name,onChange:function(e){e.persist(),b((function(t){return Object.assign({},t,{display_name:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Message"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:u.review?u.review:"",onChange:function(e){e.persist(),p((function(t){return Object.assign({},t,{review:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Rating")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-md-30 col-60",className:"input-light px-3",btnName:u.rating?y.find((function(e){return e.name===u.rating})).element:"Select",onSelect:function(e){p((function(t){return Object.assign({},t,{rating:y[e].name})}))},items:y.map((function(e){return e.element}))}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Report status")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-md-30 col-60",className:"input-light px-3",btnName:u.reported?"Reported":"Not Reported",onSelect:function(e){p((function(t){return Object.assign({},t,{reported:0===e})}))},items:["Reported","Not Reported"]}))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Movie name")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-md-30 col-60",className:"input-light px-3",btnName:u.movie_title?u.movie_title:"Select",onSelect:function(e){p((function(t){return Object.assign({},t,{movie_title:_[e]})}))},items:_}))),r.a.createElement("div",{className:"col-60 mt-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return c()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,ee(u,E);case 3:t=e.sent,x(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review updated",message:"Review was successfully updated",type:"success"}}),c());case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:w,size:20}),"Save"))))}));var Ct=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers},t)}))((function(e){var t=e.currentComment,a=e.publicUsers,c=e.getBack,s=Object(n.useState)({}),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)({display_name:"",email:""}),v=Object(f.a)(p,2),g=v[0],E=v[1],b=Object(n.useState)(!1),N=Object(f.a)(b,2),h=N[0],w=N[1];return Object(n.useEffect)((function(){t&&(u(t),E(a[t.author]))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters p-md-5 p-4",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Reviews & Comments"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit and delete reviews and comments")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"input-light w-100 px-3",value:g.display_name,onChange:function(e){e.persist(),E((function(t){return Object.assign({},t,{display_name:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Comment"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:m.comment,onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{comment:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"60 mb-1"},"Report status")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-md-30 col-60",className:"input-light px-3",btnName:m.reported?"Reported":"Not Reported",onSelect:function(e){u((function(t){return Object.assign({},t,{reported:0===e})}))},items:["Reported","Not Reported"]}))),r.a.createElement("div",{className:"col-60 mt-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return c()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,te(m,g);case 3:t=e.sent,w(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Review updated",message:"Review was successfully updated",type:"success"}}),c());case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:h,size:20}),"Save"))))}));var It=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers},t)}))((function(e){var t=e.setEditAnnouncement,a=e.setEditAnnouncementSection,c=e.setAddNewAnouncementSection,s=e.publicUsers,o=Object(n.useState)(""),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(f.a)(v,2),E=g[0],b=g[1],N=Object(n.useState)("User"),h=Object(f.a)(N,2),w=h[0],y=h[1],x=Object(n.useState)(0),_=Object(f.a)(x,2),O=_[0],j=_[1],k=Object(n.useState)(1),S=Object(f.a)(k,2),C=S[0],I=S[1],T=Object(n.useState)(""),A=Object(f.a)(T,2),D=A[0],Y=A[1],M=Object(n.useState)(""),R=Object(f.a)(M,2),U=R[0],P=R[1],F=Object(n.useState)({key:"",value:""}),z=Object(f.a)(F,2),L=z[0],q=z[1],W=Object(n.useState)(!1),B=Object(f.a)(W,2),H=B[0],G=B[1],K=Object(n.useState)([]),V=Object(f.a)(K,2),X=V[0],J=V[1],$=Object(n.useState)([]),Z=Object(f.a)($,2),Q=Z[0],ee=Z[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:(t=e.sent).error||J(t.map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[H]),Object(n.useEffect)((function(){var e=Object(at.a)(X);X.length&&(U&&("User"===w?e=e.filter((function(e){return s[e.author].display_name.toLowerCase().includes(U.toLowerCase())})):"Description"===w&&(e=e.filter((function(e){return e.description.toLowerCase().includes(U.toLowerCase())})))),D&&(e=e.filter((function(e){return e.type===D}))),L.key&&(e=e.filter((function(e){return e[L.key]===L.value}))),ee(e))}),[U,D,X,L]);var te=[5*(C-1),5*(C-1)+5];te[1]>=Q.length&&(te[1]=te[1]-(te[1]-Q.length));var ae=["Delete"],ne=function(){var e=Object(i.a)(l.a.mark((function e(){var n,r,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>0&&void 0!==s[0]&&s[0]&&Y(E),"Edit"!==u){e.next=7;break}(n=Q.filter((function(e){return e.selected}))).length&&(t(n[0]),a()),e.next=15;break;case 7:if("Delete"!==u){e.next=15;break}if(!(r=Q.filter((function(e){return e.selected}))).length){e.next=15;break}return e.next=12,oe(r.map((function(e){return e._id})));case 12:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcements were deleted",message:"Announcements were successfully deleted",type:"success"}}),G(!H);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=["Information","Error","Warning"];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Announcements"),r.a.createElement("div",{className:"row no-gutters"},"Create and post announcements")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return c()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{onClick:function(){q({key:"",value:""}),b(""),Y("")},className:"cursor-pointer col-auto ".concat(D||L.key?"text-dark":"text-primary")},"All (",X.length,")"),["Published","Drafted","Expired"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return q((function(t){return Object.assign({},t,{key:"status",value:e})}))},className:"cursor-pointer col-auto ".concat("status"===L.key&&L.value===e?"text-primary":"text-dark")},e," (",X.filter((function(t){return t.status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(ae[e])},items:ae,btnName:u||"Select Action",className:"input-light px-3 col-auto "}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return b(re[e])},items:re,btnName:E||"Select Type",className:"input-light px-3 col-auto "}))),r.a.createElement("div",{onClick:function(){return ne(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return y(["User","Description"][e])},className:"input-light col-60",items:["User","Description"],btnName:"Search by ".concat(w)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:U,onChange:function(e){e.persist(),P(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{onSelect:function(e){return y(["User","Description"][e])},className:"table-input-prepend-select col-auto",items:["User","Description"],btnName:"Search by ".concat(w)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:U,onChange:function(e){e.persist(),P(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(_t.a,{style:{minWidth:"100%"},onSwipedLeft:function(){j(O+1<4?O+1:O)},onSwipedRight:function(){j(O-1>=0?O-1:O)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:Q.slice(te[0],te[1]).filter((function(e){return e.selected})).length===te[1]-te[0],onChange:function(e){ee((function(t){for(var a=Object(at.a)(t),n=te[0];n<te[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},["Type","Description","Duration","Status"][O]),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Type")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Description")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Duration")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Status")))),r.a.createElement("tbody",null,Q.length?Q.slice(5*(C-1),5*(C-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:e.selected,onChange:function(e){ee((function(t){var a=Object(at.a)(t);return a[5*(C-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",null,Object.values(s).length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(s[e.author].photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"text-primary"},s[e.author].display_name),r.a.createElement("div",{className:"mb-3"},s[e.author].email),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),a()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe([e._id]);case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcement was deleted",message:"Announcement was successfully deleted",type:"success"}}),G(!H);case 5:case"end":return t.stop()}}),t)})))},"Delete")))))):""),r.a.createElement("td",{className:"".concat("Warning"===e.type?"text-warning":"Information"===e.type?"text-primary":"Error"===e.type?"text-danger":"").concat(0===O?" d-table-cell":" d-none d-xl-table-cell")},r.a.createElement("div",null,e.type)),r.a.createElement("td",{className:"".concat(1===O?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{minWidth:"150px"},className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.description)),r.a.createElement("td",{className:"".concat(2===O?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",null,"From: "),r.a.createElement("div",null,"To: ")),r.a.createElement("div",{className:"d-inline-block"},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.start_date),"DD/MM/YYYY @ hh:mm A"),r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.end_date),"DD/MM/YYYY @ hh:mm A")))))),r.a.createElement("td",{className:"".concat(3===O?"d-table-cell":"d-none d-xl-table-cell")},e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil(Q.length/5),current:C,setCurrent:I})))))))})),Tt=a(31),At=a.n(Tt),Dt=(a(76),a(32)),Yt=a.n(Dt),Mt=function(e){var t=e.currentAnnouncement,a=e.getBack,c=Object(n.useState)({description:"",type:"",start_date:Date.now(),end_date:Date.now(),status:""}),s=Object(f.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(!1),p=Object(f.a)(u,2),v=p[0],g=p[1];Object(n.useEffect)((function(){t&&m(t)}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var E=["Information","Warning","Error"],b=["Published","Drafted","Expired"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Announcements"),r.a.createElement("div",{className:"row no-gutters"},"Edit existing announcement")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{type:E[e]})}))},className:"w-100 input-light px-3",items:E,btnName:o.type?o.type:"Select"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:o.description?o.description:"",onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(o.description.split(" ").length<=499?"text-muted":"text-danger")},o.description?500-o.description.split(" ").length:500," ","words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(o.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(o.start_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(o.start_date)}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(o.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(o.end_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(o.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:b[e]})}))},className:"w-100 input-light px-3",items:b,btnName:o.status?o.status:"Select"}))))),r.a.createElement("div",{className:"col-60 mt-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,le(o);case 3:t=e.sent,g(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcement updated",message:"Announcement was successfully updated",type:"success"}}),a());case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:v,size:20}),"Save"))))};var Rt=Object(p.b)((function(e,t){return Object(b.a)({user:e.user},t)}))((function(e){var t=e.user,a=e.getBack,c=Object(n.useState)({description:"",type:"",start_date:Date.now(),end_date:Date.now(),status:"Published"}),s=Object(f.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(""),p=Object(f.a)(u,2),v=p[0],g=p[1],E=Object(n.useState)(!1),b=Object(f.a)(E,2),N=b[0],h=b[1],w=["Information","Warning","Error"],y=["Published","Drafted","Deleted"],x=[{valid:o.description,error:"Description is required"},{valid:o.type,error:"Type is required"},{valid:o.start_date<o.end_date,error:"Start date must be before end date"},{valid:o.start_date!==o.end_date,error:"Announcement duration is 0"}];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Announcements"),r.a.createElement("div",{className:"row no-gutters"},"Creat a brand new announcement and add to this site")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{type:w[e]})}))},className:"w-100 input-light px-3",items:w,btnName:o.type?o.type:"Select"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:o.description?o.description:"",onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(o.description.split(" ").length<=499?"text-muted":"text-danger")},o.description?500-o.description.split(" ").length:500," ","words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(o.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(o.start_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(o.start_date)}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(o.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(o.end_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(o.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:y[e]})}))},className:"w-100 input-light px-3",items:y,btnName:o.status?o.status:"Select"}))))),r.a.createElement("div",{className:"col-60 mt-3"},r.a.createElement("div",{style:{height:"50px",opacity:v?1:0},className:"row no-gutters align-items-center text-danger"},v),r.a.createElement("div",{className:"row no-gutters mt-2"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=14;break}if(!(n=x.filter((function(e){return!e.valid}))).length){e.next=6;break}g(n[0].error),e.next=12;break;case 6:return h(!0),e.next=9,se(Object.assign({},o,{author:t._id}));case 9:r=e.sent,h(!1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Announcement created",message:"You successfully created announcement",type:"success"}}),a());case 12:e.next=15;break;case 14:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to create announcements",type:"failure"}});case 15:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:N,size:20}),"Save"))))}));var Ut=Object(p.b)((function(e,t){return Object(b.a)({ratings:e.ratings},t)}))((function(e){var t=e.setEditPromotion,a=e.setAddNewPromotionSection,c=e.setEditPromotionSection,s=(e.ratings,Object(n.useState)("")),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),g=v[0],b=v[1],h=Object(n.useState)("Description"),w=Object(f.a)(h,2),y=w[0],x=w[1],O=Object(n.useState)(0),j=Object(f.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)(1),I=Object(f.a)(C,2),T=I[0],A=I[1],D=Object(n.useState)(""),Y=Object(f.a)(D,2),M=Y[0],R=Y[1],U=Object(n.useState)(""),P=Object(f.a)(U,2),F=P[0],z=P[1],L=Object(n.useState)({key:"",value:""}),q=Object(f.a)(L,2),W=q[0],B=q[1],H=Object(n.useState)([]),G=Object(f.a)(H,2),K=G[0],V=G[1],X=Object(n.useState)([]),J=Object(f.a)(X,2),$=J[0],Z=J[1],Q=Object(n.useState)(!1),ee=Object(f.a)(Q,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:(t=e.sent).error||V(t.map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[te]),Object(n.useEffect)((function(){var e=Object(at.a)(K);K.length&&(F&&("Description"===y?e=e.filter((function(e){return e.description.toLowerCase().includes(F.toLowerCase())})):"Review"===y&&(e=e.filter((function(e){return"Review"===e.content_type&&e.content.review.toLowerCase().includes(F.toLowerCase())})))),M&&(e=e.filter((function(e){return e.content_type.match(new RegExp(M,"i"))}))),W.key&&(e=e.filter((function(e){return e[W.key]===W.value}))),Z(e))}),[F,M,K,W]);var ne=[5*(T-1),5*(T-1)+5];ne[1]>=$.length&&(ne[1]=ne[1]-(ne[1]-$.length));var re=["Review","Rating","Duration","Status"],ce=["Description","Review"];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Promotions List"),r.a.createElement("div",{className:"row no-gutters"},"Edit, add and delete promtions")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return a()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"cursor-pointer col-auto ".concat(""!==W.key||M?"text-dark":"text-primary"),onClick:function(){R(""),b(""),B({key:"",value:""})}},"All (",K.length,")"),["Published","Drafted","Deleted"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return B((function(t){return Object.assign({},t,{key:"publish_status",value:e})}))},className:"cursor-pointer col-auto ".concat("publish_status"===W.key&&W.value===e?"text-primary":"text-dark")},e," (",K.filter((function(t){return t.publish_status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return u(["Delete"][e])},items:["Delete"],btnName:m||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return b(["Review","Comment"][e])},items:["Review","Comment"],btnName:g||"Select Type",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){if("Edit"===m){var e=$.filter((function(e){return e.selected}));e.length&&(t(e[0]),c())}else"Delete"===m||R(g)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return x(ce[e])},className:"input-light col-60",items:ce,btnName:"Search by ".concat(y)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:F,onChange:function(e){e.persist(),z(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{onSelect:function(e){return x(ce[e])},className:"table-input-prepend-select col-auto",items:ce,btnName:"Search by ".concat(y)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:F,onChange:function(e){e.persist(),z(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(_t.a,{style:{minWidth:"100%"},onSwipedLeft:function(){S(k+1<4?k+1:k)},onSwipedRight:function(){S(k-1>=0?k-1:k)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:$.slice(ne[0],ne[1]).filter((function(e){return e.selected})).length===ne[1]-ne[0],onChange:function(e){Z((function(t){for(var a=Object(at.a)(t),n=ne[0];n<ne[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},"Description"),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},re[k]),re.map((function(e,t){return r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate",key:"column-".concat(t)},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,$.length?$.slice(5*(T-1),5*(T-1)+5).map((function(e,a){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(a)},r.a.createElement("td",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:e.selected,onChange:function(e){Z((function(t){var n=Object(at.a)(t);return n[5*(T-1)+a].selected=e.target.checked,n}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"mb-2",style:{minWidth:"150px"}},e.description),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),c()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=[e._id],_("/admin/promotions/delete",{ids:n,update:{status:"Deleted"}});case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Promotion was deleted",message:"Promotion was successfully deleted",type:"success"}}),ae(!te);case 5:case"end":return t.stop()}var n}),t)})))},"Delete"))),r.a.createElement("td",{className:"".concat(0===k?"d-table-cell":"d-none d-xl-table-cell")},"Review"===e.content_type?r.a.createElement("div",{style:{minWidth:"150px"}},r.a.createElement("div",{className:"cursor-pointer user-select-none btn-link",onClick:function(t){E.push("/movie/".concat(e.movie_id,"/").concat(e.content_id))}},e.content.review)):r.a.createElement("div",{className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.content.comment)),r.a.createElement("td",{className:"".concat(1===k?"d-table-cell":"d-none d-xl-table-cell")},e.content.rating?r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===e.content.rating?"fire":"good_rate"===e.content.rating?"heart":"ok_rate"===e.content.rating?"heavy_division_sign":"shit",set:"facebook",size:24})):"-"),r.a.createElement("td",{className:"".concat(2===k?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",null,"From: "),r.a.createElement("div",null,"To: ")),r.a.createElement("div",{className:"d-inline-block"},r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.start_date),"DD/MM/YYYY @ hh:mm A"),r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.end_date),"DD/MM/YYYY @ hh:mm A")))))),r.a.createElement("td",{className:"".concat("Published"===e.status?"text-green":"Drafted"===e.status?"text-orange":"text-danger"," ").concat(3===k?"d-table-cell":"d-none d-xl-table-cell")},"Published"===e.status?"Active":"Drafted"===e.status?"Inactive":e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil($.length/5),current:T,setCurrent:A})))))))})),Pt=function(e){var t=e.currentPromotion,a=e.getBack,c=Object(n.useState)({review:"",comment:"",review_id:1,comment_id:1,content_type:"",publish_status:"",active_status:"",start_date:Date.now(),end_date:Date.now(),movie_title:"",movie_id:"",content:{},title:""}),s=Object(f.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(!1),p=Object(f.a)(u,2),v=p[0],g=p[1];Object(n.useEffect)((function(){m((function(e){return Object.assign({},e,t)}))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var E=["Published","Drafted","Deleted"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Edit Promotions"),r.a.createElement("div",{className:"row no-gutters"},"Edit existing promotion")),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Description"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("textarea",{value:o.description?o.description:"",onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 mb-1"},o.content_type),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("textarea",{value:o.content?"Review"===o.content_type?o.content.review:o.content.comment:"",onChange:function(e){e.persist();var t=e.target.value;if(t.split(" ").length<=500)if("Review"===o.content_type){var a=Object(b.a)({},o.content);a.review=t,m((function(e){return Object.assign({},e,{content:a})}))}else{var n=Object(b.a)({},o.content);n.comment=t,m((function(e){return Object.assign({},e,{content:n})}))}},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(o.content_type?"Review"===o.content_type?o.content.review.split(" ").length<=499?"text-muted":"text-danger":o.content.comment.split(" ").length<=499?"text-muted":"text-danger":"")},o.content.review?o.content.review.length?500-o.content.review.split(" ").length:500:o.content.comment?o.content.comment.length?500-o.content.comment.split(" ").length:500:""," ","words left")),"Review"===o.content_type&&r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60 mb-4 px-0"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60"},"Rating")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60",className:"input-light px-3",btnName:o.content.rating?y.find((function(e){return e.name===o.content.rating})).element:"Select",onSelect:function(e){var t=Object(b.a)({},o.content);t.rating=y[e].name,m((function(e){return Object.assign({},e,{content:t})}))},items:y.map((function(e){return e.element}))}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(At.a,{value:Ve.a.format(new Date(o.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative w-100"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}}))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(At.a,{value:Ve.a.format(new Date(o.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative w-100"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(o.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),m((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 pr-sm-3 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Time"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 position-relative input-light"},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(o.start_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(o.start_date)})))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Time"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 position-relative input-light"},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(o.end_date);c.setHours(n),c.setMinutes(r),m((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(o.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:E[e]})}))},className:"w-100 input-light px-3",items:E,btnName:o.status?o.status:"Select"}))))))),r.a.createElement("div",{className:"col-60 mt-2"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:a},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,ue(o);case 3:t=e.sent,g(!1),t.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:t.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Promotion updated",message:"Promotion was successfully updated",type:"success"}}),a());case 6:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:v,size:20}),"Save"))))};var Ft=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.publicUsers,a=e.getBack,c=e.ratings,s=Object(n.useState)({description:"",start_date:Date.now(),end_date:Date.now(),content_type:"",status:"Published"}),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(1),v=Object(f.a)(p,2),g=v[0],E=v[1],b=Object(n.useState)(""),h=Object(f.a)(b,2),w=h[0],y=h[1],x=Object(n.useState)(!1),O=Object(f.a)(x,2),j=O[0],k=O[1],S=Object(n.useState)("User"),C=Object(f.a)(S,2),I=C[0],T=C[1],A=Object(n.useState)(""),D=Object(f.a)(A,2),Y=D[0],M=D[1],R=Object(n.useState)([]),U=Object(f.a)(R,2),P=U[0],F=U[1],z=["User","Movie","Review"],L=Object(n.useState)(0),q=Object(f.a)(L,2),W=q[0],B=q[1],H=Object(n.useState)([]),G=Object(f.a)(H,2),K=G[0],V=G[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:(t=e.sent).error||V(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){var e=[];Y?"User"===I?Object.values(t).length&&K.forEach((function(a){t[a.author].display_name.toLowerCase().includes(Y.toLowerCase())&&e.push(a)})):"Movie"===I?K.forEach((function(t){c[t.movie_id]&&c[t.movie_id].movie_title.toLowerCase().includes(Y.toLowerCase())&&e.push(t)})):"Review"===I&&K.forEach((function(t){t.review.toLowerCase().includes(Y.toLowerCase())&&e.push(t)})):e=e.concat(Object(at.a)(K)),F(e.map((function(e){return Object.assign({},e,{selected:!1})})))}),[Y,K]);var X=[5*(g-1),5*(g-1)+5];X[1]>=P.length&&(X[1]=X[1]-(X[1]-P.length));var J=["Movie Name","Review","Rating","Posted On","Reported"],$=[{valid:m.description,error:"Description is required"},{valid:m.start_date<m.end_date,error:"Start date must be before end date"},{valid:m.start_date!==m.end_date,error:"promotion duration is 0"},{valid:P.filter((function(e){return e.selected})).length,error:"No content selected"}];return r.a.createElement("div",{className:"row no-gutters p-sm-5 p-4"},r.a.createElement("div",{className:"col-60 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto py-3"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Promote Content"),r.a.createElement("div",{className:"row no-gutters"},"Edit, add and delete promotions")))),r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Description"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("textarea",{value:m.description?m.description:"",onChange:function(e){e.persist(),u((function(t){return Object.assign({},t,{description:e.target.value})}))},className:"textarea-light w-100",style:{height:"150px"}})))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Start Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(m.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(m.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),u((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(m.start_date);c.setHours(n),c.setMinutes(r),u((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(m.start_date)}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"End Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(m.end_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(m.end_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),u((function(e){return Object.assign({},e,{end_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(m.end_date);c.setHours(n),c.setMinutes(r),u((function(e){return Object.assign({},e,{end_date:c.getTime()})}))}},value:new Date(m.end_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-3 h6 mt-4"},"Select Content To Promote"),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ft,{onSelect:function(e){return T(z[e])},className:"table-input-prepend-select col-auto bg-custom-primary text-white",items:z,btnName:"Search by ".concat(I)}),r.a.createElement("div",{className:"col position-relative",style:{maxWidth:"400px"}},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:Y,onChange:function(e){e.persist(),M(e.target.value)},className:"table-input pr-5 pl-3 w-100"})))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(_t.a,{style:{minWidth:"100%"},onSwipedLeft:function(){B(W+1<4?W+1:W)},onSwipedRight:function(){B(W-1>=0?W-1:W)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:P.slice(X[0],X[1]).filter((function(e){return e.selected})).length===X[1]-X[0],onChange:function(e){F((function(t){for(var a=Object(at.a)(t),n=X[0];n<X[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Posted By"),r.a.createElement("div",{className:"d-block d-lg-none"},"By")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},J[W]),J.map((function(e){return r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,P.length?P.slice(5*(g-1),5*(g-1)+5).map((function(e,a){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(a)},r.a.createElement("td",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:e.selected,onChange:function(e){F((function(t){var n=Object(at.a)(t);return n[5*(g-1)+a].selected=e.target.checked,n}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(Object.values(t).length?t[e.author].photo:"",")")}})),Object.values(t).length?r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"h6 text-primary"},t[e.author].display_name),r.a.createElement("div",null,t[e.author].email)):""),r.a.createElement("td",{className:"".concat(0===W?"d-table-cell":"d-none d-xl-table-cell")},c[e.movie_id]?c[e.movie_id].movie_title:""),r.a.createElement("td",{className:"".concat(1===W?"d-table-cell":"d-none d-xl-table-cell")},e.comment?r.a.createElement("div",{className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.comment):r.a.createElement("div",{style:{minWidth:"200px"}},r.a.createElement("div",{className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.review))),r.a.createElement("td",{className:"".concat(2===W?"d-table-cell":"d-none d-xl-table-cell")},e.rating?r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy_division_sign":"shit",set:"facebook",size:24})):"-"),r.a.createElement("td",{style:{whiteSpace:"nowrap"},className:"".concat(3===W?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,Ve.a.format(new Date(e.date),"DD/MM/YYYY @ hh:mm A"))),r.a.createElement("td",{className:"".concat(e.reported?"text-danger":"text-green"," ").concat(4===W?"d-table-cell":"d-none d-xl-table-cell")},e.reported?"Abused":"Not Reported"))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil(P.length/5),current:g,setCurrent:E}))),r.a.createElement("div",{className:"col-60 mt-1 px-0"},r.a.createElement("div",{style:{height:"50px",opacity:w?1:0},className:"row no-gutters align-items-center text-danger mb-2"},w),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=$.filter((function(e){return!e.valid}))).length){e.next=5;break}y(t[0].error),e.next=12;break;case 5:return n=P.filter((function(e){return e.selected})).map((function(e){return Object.assign({},m,{content_type:e.comment?"Comment":"Review",content:e.comment?{comment:e.comment}:{review:e.review,rating:e.rating},content_id:e._id,content_author:e.author,movie_title:e.movie_title,movie_genres:e.movie_genres,movie_poster:e.movie_poster,movie_release_date:e.movie_release_date,movie_id:e.movie_id})})),k(!0),e.next=9,_("/admin/promotions/create",n);case 9:r=e.sent,k(!1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Promotions created",message:"Promotions were successfully created",type:"success"}}),a());case 12:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:j,size:20}),"Save")))))})),zt=function(e){var t=e.setEditNotification,a=e.setEditNotificationSection,c=e.setAddNewNotificationSection,s=Object(n.useState)(""),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),g=v[0],E=v[1],b=Object(n.useState)("Subject"),N=Object(f.a)(b,2),h=N[0],w=N[1],y=Object(n.useState)(0),x=Object(f.a)(y,2),_=x[0],O=x[1],j=Object(n.useState)(1),k=Object(f.a)(j,2),S=k[0],C=k[1],I=Object(n.useState)(""),T=Object(f.a)(I,2),A=T[0],D=T[1],Y=Object(n.useState)(""),M=Object(f.a)(Y,2),R=M[0],U=M[1],P=Object(n.useState)({key:"",value:""}),F=Object(f.a)(P,2),z=F[0],L=F[1],q=Object(n.useState)([]),W=Object(f.a)(q,2),B=W[0],H=W[1],G=Object(n.useState)([]),K=Object(f.a)(G,2),V=K[0],X=K[1],J=Object(n.useState)(!1),$=Object(f.a)(J,2),Z=$[0],Q=$[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:(t=e.sent).error||H(t.reverse().map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z]);var ee=["App","Email"];Object(n.useEffect)((function(){var e=Object(at.a)(B);B.length&&(R&&("Subject"===h?e=e.filter((function(e){return e.subject.toLowerCase().includes(R.toLowerCase())})):"Description"===h&&(e=e.filter((function(e){return e.description.toLowerCase().includes(R.toLowerCase())})))),A&&(e=e.filter((function(e){return e.type===A}))),z.key&&(e=e.filter((function(e){return e[z.key]===z.value}))),X(e))}),[R,A,B,z]);var te=[5*(S-1),5*(S-1)+5];te[1]>=V.length&&(te[1]=te[1]-(te[1]-V.length));var ae=function(){var e=Object(i.a)(l.a.mark((function e(){var n,r,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>0&&void 0!==s[0]&&s[0]&&D(g),"Edit"!==m){e.next=7;break}(n=V.filter((function(e){return e.selected}))).length&&(t(n[0]),a()),e.next=15;break;case 7:if("Delete"!==m){e.next=15;break}if(!(r=V.filter((function(e){return e.selected}))).length){e.next=15;break}return e.next=12,Ee(r.map((function(e){return e._id})),{status:"Deleted"});case 12:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Selected notifications deleted",message:"Selected notifications were successfully deleted",type:"success"}}),d.dispatch({type:"UPDATE_USER",userProperty:{update:Date.now()}})),Q(!Z);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Notifications"),r.a.createElement("div",{className:"row no-gutters"},"Create, send and manage notifications")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return c()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{onClick:function(){D(""),E(""),L({key:"",value:""})},className:"col-auto cursor-pointer ".concat(A||z.key?"text-dark":"text-primary")},"All (",B.length,")"),["Sent","Drafted","Deleted"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{onClick:function(){return L((function(t){return Object.assign({key:"status",value:e})}))},className:"col-auto cursor-pointer ".concat("status"===z.key&&z.value===e?"text-primary":"text-dark")},e," (",B.filter((function(t){return t.status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return u(["Delete"][e])},items:["Delete"],btnName:m||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return E(ee[e])},items:ee,btnName:g||"Select Type",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return ae(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return w(["Subject","Description"][e])},className:"input-light col-60",items:["Subject","Description"],btnName:"Search by ".concat(h)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:R,onChange:function(e){e.persist(),U(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{onSelect:function(e){return w(["Subject","Description"][e])},className:"table-input-prepend-select col-auto",items:["Subject","Description"],btnName:"Search by ".concat(h)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:R,onChange:function(e){e.persist(),U(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(_t.a,{style:{minWidth:"100%"},onSwipedLeft:function(){O(_+1<4?_+1:_)},onSwipedRight:function(){O(_-1>=0?_-1:_)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:V.slice(te[0],te[1]).filter((function(e){return e.selected})).length===te[1]-te[0],onChange:function(e){X((function(t){for(var a=Object(at.a)(t),n=te[0];n<te[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},"Subject"),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},["Type","Description","Duration","Status"][_]),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Type")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Description")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Duration")),r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate"},r.a.createElement("div",null,"Status")))),r.a.createElement("tbody",null,V.length?V.slice(5*(S-1),5*(S-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:e.selected,onChange:function(e){X((function(t){var a=Object(at.a)(t);return a[5*(S-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"mb-2"},e.subject),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),a()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee([e._id],{status:"Deleted"});case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Notification was deleted",message:"Notification was successfully deleted",type:"success"}}),d.dispatch({type:"UPDATE_USER",userProperty:{update:Date.now()}})),Q(!Z);case 5:case"end":return t.stop()}}),t)})))},"Delete"))),r.a.createElement("td",{className:"".concat(0===_?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,e.type)),r.a.createElement("td",{className:"".concat(1===_?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{style:{minWidth:"200px"},className:"text-clamp-4 cursor-pointer user-select-none",onClick:function(e){var t=e.currentTarget;t.classList.contains("text-clamp-4")?t.classList.remove("text-clamp-4"):t.classList.add("text-clamp-4")}},e.description)),r.a.createElement("td",{className:"".concat(2===_?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",{className:"d-flex mb-2"},r.a.createElement("div",{style:{width:"55px"}},"From:"),r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.start_date),"DD/MM/YYYY @ hh:mm A")))),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{style:{width:"55px"}},"To:"),r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},Ve.a.format(new Date(e.end_date),"DD/MM/YYYY @ hh:mm A"))))),r.a.createElement("td",{className:"".concat(3===_?"d-table-cell":"d-none d-xl-table-cell")},e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:6,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil(V.length/5),current:S,setCurrent:C})))))))},Lt=a(365),qt=a(363),Wt=a(359),Bt=Object(Wt.a)((function(e){return{inputRoot:{"& .MuiOutlinedInput-notchedOutline":{border:"none"}}}})),Ht=Object(Nt.a)({palette:{primary:{main:"rgb(255, 0, 64)"},secondary:{main:"#202020"}}}),Gt=function(e){var t=Bt();return r.a.createElement(ht.a,{theme:Ht},r.a.createElement(Lt.a,Object.assign({},e,{classes:t,multiple:!0,id:"tags-outlined",filterSelectedOptions:!0,renderInput:function(t){return r.a.createElement(qt.a,Object.assign({},t,{variant:"outlined",placeholder:e.placeholder}))}})))};var Kt=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,user:e.user},t)}))((function(e){var t=e.currentNotification,a=e.getBack,c=e.publicUsers,s=e.user,o=["App","Email"],m=Date.now(),u=Object(n.useState)({type:"",subject:"",start_date:m,end_date:m,receivers:[],description:"",status:"Drafted"}),p=Object(f.a)(u,2),v=p[0],g=p[1],E=["Sent","Drafted","Deleted"],b=Object(n.useState)(""),N=Object(f.a)(b,2),h=N[0],w=N[1],y=Object(n.useState)(!1),x=Object(f.a)(y,2),_=x[0],O=x[1],j=[{valid:v.subject,error:"Subject is required"},{valid:v.type,error:"Select notification type"},{valid:v.receivers.length,error:"Select at least one receiver"},{valid:v.description,error:"Description is required"}];Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){g(t)}),[t]);return r.a.createElement("div",{className:"row no-gutters p-sm-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Edit notification"),r.a.createElement("div",{className:"row no-gutters"},"Edit existing notification")),r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Subject"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"w-100 input-light px-3",value:v.subject,onChange:function(e){e.persist(),g((function(t){return Object.assign({},t,{subject:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",className:"input-light col-60",btnName:v.type?v.type:"Select",items:o,onSelect:function(e){return g((function(t){return Object.assign({},t,{type:o[e]})}))}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Notification to"),r.a.createElement(Gt,{value:v.receivers,onChange:function(e,t){g((function(e){return Object.assign({},e,{receivers:t})}))},placeholder:"Search by username",color:"primary",className:"col-md-30 col-60 input-light-resize",options:Object.keys({All:"All","All users":"User","All admins":"Administrator","Inactive users":"Inactive","Active users":"Active"}).concat(Object.values(c).filter((function(e){return"Deleted"!==e.status}))),getOptionLabel:function(e){return e.display_name?e.display_name:e}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:v.description,onChange:function(e){e.persist();var t=e.target.value;t.split(" ").length<=500&&g((function(e){return Object.assign({},e,{description:t})}))},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(v.description.split(" ").length<=499?"text-muted":"text-danger")},v.description?500-v.description.split(" ").length:500,"words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(v.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(v.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),g((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(v.start_date);c.setHours(n),c.setMinutes(r),g((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(v.start_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",className:"input-light col-60",btnName:v.status?v.status:"Select status",items:E,onSelect:function(e){return g((function(t){return Object.assign({},t,{status:E[e]})}))}})),r.a.createElement("div",{style:{height:"50px",opacity:h?1:0},className:"row no-gutters align-items-center text-danger my-2"},h),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:a},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=j.filter((function(e){return!e.valid}))).length){e.next=5;break}w(t[0].error),e.next=20;break;case 5:return O(!0),e.next=8,ge(v);case 8:if(n=e.sent,O(!1),!n.error){e.next=14;break}d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}),e.next=20;break;case 14:return d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Notification edited",message:"Notification was successfully edited",type:"success"}}),e.next=17,L(s._id);case 17:r=e.sent,d.dispatch({type:"SET_USER",user:r}),a();case 20:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:_,size:20}),"Save"))))}));var Vt=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,user:e.user},t)}))((function(e){var t=e.publicUsers,a=e.getBack,c=e.user,s=["App","Email"],o=Date.now(),m=Object(n.useState)({type:"",subject:"",receivers:[],start_date:o,end_date:o,description:"",status:"Sent"}),u=Object(f.a)(m,2),p=u[0],v=u[1],g=Object(n.useState)(""),E=Object(f.a)(g,2),b=E[0],N=E[1],h=Object(n.useState)(!1),w=Object(f.a)(h,2),y=w[0],x=w[1],_=["Sent","Drafted","Deleted"],O=[{valid:p.subject,error:"Subject is required"},{valid:p.type,error:"Select notification type"},{valid:p.receivers.length,error:"Select at least one receiver"},{valid:p.description,error:"Description is required"}];return r.a.createElement("div",{className:"row no-gutters p-sm-5 p-4"},r.a.createElement("div",{className:"col-60 py-3 border-bottom mb-4"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Add new notification"),r.a.createElement("div",{className:"row no-gutters"},"Create a brand new notification and add to this site")),r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Subject"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"w-100 input-light px-3",value:p.subject,onChange:function(e){e.persist(),v((function(t){return Object.assign({},t,{subject:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Type"),r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",className:"input-light col-60 w-100",btnName:p.type?p.type:"Select",items:s,onSelect:function(e){return v((function(t){return Object.assign({},t,{type:s[e]})}))}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Notification to"),r.a.createElement(Gt,{value:p.receivers,onChange:function(e,t){v((function(e){return Object.assign({},e,{receivers:t})}))},placeholder:"Search by username",color:"primary",className:"col-md-30 col-60 input-light-resize",options:Object.keys({All:"All","All users":"User","All admins":"Administrator","Inactive users":"Inactive","Active users":"Active"}).concat(Object.values(t).filter((function(e){return"Deleted"!==e.status}))),getOptionLabel:function(e){return e.display_name?e.display_name:e}})),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Description"),r.a.createElement("div",{className:"col-60"},r.a.createElement("textarea",{value:p.description,onChange:function(e){e.persist();var t=e.target.value;t.split(" ").length<=500&&v((function(e){return Object.assign({},e,{description:t})}))},className:"textarea-light w-100",style:{height:"150px"}})),r.a.createElement("div",{className:"col-60 ".concat(p.description.split(" ").length<=499?"text-muted":"text-danger")},p.description?500-p.description.split(" ").length:500,"words left")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-xl-40 col-md-50 col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},"Date"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2",style:{width:"182px"}},r.a.createElement(At.a,{value:Ve.a.format(new Date(p.start_date),"DD/MM/YYYY"),component:function(e){return r.a.createElement("div",{className:"position-relative"},r.a.createElement(Fe.c,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement("input",Object.assign({},e,{className:"input-light w-100 pl-5 pr-3",placeholder:"YYYY-MM-DD"})))},onDayChange:function(e){if(e){var t=new Date(p.start_date),a=e.getFullYear(),n=e.getMonth(),r=e.getDate();t.setFullYear(a),t.setMonth(n),t.setDate(r),v((function(e){return Object.assign({},e,{start_date:t.getTime()})}))}}})),r.a.createElement("div",{className:"col-auto position-relative input-light",style:{width:"150px"}},r.a.createElement(Fe.h,{style:{position:"absolute",top:0,bottom:0,margin:"auto",left:"18px"}}),r.a.createElement(Yt.a,{clearIcon:null,clockIcon:null,className:"w-100 pl-5",onChange:function(e){if(e){var t=e.split(":"),a=Object(f.a)(t,2),n=a[0],r=a[1],c=new Date(p.start_date);c.setHours(n),c.setMinutes(r),v((function(e){return Object.assign({},e,{start_date:c.getTime()})}))}},value:new Date(p.start_date)}))))))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(ft,{popoverClass:"col-sm-30 col-60",className:"input-light col-60",btnName:p.status?p.status:"Select status",items:_,onSelect:function(e){return v((function(t){return Object.assign({},t,{status:_[e]})}))}})),r.a.createElement("div",{style:{height:"50px",opacity:b?1:0},className:"row no-gutters align-items-center text-danger my-2"},b),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 mb-3 col-60 col-sm-auto",onClick:a},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small mb-3 col-60 col-sm-auto",onClick:Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=O.filter((function(e){return!e.valid}))).length){e.next=5;break}N(t[0].error),e.next=20;break;case 5:return x(!0),e.next=8,ve(p);case 8:if(n=e.sent,x(!1),!n.error){e.next=14;break}d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}),e.next=20;break;case 14:return d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Notification created",message:"Notification was successfully created",type:"success"}}),e.next=17,L(c._id);case 17:r=e.sent,d.dispatch({type:"SET_USER",user:r}),a();case 20:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:y,size:20}),"Save"))))})),Xt=a(140);var Jt=Object(p.b)((function(e,t){return Object(b.a)({ratings:e.ratings,publicUsers:e.publicUsers},t)}))((function(e){var t=e.setEditUser,a=e.setEditUserSection,c=e.setAddNewUserSection,s=e.publicUsers,o=(e.ratings,Object(n.useState)("")),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(f.a)(v,2),E=g[0],N=g[1],h=Object(n.useState)("User"),w=Object(f.a)(h,2),y=w[0],x=w[1],O=Object(n.useState)(0),j=Object(f.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)(1),I=Object(f.a)(C,2),T=I[0],A=I[1],D=Object(n.useState)(""),Y=Object(f.a)(D,2),M=Y[0],R=Y[1],U=Object(n.useState)(""),P=Object(f.a)(U,2),F=P[0],z=P[1],L=Object(n.useState)(""),q=Object(f.a)(L,2),W=q[0],B=q[1],H=Object(n.useState)([]),G=Object(f.a)(H,2),K=G[0],V=G[1],X=Object(n.useState)([]),J=Object(f.a)(X,2),Z=J[0],Q=J[1],ee=Object(n.useState)(!1),te=Object(f.a)(ee,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:t=e.sent,V(t.map((function(e){return Object.assign({},e,{selected:!1})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ae]),Object(n.useEffect)((function(){var e=Object(at.a)(K);K.length&&(W&&("User"===y?e=e.filter((function(e){return e.display_name.toLowerCase().includes(W.toLowerCase())})):"Email"===y&&(e=e.filter((function(e){return e.email.toLowerCase().includes(W.toLowerCase())})))),M&&(e=e.filter((function(e){return e.role===M}))),F&&(e=e.filter((function(e){return e.status===F})))),Q(e)}),[W,M,K,F]);var ce=[5*(T-1),5*(T-1)+5];ce[1]>=Z.length&&(ce[1]=ce[1]-(ce[1]-Z.length));var se=function(){var e=Object(i.a)(l.a.mark((function e(){var n,r,c,o,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>0&&void 0!==i[0]&&i[0]&&R("All"===E?"":E),!(n=Z.filter((function(e){return e.selected}))).length){e.next=15;break}if("Edit"!==u){e.next=9;break}t(n[0]),a(),e.next=15;break;case 9:return r={},"Delete"===u?r.status="Deleted":"Inactivate"===u?r.status="Inactive":"Block"===u?r.status="Blocked":"Activate"===u&&(r.status="Active"),e.next=13,re(n.map((function(e){return e._id})),n.map((function(e){return s[e._id]._id})),r);case 13:(c=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:c.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Users updated",message:"User were successfully updated",type:"success"}}),ne(!ae),o=Object(b.a)({},s),n.forEach((function(e){o[e._id].status=r.status})),d.dispatch({type:"SET_PUBLICUSERS",publicUsers:o}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(i.a)(l.a.mark((function e(t,a,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(a,n,t);case 2:(r=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Users updated",message:"User were successfully updated",type:"success"}}),ne(!ae));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),le=["Block","Inactivate","Activate","Delete"],ie=["Email","Role","Last login","Activity","Status"];return r.a.createElement("div",{className:"row no-gutters admin-screen"},r.a.createElement("div",{className:"col-60 border-bottom"},r.a.createElement("div",{className:"row no-gutters justify-content-between pb-3 align-items-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters admin-screen-title"},"Users"),r.a.createElement("div",{className:"row no-gutters"},"Add, edit and delete users")),r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-natural",onClick:function(){return c()}},"Add New"))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 py-5"},r.a.createElement("div",{className:"row no-gutters h6 mb-3"},r.a.createElement("div",{className:"col-auto ".concat(F?"text-dark":"text-primary"),onClick:function(){return z("")}},"All (",K.length,")"),["Active","Inactive","Blocked"].map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"status-".concat(t)},r.a.createElement("div",{className:"col-auto px-2 text-muted"},"|"),r.a.createElement("div",{className:"col-auto cursor-pointer ".concat(F===e?"text-primary":"text-dark"),onClick:function(){return z(e)}},e," (",K.filter((function(t){return t.status===e})).length,")"))}))),r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return p(le[e])},items:le,btnName:u||"Select Action",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{className:"col-60 col-sm-auto pb-3 mr-sm-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-60 col-sm-auto",onSelect:function(e){return N(["All","Administrator","User"][e])},items:["All","Administrator","User"],btnName:E||"Select Role",className:"input-light px-3 col-auto"}))),r.a.createElement("div",{onClick:function(){return se(!0)},className:"btn-custom btn-custom-primary col-60 col-sm-auto mb-3 mr-3 btn-xsmall"},"Apply"))),r.a.createElement("div",{className:"col-60 d-block d-sm-none"},r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return x(["User","Email"][e])},className:"input-light col-60",items:["User","Email"],btnName:"Search by ".concat(y)})),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{className:"input-light w-100 pr-5 pl-3",value:W,onChange:function(e){e.persist(),B(e.target.value)}})))),r.a.createElement("div",{className:"col-auto mb-3 d-none d-sm-block"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{onSelect:function(e){return x(["User","Email"][e])},className:"table-input-prepend-select col-auto",items:["User","Email"],btnName:"Search by ".concat(y)}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement(Fe.l,{fontSize:"20px",style:{position:"absolute",top:0,bottom:0,margin:"auto",right:"18px"}}),r.a.createElement("input",{value:W,onChange:function(e){e.persist(),B(e.target.value)},className:"table-input pr-5 pl-3",style:{minWidth:"300px"}}))))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(_t.a,{style:{minWidth:"100%"},onSwipedLeft:function(){S(k+1<4?k+1:k)},onSwipedRight:function(){S(k-1>=0?k-1:k)}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table bg-white border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:Z.slice(ce[0],ce[1]).filter((function(e){return e.selected})).length===ce[1]-ce[0],onChange:function(e){Q((function(t){for(var a=Object(at.a)(t),n=ce[0];n<ce[1];n++)a[n].selected=e.target.checked;return a}))}})),r.a.createElement("th",{className:"table-header text-truncate text-left"},r.a.createElement("div",{className:"d-none d-lg-block"},"Display Name"),r.a.createElement("div",{className:"d-block d-lg-none"},"Name")),r.a.createElement("th",{className:"d-table-cell d-xl-none table-header text-truncate"},ie[k]),ie.map((function(e,t){return r.a.createElement("th",{className:"d-none d-xl-table-cell table-header text-truncate",key:"column-".concat(t)},r.a.createElement("div",null,e))})))),r.a.createElement("tbody",null,Z.length?Z.slice(5*(T-1),5*(T-1)+5).map((function(e,n){return r.a.createElement("tr",{className:"font-weight-600 bg-light",key:"shortlist-item-".concat(n)},r.a.createElement("td",{className:"text-center"},r.a.createElement(xt,{color:"primary",checked:e.selected,onChange:function(e){Q((function(t){var a=Object(at.a)(t);return a[5*(T-1)+n].selected=e.target.checked,a}))}})),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",null,r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block mr-2"},r.a.createElement("div",{className:"square-50 rounded-circle bg-image",style:{backgroundImage:"url(".concat(e.photo,")")}})),r.a.createElement("div",{className:"d-none d-md-inline-block align-top"},r.a.createElement("div",{className:"text-primary mb-2"},e.display_name),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){t(e),a()}},"Edit"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-primary underline-link",onClick:function(){oe({status:"Blocked"},[e._id],[s[e._id]._id])}},"Block"),r.a.createElement("div",{className:"px-2"},"|"),r.a.createElement("div",{className:"text-danger underline-link",onClick:Object(i.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r=[e._id],c=[s[e._id]._id],_("/admin/users/deleteMultiple",{ids:r,pids:c});case 2:(a=t.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:a.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Users deleted",message:"User were successfully deleted",type:"success"}}),ne(!ae),(n=Object(b.a)({},s))[e._id].status="Deleted",d.dispatch({type:"SET_PUBLICUSERS",publicUsers:n}));case 4:case"end":return t.stop()}var r,c}),t)})))},"Delete")))))),r.a.createElement("td",{className:"".concat(0===k?"d-table-cell":"d-none d-xl-table-cell")},r.a.createElement("div",null,e.email)),r.a.createElement("td",{className:"".concat(1===k?"d-table-cell":"d-none d-xl-table-cell")},e.role),r.a.createElement("td",{className:"".concat(2===k?"d-table-cell":"d-none d-xl-table-cell")},e.last_login?Object(Xt.format)(e.last_login):"No data"),r.a.createElement("td",{className:"".concat(3===k?"d-table-cell":"d-none d-xl-table-cell")},e.last_activity?Object(Xt.format)(e.last_activity):"No data"),r.a.createElement("td",{className:"".concat("Active"===e.status?"text-green":"Inactive"===e.status?"text-orange":"text-danger"," ").concat(4===k?"d-table-cell":"d-none d-xl-table-cell")},e.status))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7,className:" text-center py-5"},"0 results found"))))))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-sm-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil(Z.length/5),current:T,setCurrent:A})))))))}));var $t=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers},t)}))((function(e){var t=e.getBack,a=e.publicUsers,c=Object(n.useState)({first_name:"",last_name:"",display_name:"",email:"",username:"",password:"",re_password:"",status:"Active",role:"User"}),s=Object(f.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(""),p=Object(f.a)(u,2),v=p[0],g=p[1],E=Object(n.useState)(!1),b=Object(f.a)(E,2),N=b[0],h=b[1],w=[{valid:o.email,error:"Email is required"},{valid:je(o.email),error:"Email is not valid"},{valid:o.password,error:"Password is required"},{valid:/[^\w\s]/.test(o.password)||/\d/.test(o.password),error:"Password must contain number or symbol"},{valid:o.password===o.re_password,error:"Passwords don't match"},{valid:o.password.length>=6,error:"Password must contain at least 6 characters"},{valid:!Object.values(a).map((function(e){return e.email})).includes(o.email),error:"This email address is taken"}],y=["Active","Inactive","Blocked"],x=["Administrator","User"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters border-bottom py-3 mb-5"},r.a.createElement("div",{className:"col-60 admin-screen-title"},"Add User"),r.a.createElement("div",{className:"col-60"},"Add brand new user")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"First name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:o.first_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{first_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Last name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:o.last_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{last_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.display_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{display_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"This name will be visible for everyone")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"*Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,value:o.email,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{email:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"*Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.password,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"*Confirm Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.re_password,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{re_password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-sm-20 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:y[e]})}))},items:y,btnName:o.status?o.status:"Select",className:"input-light px-3 col-60"}))),r.a.createElement("div",{className:"col-sm-20 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Role"),r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return m((function(t){return Object.assign({},t,{role:x[e]})}))},items:x,btnName:o.role?o.role:"Select",className:"input-light px-3 col-60"})))),r.a.createElement("div",{style:{height:"50px",opacity:v?1:0},className:"row no-gutters align-items-center text-danger"},v),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 col-sm-auto col-60 mb-3",onClick:function(){return t()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small col-sm-auto col-60 mb-3",onClick:Object(i.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=w.filter((function(e){return!e.valid}))).length){e.next=5;break}g(a[0].error),e.next=11;break;case 5:return h(!0),e.next=8,_("/admin/users/create",o);case 8:n=e.sent,h(!1),n.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:n.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"User created",message:"User was successfully created",type:"success"}}),d.dispatch({type:"UPDATE_PUBLICUSERS",publicUser:Object(Ge.a)({},n.id,Object.assign({},o,{user_id:n.id,_id:n.pid}))}),t());case 11:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:N,size:20}),"Save"))))})),Zt=function(e){var t=e.currentUser,a=e.getBack,c=Object(n.useState)({first_name:"",last_name:"",display_name:"",email:"",username:"",password:"",re_password:"",status:"Active",role:"Administrator"}),s=Object(f.a)(c,2),o=s[0],m=s[1],u=Object(n.useState)(""),p=Object(f.a)(u,2),v=p[0],g=p[1],E=Object(n.useState)(""),b=Object(f.a)(E,2),N=b[0],h=b[1],w=Object(n.useState)(!1),y=Object(f.a)(w,2),x=y[0],O=y[1];Object(n.useEffect)((function(){t&&(g(t.password),m(Object.assign({},t,{re_password:t.password})))}),[t]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var j=[{valid:/[^\w\s]/.test(o.password)||/\d/.test(o.password),error:"Password must contain number or symbol"},{valid:o.password===o.re_password,error:"Passwords don't match"},{valid:o.password.length>=6,error:"Password must contain at least 6 characters"}],k=["Active","Inactive","Blocked"],S=["Administrator","User"];return r.a.createElement("div",{className:"row no-gutters p-md-5 p-4"},r.a.createElement("div",{className:"col-60",style:{maxWidth:"800px"}},r.a.createElement("div",{className:"row no-gutters border-bottom py-3 mb-5"},r.a.createElement("div",{className:"col-60 admin-screen-title"},"Edit User"),r.a.createElement("div",{className:"col-60"},"Edit existing user")),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-30 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"First name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:o.first_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{first_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"col-sm-30 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters mb-1"},"Last name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,value:o.last_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{last_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Display name"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.display_name,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{display_name:e.target.value})}))},type:"text",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"This name will be visible for everyone")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,value:o.email,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{email:e.target.value})}))},type:"text",className:"px-3 input-light w-100"}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.password,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Confirm Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{spellCheck:!1,value:o.re_password,onChange:function(e){e.persist(),m((function(t){return Object.assign({},t,{re_password:e.target.value})}))},type:"password",className:"px-3 input-light w-100"})),r.a.createElement("div",{className:"col-60 text-muted"},"Must be at least 6 characters and must contain a number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-sm-20 col-60 pr-sm-3 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Status"),r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return m((function(t){return Object.assign({},t,{status:k[e]})}))},items:k,btnName:o.status?o.status:"Select",className:"input-light px-3 col-60"}))),r.a.createElement("div",{className:"col-sm-20 col-60 mb-4"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 mb-1"},"Role"),r.a.createElement(ft,{popoverClass:"w-100",onSelect:function(e){return m((function(t){return Object.assign({},t,{role:S[e]})}))},items:S,btnName:o.role?o.role:"Select",className:"input-light px-3 col-60"})))),r.a.createElement("div",{style:{height:"50px",opacity:N?1:0},className:"row no-gutters align-items-center text-danger"},N),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"btn-custom btn-custom-secondary btn-small mr-sm-3 col-sm-auto col-60 mb-3",onClick:function(){return a()}},"Cancel"),r.a.createElement("div",{className:"btn-custom btn-custom-primary btn-small col-sm-auto col-60 mb-3",onClick:Object(i.a)(l.a.mark((function e(){var t,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,o.password!==v&&(n=j.filter((function(e){return!e.valid}))).length&&(t=!1,h(n[0].error)),!t){e.next=9;break}return O(!0),e.next=6,_("/admin/users/edit",o);case 6:r=e.sent,O(!1),r.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"User updated",message:"User was successfully updated",type:"success"}}),(c=d.getState().publicUsers[o._id]).status=o.status,c.role=o.role,d.dispatch({type:"UPDATE_PUBLICUSERS",publicUser:c}),a());case 9:case"end":return e.stop()}}),e)})))},r.a.createElement(ye,{color:"white",style:{position:"absolute",left:"10px",top:0,bottom:0,margin:"auto",display:"flex",alignItems:"center"},loading:x,size:20}),"Save"))))},Qt=6,ea=7,ta=8,aa=9,na=10,ra=11,ca=12,sa=13,oa=14,la=15;var ia=Object(p.b)((function(e,t){return Object(b.a)({dashboardMenuOpened:e.dashboardMenuOpened},t)}))((function(e){var t=e.dashboardMenuOpened,a=Object(n.useState)(0),c=Object(f.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(null),i=Object(f.a)(l,2),m=i[0],u=i[1],d=Object(n.useState)(null),p=Object(f.a)(d,2),v=p[0],g=p[1],E=Object(n.useState)(null),b=Object(f.a)(E,2),N=b[0],h=b[1],w=Object(n.useState)(null),y=Object(f.a)(w,2),x=y[0],_=y[1],O=Object(n.useState)(null),j=Object(f.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)(null),I=Object(f.a)(C,2),T=I[0],A=I[1];return r.a.createElement("div",{className:"row no-gutters justify-content-center",style:{minHeight:window.innerHeight}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters h-100 position-relative bg-light"},r.a.createElement(gt,{isMenuOpened:t,setSection:o,section:s}),r.a.createElement("div",{className:"col-auto d-none d-lg-block",style:{width:"300px"}},r.a.createElement(dt,{section:s,setSection:o})),r.a.createElement("div",{className:"col"},s>=6&&r.a.createElement("div",{className:"row no-gutters px-md-5 px-4 pt-4",style:{marginBottom:"-40px"}},r.a.createElement("div",{className:"col-auto cursor-pointer"},r.a.createElement(Fe.a,{fontSize:"24px",onClick:function(){return o(6===s||7===s?2:8===s||9===s?3:10===s||11===s?4:12===s||13===s?5:14===s||15===s?1:0)}}))),0===s?r.a.createElement(vt,null):1===s?r.a.createElement(Jt,{setAddNewUserSection:function(){return o(la)},setEditUser:function(e){return A(e)},setEditUserSection:function(){return o(oa)}}):2===s?r.a.createElement(kt,{setEditReview:function(e){return u(e)},setEditReviewSection:function(){return o(Qt)},setEditComment:function(e){return g(e)},setEditCommentSection:function(){return o(ea)}}):3===s?r.a.createElement(It,{setAddNewAnouncementSection:function(){return o(aa)},setEditAnnouncement:function(e){return h(e)},setEditAnnouncementSection:function(){o(ta)}}):4===s?r.a.createElement(Ut,{setAddNewPromotionSection:function(){return o(ra)},setEditPromotion:function(e){return _(e)},setEditPromotionSection:function(){return o(na)}}):5===s?r.a.createElement(zt,{setAddNewNotificationSection:function(){return o(sa)},setEditNotification:function(e){return S(e)},setEditNotificationSection:function(){return o(ca)}}):6===s?r.a.createElement(St,{currentReview:m,getBack:function(){return o(2)}}):7===s?r.a.createElement(Ct,{currentComment:v,getBack:function(){return o(2)}}):8===s?r.a.createElement(Mt,{getBack:function(){return o(3)},currentAnnouncement:N}):9===s?r.a.createElement(Rt,{getBack:function(){return o(3)}}):10===s?r.a.createElement(Pt,{currentPromotion:x,getBack:function(){return o(4)}}):11===s?r.a.createElement(Ft,{getBack:function(){return o(4)}}):12===s?r.a.createElement(Kt,{currentNotification:k,getBack:function(){return o(5)}}):13===s?r.a.createElement(Vt,{getBack:function(){return o(5)}}):14===s?r.a.createElement(Zt,{currentUser:T,getBack:function(){return o(1)}}):15===s?r.a.createElement($t,{getBack:function(){return o(1)}}):""))))})),ma=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:(a=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{type:"failure",title:"Error",message:a.error}}):(localStorage.setItem("movies_user_token",a.token),d.dispatch({type:"SET_USER",user:a}),E.push("/"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ua=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(f.a)(s,2),l=o[0],i=o[1];return r.a.createElement("div",{className:"row no-gutters justify-content-center aligm-items-start align-items-sm-center",style:{height:window.innerHeight}},r.a.createElement("div",{className:"col-xl-50 col-60 col-lg-50 col-md-30 col-sm-40 login-rounded overflow-hidden"},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col bg-dark d-lg-block d-none"},r.a.createElement("div",{className:"row no-gutters h-100 flex-center position-relative"},r.a.createElement("div",{className:"position-absolute d-flex align-items-center text-white cursor-pointer",onClick:function(){return E.push("/")},style:{top:"15px",left:"15px"}},r.a.createElement(Fe.f,{className:"mr-2"}),"Back to home"),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"square-150 mx-auto"},r.a.createElement(mt,null)),r.a.createElement("div",{className:"logo text-title-xl text-white"},"CozyPotato")))),r.a.createElement("div",{className:"col-60 col-lg-30 col-xl-25 col-md-auto p-sm-5 p-4 bg-light",style:{minHeight:window.innerHeight-100}},r.a.createElement("div",{className:"row no-gutters h-100 py-3"},r.a.createElement("div",{className:"col-60 d-flex align-items-start flex-wrap mb-5"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 h3 mb-3"},"Hello, welcome back"),r.a.createElement("div",{className:"col-60"},"Login to your account to review movies and interact with movies community"))),r.a.createElement("div",{className:"col-60 d-flex align-items-end flex-wrap"},r.a.createElement("div",{className:"row no-gutters w-100"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-center mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"text",className:"input-light w-100 px-3",value:a,onChange:function(e){e.persist(),c(e.target.value)}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 mb-1"},"Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:l,onChange:function(e){e.persist(),i(e.target.value)},onKeyDown:function(e){13===e.keyCode&&ma({email:a,password:l})}}))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-60 btn-custom btn-custom-primary",onClick:function(){return ma({email:a,password:l})}},"Login")),r.a.createElement("div",{className:"row no-gutters justify-content-between",style:{fontSize:"14px"}},r.a.createElement("div",{className:"col-auto mr-4"},"Don't have an account?"," ",r.a.createElement("span",{className:"btn-link cursor-pointer",onClick:function(){return E.push("/signup")}},"Sign up")),r.a.createElement("div",{className:"col-auto btn-link cursor-pointer"},"Forgot password"))))))))))},da=a(198),pa=a(61),va=a.n(pa),ga=a(109),Ea=a.n(ga),ba=a(110),fa=a.n(ba),Na=a(111),ha=a.n(Na),wa=function(e){var t=e.type;return r.a.createElement("div",{className:"row no-gutters px-0"},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(va.a,{fileType:"docx",filePath:"privacy-policy"===t?fa.a:"cookies-policy"===t?ha.a:"terms-and-conditions"===t?Ea.a:"",errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))},ya=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),g=v[0],b=v[1],N=Object(n.useState)(!1),h=Object(f.a)(N,2),w=h[0],y=h[1],x=Object(n.useState)(!1),O=Object(f.a)(x,2),j=O[0],k=O[1],S=Object(n.useState)(""),C=Object(f.a)(S,2),I=C[0],T=C[1],A=Object(n.useState)(""),D=Object(f.a)(A,2),Y=D[0],M=D[1],R=[{valid:je(a),error:"Email is not valid"},{valid:/[^\w\s]/.test(m)||/\d/.test(m),error:"Password must contain number or symbol"},{valid:m===g,error:"Passwords don't match"},{valid:m.length>=6,error:"Password must contain at least 6 characters"},{valid:w,error:"Pass captcha validation"},{valid:j,error:"Check if you agree with privacy policy and terms and conditions"}],U=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=R.filter((function(e){return!e.valid}))).length){e.next=8;break}return e.next=4,_("/user/signup",{email:a,password:m});case 4:(n=e.sent).success?(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Account created!",message:"Login to start writing reviews and comments about your favorite movies",type:"success"}}),d.dispatch({type:"UPDATE_PUBLICUSERS",publicUser:Object(Ge.a)({},n.publicUser.user_id,n.publicUser)}),E.push("/login")):d.dispatch({type:"SET_NOTIFICATION",notification:{message:n.error,type:"failure",title:"Failed create account"}}),e.next=9;break;case 8:T(t[0].error);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row no-gutters justify-content-center aligm-items-start align-items-sm-center py-sm-3",style:{minHeight:window.innerHeight}},r.a.createElement(ze,{open:Y,onClose:function(){return M("")}},r.a.createElement(wa,{type:Y})),r.a.createElement("div",{className:"col-xl-50 col-60 col-lg-50 col-md-30 col-sm-40 login-rounded overflow-hidden"},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col bg-dark d-lg-block d-none text-center"},r.a.createElement("div",{className:"row no-gutters h-100 flex-center position-relative"},r.a.createElement("div",{className:"position-absolute d-flex align-items-center text-white cursor-pointer",onClick:function(){return E.push("/")},style:{top:"15px",left:"15px"}},r.a.createElement(Fe.f,{className:"mr-2"}),"Back to home"),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"square-150 mx-auto"},r.a.createElement(mt,null)),r.a.createElement("div",{className:"logo text-title-xl text-white"},"CozyPotato")))),r.a.createElement("div",{className:"col-60 col-lg-30 col-xl-25 col-md-auto p-4 p-sm-5 bg-light",style:{minHeight:window.innerHeight-100}},r.a.createElement("div",{className:"row no-gutters h-100"},r.a.createElement("div",{className:"col-60 d-flex align-items-start flex-wrap"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-60 h3 mb-3"},"Create Account"))),r.a.createElement("div",{className:"col-60 d-flex align-items-end flex-wrap"},r.a.createElement("div",{className:"row no-gutters w-100"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-center mb-3"},r.a.createElement("div",{className:"col-60 mb-1"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"email",className:"input-light w-100 px-3",value:a,onChange:function(e){e.persist(),c(e.target.value)}}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 mb-1"},"Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:m,onChange:function(e){e.persist(),u(e.target.value)}})),r.a.createElement("div",{className:"col-60 text-muted font-size-14"},"Must be at least 6 characters and must contain number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 mb-1"},"Confirm Password"),r.a.createElement("div",{className:"col-60 mb-1"},r.a.createElement("input",{type:"password",className:"input-light w-100 px-3",value:g,onKeyDown:function(e){13===e.keyCode&&U()},onChange:function(e){e.persist(),b(e.target.value)}})),r.a.createElement("div",{className:"col-60 text-muted font-size-14"},"Must be at least 6 characters and must contain number or symbol")),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(da.a,{sitekey:"6Lc_87cZAAAAAHRx49G1d-mM3gxWM_RKLAA41T3U",onChange:function(e){e&&y(!0)}})),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(xt,{color:"primary",checked:j,onChange:function(e){k(e.target.checked)}})),r.a.createElement("div",{className:"col"},"By registering you agree with"," ",r.a.createElement("span",{onClick:function(){return M("terms-and-conditions")},className:"btn-link"},"terms and conditions")," ","and"," ",r.a.createElement("span",{className:"btn-link",onClick:function(){return M("privacy-policy")}},"privacy policy"))),r.a.createElement("div",{style:{height:"40px",opacity:I?1:0},className:"row no-gutters align-items-center text-danger"},I),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 btn-custom btn-custom-primary",onClick:U},"Create Account")),r.a.createElement("div",{className:"row no-gutters justify-content-between",style:{fontSize:"14px"}},r.a.createElement("div",{className:"col-auto mr-4"},"Already have account?"," ",r.a.createElement("span",{className:"btn-link cursor-pointer",onClick:function(){return E.push("/login")}},"Login")),r.a.createElement("div",{className:"col-auto btn-link cursor-pointer"},"Forgot password"))))))))))};var xa=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,notification:e.notification},t)}))((function(e){var t=e.notification,a=e.publicUsers,c=Object(n.useState)(!1),s=Object(f.a)(c,2),o=s[0],l=s[1],i=Object(n.useState)(!1),m=Object(f.a)(i,2),u=m[0],p=m[1];return Object(n.useEffect)((function(){var e;return t.expired||(e=setTimeout((function(){p(!0)}),5e3)),function(){!t.expired&&e&&clearTimeout(e)}}),[t]),Object(n.useEffect)((function(){u&&!o&&(d.dispatch({type:"UPDATE_NOTIFICATION",notification:{expired:!0}}),p(!1))}),[u,o]),Object(n.useEffect)((function(){if("success"!==t.type&&"object"===typeof t.message){var e={type:"failure",subject:"System error occured",receivers:Object.values(a).filter((function(e){return"Administrator"===e.role})),start_date:Date.now(),end_date:Date.now(),description:JSON.stringify(t.message).replace(/"/g,""),status:"Sent"};ve(e)}}),[t.message]),r.a.createElement("div",{onMouseOver:function(){return l(!0)},onMouseLeave:function(){return l(!1)},className:"container-fluid toast-pro bg-over-root px-0",style:{maxWidth:"300px",bottom:t.expired?"-100%":"50px"}},r.a.createElement("div",{className:"row no-gutters p-3"},t.type&&r.a.createElement("div",{className:"col-auto pr-2"},"success"===t.type?r.a.createElement(Fe.d,{strokeWidth:"1px",fontSize:"24px",className:"text-success"}):r.a.createElement(Fe.i,{strokeWidth:"1px",fontSize:"24px",className:"text-primary"})),r.a.createElement("div",{className:"col pr-2 toast-title"},t.title),r.a.createElement("div",{className:"col-auto toast-close-icon",onClick:function(){return d.dispatch({type:"UPDATE_NOTIFICATION",notification:{expired:!0}})}},r.a.createElement(Fe.m,{fontSize:"24px",className:"text-white"}))),r.a.createElement("div",{className:"row no-gutters p-4 text-white"},"success"!==t.type&&"object"===typeof t.message?"Action failed":t.message))})),_a=function(e){var t=e.user,a=e.movieId,c=e.refreshProfile,s=void 0===c?function(){}:c,o=Object(n.useState)(!1),m=Object(f.a)(o,2),u=m[0],p=m[1],v=function(){var e=Object(i.a)(l.a.mark((function e(){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.display_name){e.next=10;break}if(!a){e.next=8;break}return p(!0),e.next=5,be(t,a);case 5:n=e.sent,p(!1),n.updatedUser?(r=Object(at.a)(t.wishlist),-1!==(c=r.findIndex((function(e){return e.movie_id===a})))&&r.splice(c),d.dispatch({type:"UPDATE_USER",userProperty:n.updatedUser}),d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Movie marked as watched",message:"Movie successfully added to your watched list",type:"success"}}),s()):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:JSON.stringify(n.error).replace(/"/g,""),type:"failure"}});case 8:e.next=11;break;case 10:d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action not allowed",message:"You need to login to add movie to wishlist",type:"failure"}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(we,{theme:"dark",position:"top",content:function(e){return r.a.createElement("div",{className:"px-3 py-2"},"Mark as watched")},trigger:"mouseenter"},r.a.createElement("div",{className:"btn-custom btn-custom-iconic",style:{pointerEvents:"all"}},u?r.a.createElement(ye,{size:30,loading:u,color:"white"}):r.a.createElement(x.i,{onClick:v,className:"text-title-xl"})))};var Oa=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.movies,a=e.user,c=e.ratings,s=e.listType,o=void 0===s?"not wishlist":s,l=e.owner,i=void 0!==l&&l,m=e.refreshProfile,u=void 0===m?function(){}:m,d=Object(n.useState)(1),p=Object(f.a)(d,2),v=p[0],g=p[1],b=Object(n.useState)(""),N=Object(f.a)(b,2),h=N[0],w=N[1],y=Object(n.useState)(!1),x=Object(f.a)(y,2),_=x[0],O=x[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,{open:_,onClose:function(){return O(!1)}},r.a.createElement(Pe,{movieId:h,onEnded:function(){return O(!1)}})),r.a.createElement("div",{className:"row"},t.map((function(e,t){var n=c[e.movie_id]?{id:e.movie_id,title:c[e.movie_id].movie_title,poster_path:c[e.movie_id].movie_poster,genres:c[e.movie_id].movie_genres}:{id:e.movie_id,title:"",poster_path:"",genres:[]};return r.a.createElement("div",{key:"result-".concat(t),className:"col-lg-12 col-md-15 col-sm-20 col-60 p-3 text-white"},"watchedlist"!==o&&i?r.a.createElement("div",{className:"row no-gutters justify-content-end position-relative px-2 d-none d-sm-flex",style:{marginBottom:"-51px",zIndex:5,height:"44px",pointerEvents:"none"}},r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{movie:n,user:a}),"wishlist"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pl-1"}),r.a.createElement(_a,{refreshProfile:u,user:a,movieId:n.id})):"")):"",r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-60 col-auto mr-3 mr-sm-0"},r.a.createElement("div",{className:"row no-gutters mb-2 position-relative movies-list-image"},r.a.createElement("img",{alt:"poster of ".concat(n.id),width:"100%",style:{borderRadius:"13px"},src:n.poster_path?"https://image.tmdb.org/t/p/w342".concat(n.poster_path):"https://critics.io/img/movies/poster-placeholder.png"}),r.a.createElement("div",{onClick:function(){return E.push("/movie/".concat(n.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},r.a.createElement("div",{className:"square-50 rounded-circle d-flex flex-center play-btn",onClick:function(e){e.stopPropagation(),w(n.id),O(!0)}},r.a.createElement(Fe.k,{style:{fontSize:"30px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col-sm-60 col"},r.a.createElement("div",{className:"row no-gutters text-title-md mb-0 cursor-pointer",onClick:function(){return E.push("/movie/".concat(n.id))}},r.a.createElement("div",{className:"text-truncate"},n.title)),r.a.createElement("div",{className:"row no-gutters text-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},n.genres.length?n.genres.join("/"):"unknown")),r.a.createElement("div",{className:"row no-gutters mb-2 justify-content-end"},r.a.createElement(ke,{size:"small",selected:!!a.ratings[n.id]&&"excellent_rate"===a.ratings[n.id].rate_type,movie:n,emoji:"fire",className:"mr-1 mb-2",value:c[n.id]?c[n.id].excellent_rate:0}),r.a.createElement(ke,{size:"small",selected:!!a.ratings[n.id]&&"good_rate"===a.ratings[n.id].rate_type,movie:n,emoji:"heart",className:"mr-1 mb-2",value:c[n.id]?c[n.id].good_rate:0}),r.a.createElement(ke,{size:"small",selected:!!a.ratings[n.id]&&"ok_rate"===a.ratings[n.id].rate_type,movie:n,className:"mr-1 mb-2",emoji:"heavy_division_sign",value:c[n.id]?c[n.id].ok_rate:0}),r.a.createElement(ke,{size:"small",emoji:"shit",value:c[n.id]?c[n.id].bad_rate:0,selected:!!a.ratings[n.id]&&"bad_rate"===a.ratings[n.id].rate_type,movie:n})),r.a.createElement("div",{className:"row no-gutters d-flex d-sm-none"},"watchedlist"!==o?r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{movie:n,user:a}),"wishlist"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pl-1"}),r.a.createElement(_a,{refreshProfile:u,user:a,movieId:n.id})):""):""))))}))),r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(t.length/12),current:v,setCurrent:g}))))})),ja=function(e){var t=e.movies,a=e.owner,c=e.refreshProfile,s=e.ratings,o=Object(n.useState)(0),l=Object(f.a)(o,2),i=l[0],m=l[1],u=function(e,t){var a=["All"];return e.forEach((function(e){t[e.movie_id]&&t[e.movie_id].movie_genres.forEach((function(e){e.name?a.includes(e.name)||a.push(e.name):a.includes(e)||a.push(e)}))})),a}(t,s);return r.a.createElement("div",{className:"col-60 px-0"},r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},u.length>1?r.a.createElement(qe.a,{style:{padding:"14px 0",width:"100%",overflowX:"auto",whiteSpace:"nowrap"}},u.map((function(e,t){return r.a.createElement("div",{onClick:function(){m(t)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(i===t?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},e)}))):"")),t.length?r.a.createElement(Oa,{refreshProfile:c,owner:a,listType:"wishlist",movies:t.filter((function(e){return s[e.movie_id]&&s[e.movie_id].movie_genres.includes(u[i])||"All"===u[i]}))}):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5 text-white",style:{height:"150px"}},"You have not added any movies/series to your wishlist."))},ka=function(e){var t=e.movies,a=e.ratings,c=Object(n.useState)(0),s=Object(f.a)(c,2),o=s[0],l=s[1],i=function(e,t){var a=["All"];return e.forEach((function(e){t[e.movie_id]&&t[e.movie_id].movie_genres.forEach((function(e){e.name?a.includes(e.name)||a.push(e.name):a.includes(e)||a.push(e)}))})),a}(t,a);return r.a.createElement("div",{className:"col-60 px-0"},r.a.createElement("div",{className:"row no-gutters justify-content-end text-light align-items-center mb-2"},r.a.createElement("div",{className:"col-auto"},i.length>1?r.a.createElement(qe.a,{style:{padding:"14px 0",maxWidth:"100%",overflowX:"auto",whiteSpace:"nowrap"}},i.map((function(e,t){return r.a.createElement("div",{onClick:function(){l(t)},style:{display:"inline-block"},key:"genre-for-popular-movie-".concat(t),className:"px-4 ".concat(o===t?"btn-tertiary-selected text-white":"btn-tertiary text-light-white")},e)}))):"")),t.length?r.a.createElement(Oa,{listType:"watchedlist",movies:t.filter((function(e){return a[e.movie_id]&&a[e.movie_id].movie_genres.includes(i[o])||"All"===i[o]}))}):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5 text-white",style:{height:"150px"}},"You have not watched any movies/series yet. Please go to your wishlist any mark titles as watched."))};var Sa=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.reviews,a=e.publicUsers,c=e.ratings,s=Object(n.useState)({}),o=Object(f.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(-1),p=Object(f.a)(d,2),v=p[0],g=p[1],b=Object(n.useState)(-1),h=Object(f.a)(b,2),w=h[0],y=h[1],_=Object(n.useState)(1),O=Object(f.a)(_,2),j=O[0],k=O[1],S=Object(n.useRef)(null);Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===v){e.next=5;break}return e.next=3,Y(v);case 3:t=e.sent,u((function(e){return Object.assign({},e,Object(Ge.a)({},v,t))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[v]);var C=-1===w?1:w;return r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-2",ref:S}),t.length?t.slice(8*(C-1),8*(C-1)+8).map((function(e,t){return c[e.movie_id]?r.a.createElement(r.a.Fragment,{key:"fragment-review-".concat(t)},r.a.createElement("div",{key:"review-".concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,onClick:function(){return E.push("/movie/".concat(e.id))},width:"100%",style:{borderRadius:"13px"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4),")")))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2"},"Posted review on"),r.a.createElement("span",{className:"text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 flex-grow-0 font-weigt-300 text-break"},e.review),r.a.createElement("div",{className:"row no-gutters align-items-center"},e.rating?r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy-division-sign":"shit",set:"facebook",size:24})):""),r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(x.k,{fontSize:"24px",className:"text-green"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto mr-2"},r.a.createElement(x.b,{onClick:function(){g(v===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"}))))))))),r.a.createElement(Xe.a,{in:v===e._id,className:"mb-3"},r.a.createElement("div",{className:"ml-4 h5 py-2 text-white"},"Comments (",m[e._id]?m[e._id].length:0,")"),m[e._id]?m[e._id].slice(j*(j-1),j*(j-1)+5).map((function(e,t){return r.a.createElement("div",{key:"comment-".concat(v,"-").concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded ml-4 mb-2"},r.a.createElement("div",{className:"col-auto pr-4 d-none d-md-block"},r.a.createElement("div",{className:"bg-image rounded-circle square-70",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters align-items-center mb-2"},r.a.createElement("div",{className:"col-auto pr-2 d-block d-md-none"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 h6 text-white mb-0"},a[e.author]?a[e.author].display_name:""),r.a.createElement("div",{className:"col-auto mr-3 text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 font-weight-300 text-break"},e.comment),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(x.k,{fontSize:"24px",className:"text-green cursor-pointer"})))))))})):"",r.a.createElement("div",{className:"row no-gutters justify-content-end"},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Je,{count:Math.ceil(m[e._id]?m[e._id].length/5:1),current:j,setCurrent:k,classNames:{notSelected:"input-dark",selected:"input-dark-selected"}}))))):""})):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5",style:{height:"150px"}},"You have not reviewed any movies/series. Your review will help your friends and family pick the right movie or series to watch."),r.a.createElement("div",{className:"row no-gutters justify-content-sm-end justify-content-center mt-2"},r.a.createElement("div",{className:"col-auto mb-4 mr-sm-2 mr-md-0"},r.a.createElement(Je,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(t.length/8),current:C,setCurrent:y})))))}));var Ca=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.comments,a=e.publicUsers,c=e.ratings,s=Object(n.useState)(-1),o=Object(f.a)(s,2),l=o[0],i=o[1],m=Object(n.useRef)(null),u=-1===l?1:l;return r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters mb-2",ref:m}),t.length?t.slice(8*(u-1),8*(u-1)+8).map((function(e,t){return r.a.createElement("div",{key:"comment-".concat(t),className:"row no-gutters p-4 bg-over-root-lighter rounded mb-2"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"150px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,onClick:function(){return E.push("/movie/".concat(e.id))},width:"100%",style:{borderRadius:"13px"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters text-white mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center text-white"},r.a.createElement("div",{className:"col-auto mr-3 h6 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters text-white"},r.a.createElement("span",{className:"mr-2"},"Commented on"),r.a.createElement("span",{className:"text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"row no-gutters text-light mb-3 flex-grow-0 font-weight-300"},e.comment),r.a.createElement("div",{className:"row no-gutters flex-grow-1"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-end align-items-center text-white"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(x.k,{fontSize:"24px",className:"text-green"})))))))))})):r.a.createElement("div",{className:"row no-gutters flex-center bg-over-root-lighter rounded p-5",style:{height:"150px"}},"You have not commented on any comments. We encourage you to share your opinion on your friends and family comments."),r.a.createElement("div",{className:"row no-gutters justify-content-sm-end justify-content-center mt-2"},r.a.createElement("div",{className:"col-auto mb-4 mr-sm-2 mr-md-0"},r.a.createElement(Je,{classNames:{notSelected:"input-dark",selected:"input-dark-selected"},count:Math.ceil(t.length/8),current:u,setCurrent:i})))))})),Ia=a(141),Ta=function(e){var t=e.user,a=e.refreshProfile,c=e.editProfileOpen,s=e.onClose,o=Object(n.useState)({first_name:"",last_name:"",display_name:"",photo:"",password:"",confirm_assword:"",_id:"",token:""}),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)(""),g=Object(f.a)(v,2),E=g[0],b=g[1],N=Object(n.useRef)(null);Object(n.useEffect)((function(){t.photo&&p((function(e){return Object.assign({},e,{first_name:t.first_name,last_name:t.last_name,display_name:t.display_name,email:t.email,photo:t.photo,token:t.token})}))}),[t.first_name]);var h=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],n={maxSizeMB:1,maxWidthOrHeight:100,useWebWorker:!0},e.prev=2,e.next=5,Object(Ia.a)(a,n);case 5:return r=e.sent,e.next=8,Ia.a.getDataUrlFromFile(r);case 8:c=e.sent,p((function(e){return Object.assign({},e,{photo:c})})),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),w=[{valid:/[^\w\s]/.test(u.password)||/\d/.test(u.password),error:"Password must contain number or symbol"},{valid:u.password===u.confirm_assword,error:"Passwords don't match"},{valid:u.password.length>=6,error:"Password must contain at least 6 characters"}];return r.a.createElement(ze,{open:c,onClose:s},r.a.createElement("div",{className:"col-xl-30 col-lg-40 col-md-50 col-58 bg-over-root-lighter rounded p-sm-5 p-4"},r.a.createElement("div",{className:"row no-gutters mb-3 text-title-lg"},"Update profile"),r.a.createElement("div",{className:"row no-gutters justify-content-center mb-5"},r.a.createElement("div",{className:"col-auto text-center"},r.a.createElement("div",{className:"row no-gutters justify-content-center"},r.a.createElement("div",{className:"square-100 bg-image rounded-circle d-flex align-items-end overflow-hidden mb-2",style:{backgroundImage:"url(".concat(u.photo,")")}},r.a.createElement("input",{spellCheck:!1,onChange:h,type:"file",className:"d-none",ref:N}))),r.a.createElement("div",{className:"btn-custom btn-custom-primary px-4",onClick:function(){return N.current.click()}},"Upload photo"))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-30 pr-2"},r.a.createElement("div",{className:"row no-gutters text-light"},"First Name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,type:"text",className:"input-light px-3 w-100",value:u.first_name,onChange:function(e){e.persist(),p((function(t){return Object.assign({},t,{first_name:e.target.value})}))}}))),r.a.createElement("div",{className:"col-30"},r.a.createElement("div",{className:"row no-gutters text-light"},"Last Name"),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("input",{spellCheck:!1,type:"text",className:"input-light px-3 w-100",value:u.last_name,onChange:function(e){e.persist(),p((function(t){return Object.assign({},t,{last_name:e.target.value})}))}})))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Email"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{disabled:!0,spellCheck:!1,type:"text",className:"input-light-disabled px-3 w-100 user-select-none",value:u.email}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Display Name"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,type:"text",className:"input-light px-3 w-100",value:u.display_name,onChange:function(e){e.persist(),p((function(t){return Object.assign({},t,{display_name:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{type:"password",spellCheck:!1,className:"input-light px-3 w-100",value:u.password,onChange:function(e){e.persist(),p((function(t){return Object.assign({},t,{password:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-60 text-light"},"Confirm Password"),r.a.createElement("div",{className:"col-60"},r.a.createElement("input",{spellCheck:!1,type:"password",className:"input-light px-3 w-100",value:u.confirm_assword,onChange:function(e){e.persist(),p((function(t){return Object.assign({},t,{confirm_assword:e.target.value})}))}}))),r.a.createElement("div",{className:"row no-gutters align-items-center text-danger justify-content-end",style:{height:"50px",opacity:E?1:0}},E),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-sm-auto btn-custom btn-custom-secondary btn-small mr-sm-2 mb-2 col-60",onClick:s},"Cancel"),r.a.createElement("div",{className:"col-sm-auto col-60 btn-custom btn-custom-primary btn-small",onClick:Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=w.filter((function(e){return!e.valid}))).length||!u.password){e.next=5;break}b(t[0].error),e.next=11;break;case 5:return n={},Object.keys(u).forEach((function(e){u[e]&&(n[e]=u[e])})),e.next=9,B(n);case 9:(r=e.sent).error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:r.error,type:"failure"}}):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Profile updates",message:"You successfully updated your profile",type:"success"}}),d.dispatch({type:"UPDATE_PUBLICUSERS",publiUser:r.updatedPublicUser}),d.dispatch({type:"UPDATE_USER",userProperty:r.updatedUser}),a(),s(),localStorage.movies_user_token=r.newToken);case 11:case"end":return e.stop()}}),e)})))},"Save"))))};var Aa=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,ratings:e.ratings,publicUsers:e.publicUsers},t)}))((function(e){var t=e.user,a=e.match.params.userId,c=e.publicUsers,s=e.ratings,o=e.match.params.section,m=Object(n.useState)({wishlist:[],comments:[],watchedlist:[],reviews:[],first_name:"",last_name:""}),u=Object(f.a)(m,2),d=u[0],p=u[1],v=Object(n.useState)([]),g=Object(f.a)(v,2),E=g[0],b=g[1],N=Object(n.useState)([]),h=Object(f.a)(N,2),w=h[0],y=h[1],x=Object(n.useRef)(!1),_=Object(n.useRef)(!1),O=Object(n.useState)(0),j=Object(f.a)(O,2),k=j[0],S=j[1],C=Object(n.useState)(!1),I=Object(f.a)(C,2),T=I[0],A=I[1],D=Object(n.useState)(!1),Y=Object(f.a)(D,2),M=Y[0],R=Y[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,L(a);case 3:(t=e.sent).error||p(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,M,t.wishlist.length]),Object(n.useEffect)((function(){void 0!==o&&S(+o)}),[o]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==k||x.current||!d.reviews.length){e.next=8;break}return x.current=!0,e.next=4,q(d.reviews);case 4:(t=e.sent).error||b(t.reverse()),e.next=14;break;case 8:if(3!==k||_.current){e.next=14;break}return _.current=!0,e.next=12,W(d.comments);case 12:(a=e.sent).error||y(a.reverse());case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k,d.reviews.length]),r.a.createElement("div",{className:"row no-gutters",style:{minHeight:"800px"}},r.a.createElement(Ta,{refreshProfile:function(){return R(!M)},editProfileOpen:T,user:t,onClose:function(){return A(!1)}}),r.a.createElement("div",{className:"col-60 content-container mx-auto p-sm-5 p-4"},r.a.createElement("div",{className:"row no-gutters justify-content-xl-between justify-content-center text-white bg-over-root-lighter p-sm-5 p-4 rounded mb-2"},r.a.createElement("div",{className:"col-auto mb-4 mr-lg-5"},r.a.createElement("div",{className:"row no-gutters justify-content-xl-start justify-content-center"},r.a.createElement("div",{className:"col-auto bg-image square-100 rounded-circle mr-md-4",style:{backgroundImage:"url(".concat(c[a]?c[a].photo:"",")")}}),r.a.createElement("div",{className:"col-60 col-md-auto"},d.first_name||d.last_name?r.a.createElement("div",{className:"row no-gutters text-title-lg justify-content-md-start justify-content-center"},r.a.createElement("div",{className:"col-auto mr-2"},d.first_name?d.first_name:""),r.a.createElement("div",{className:"col-auto"},d.last_name?d.last_name:"")):r.a.createElement("div",{className:"row no-gutters h5 justify-content-md-start justify-content-center"},"Full name is empty"),r.a.createElement("div",{className:"row no-gutters justify-content-md-start justify-content-center text-title-md mb-2"},"@",c[a]?c[a].display_name:""),r.a.createElement("div",{className:"row no-gutters justify-content-md-start justify-content-center"},r.a.createElement("div",{className:"col-auto btn-custom btn-custom-primary btn-small",onClick:function(){return A(!0)}},"Edit Profile"))))),r.a.createElement("div",{className:"col-sm-auto col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-center h-100 align-items-center"},r.a.createElement("div",{className:"col-sm-auto col mr-sm-4"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Wishlist"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end"},d.wishlist.length)),r.a.createElement("div",{className:"col-sm-auto col mr-sm-4 mr-0"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Watched"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end"},d.watchedlist.length)),r.a.createElement("div",{className:"col-sm-auto col mr-sm-4 mr-0"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Reviews"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end profile-stats-title"},d.reviews.length)),r.a.createElement("div",{className:"col-sm-auto col"},r.a.createElement("div",{className:"row no-gutters mb-3 profile-stats-title"},"Comments"),r.a.createElement("div",{className:"row no-gutters text-lift justify-content-end"},d.comments.length))))),r.a.createElement("div",{className:"bg-over-root-lighter row no-gutters rounded w-100 justify-content-between text-white"},r.a.createElement("div",{className:"col-60"},r.a.createElement(qe.a,{style:{maxWidth:"100%",overflowX:"auto",whiteSpace:"nowrap"}},r.a.createElement("div",{className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",style:{borderTop:"3px solid transparent",borderBottom:0===k?"3px solid rgb(255, 0, 64)":"3px solid transparent"},onClick:function(){return S(0)}},"Wishlist"),r.a.createElement("div",{style:{borderTop:"3px solid transparent",borderBottom:1===k?"3px solid rgb(255, 0, 64)":"3px solid transparent"},className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",onClick:function(){return S(1)}},"Watched"),r.a.createElement("div",{style:{borderTop:"3px solid transparent",borderBottom:2===k?"3px solid rgb(255, 0, 64)":"3px solid transparent"},className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",onClick:function(){return S(2)}},"Reviews"),r.a.createElement("div",{style:{borderTop:"3px solid transparent",borderBottom:3===k?"3px solid rgb(255, 0, 64)":"3px solid transparent"},className:"d-inline-block p-sm-4 p-3 cursor-pointer mr-4 text-title-md mb-0 user-select-none",onClick:function(){return S(3)}},"Comments")))),0===k?r.a.createElement(ja,{ratings:s,refreshProfile:function(){return R(!M)},movies:d.wishlist,owner:t._id===d._id}):1===k?r.a.createElement(ka,{ratings:s,movies:d.watchedlist}):2===k?r.a.createElement(Sa,{ratings:s,reviews:E}):3===k?r.a.createElement(Ca,{ratings:s,comments:w}):""))})),Da=function(e){var t=e.Component,a=e.bearerPath,c=(e.user,Object(Ne.a)(e,["Component","bearerPath","user"])),s=c.computedMatch.url,o=Object(n.useState)({ready:!1,valid:!1}),m=Object(f.a)(o,2),u=m[0],p=m[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=localStorage.getItem("movies_user_token"))&&t.length){e.next=5;break}p((function(e){return Object.assign({},e,{ready:!0})})),e.next=9;break;case 5:return e.next=7,k({token:t});case 7:(a=e.sent).error?(E.push("/"),d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Your role is not admin",message:"Only website admins can access this page",type:"failure"}})):"Administrator"===a.role?p((function(e){return Object.assign({},e,{ready:!0,valid:!0})})):(d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Your role is not admin",message:"Contact website administrator to change your role",type:"failure"}}),E.push("/"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),u.ready?r.a.createElement(v.b,Object.assign({},c,{render:function(e){return u.valid?r.a.createElement(t,e):r.a.createElement(v.a,{to:{pathname:a,state:{successPath:s}}})}})):r.a.createElement("div",null)},Ya=a(195),Ma=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],s=!1,o=localStorage.getItem("closed_movies_announcements");o=o?JSON.parse(o):[];var m,u=Object(Ya.a)(a);try{for(u.s();!(m=u.n()).done;){var d=m.value;if(!o.includes(d.description)){s=d;break}}}catch(b){u.e(b)}finally{u.f()}var p=Object(n.useState)(!1),v=Object(f.a)(p,2),g=v[0],E=v[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:(t=e.sent).error||t.length&&c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),s&&s.description&&!g?r.a.createElement("div",{className:"row p-2 position-relative no-gutters justify-content-center ".concat("Warning"===s.type?"bg-warning":"Information"===s.type?"bg-primary":"Error"===s.type?"bg-danger":"")},r.a.createElement("div",{onClick:function(){E(!0),o.push(s.description),localStorage.setItem("closed_movies_announcements",JSON.stringify(o))},className:"square-20 rounded-circle d-flex flex-center bg-white cursor-pointer scale-transition position-absolute",style:{right:"10px",top:0,bottom:0,margin:"auto",zIndex:5}},r.a.createElement(Fe.m,{className:"text-dark"})),r.a.createElement("div",{className:"col-60 content-container text-white"},r.a.createElement("div",{className:"row no-gutters justify-content-center"},r.a.createElement("div",{className:"col-auto mr-2 d-none d-md-block",style:{width:"30px"}}),r.a.createElement("div",{className:"col mr-2 pl-2 pl-md-0"},r.a.createElement("div",{className:"row no-gutters justify-content-center"},s.description)),r.a.createElement("div",{className:"col-auto",style:{width:"30px"}})))):""};var Ra=function(e){return n.createElement("div",{className:"square-35 position-relative cursor-pointer"},n.createElement("div",{className:"position-absolute text-white",style:{top:"0px",right:"5px",fontSize:"10px"}},e.count?e.count:0),n.createElement("svg",Object.assign({viewBox:"-11 0 512 512",width:"100%"},e),n.createElement("path",{d:"M298.668 426.668c0 47.129-38.207 85.332-85.336 85.332S128 473.797 128 426.668c0-47.129 38.203-85.336 85.332-85.336 47.129 0 85.336 38.207 85.336 85.336zm0 0",fill:"#ffa000"}),n.createElement("path",{d:"M362.836 254.316c-72.32-10.328-128.168-72.515-128.168-147.648 0-21.336 4.562-41.578 12.648-59.95-10.921-2.558-22.27-4.05-33.984-4.05C130.988 42.668 64 109.652 64 192v59.477c0 42.218-18.496 82.07-50.945 109.503A37.235 37.235 0 000 389.332c0 20.59 16.746 37.336 37.332 37.336h352c20.59 0 37.336-16.746 37.336-37.336 0-10.922-4.758-21.27-13.27-28.543-31.488-26.644-49.75-65.324-50.562-106.473zm0 0",fill:"#ffc107"}),n.createElement("path",{d:"M490.668 106.668c0 58.91-47.758 106.664-106.668 106.664s-106.668-47.754-106.668-106.664C277.332 47.758 325.09 0 384 0s106.668 47.758 106.668 106.668zm0 0",fill:"#f44336"})))},Ua=a(364);var Pa=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,ratings:e.ratings},t)}))((function(e){var t=e.movies,a=e.onClick;return r.a.createElement("div",{className:"row"},t.map((function(e,t){return r.a.createElement("div",{key:"result-".concat(t),className:"p-2 movie-card-minified",style:{flexBasis:"300px",flexGrow:1},onClick:function(){E.push("/".concat(e.name?"series":"movie","/").concat(e.id)),a()}},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-3"},r.a.createElement("div",{className:"row no-gutters mb-2 position-relative"},r.a.createElement("div",{className:"square-70 bg-image rounded",style:{backgroundImage:"url(".concat(e.poster_path?"https://image.tmdb.org/t/p/w342".concat(e.poster_path):"https://critics.io/img/movies/poster-placeholder.png",")")}}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters mb-0 cursor-pointer",onClick:function(){return E.push("/movie/".concat(e.id))}},r.a.createElement("div",{className:"text-truncate"},e.title?e.title:e.name)),r.a.createElement("div",{className:"row no-gutters text-muted mb-2"},r.a.createElement("div",{className:"text-truncate",style:{maxWidth:"100%"}},e.genre_ids.length?e.genre_ids.map((function(e){var t=h.find((function(t){return t.id===e})),a=w.find((function(t){return t.id===e}));return t?t.name:a?a.name:"unkonwn"})).join("/"):"unknown")))))})))}));var Fa=Object(p.b)((function(e,t){return Object(b.a)({publicUsers:e.publicUsers,ratings:e.ratings},t)}))((function(e){var t=e.reviews,a=e.publicUsers,c=e.ratings,s=Object(n.useState)(-1),o=Object(f.a)(s,2),l=o[0],i=o[1];return t.slice(0,8).map((function(e,t){return r.a.createElement("div",{onClick:function(){return E.push("/movie/".concat(e.movie_id))},key:"review-".concat(t),className:"row no-gutters p-2 border-bottom rounded mb-2 text-dark movie-card-minified"},r.a.createElement("div",{className:"col-sm-auto col-20 pr-4 d-none d-sm-block",style:{maxWidth:"100px"}},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("img",{alt:c[e.movie_id].movie_poster,width:"100%",style:{borderRadius:"13px",cursor:"pointer"},src:"https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster)}))),r.a.createElement("div",{className:"col d-flex flex-column"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center mb-2 flex-grow-0"},r.a.createElement("div",{className:"col-60 d-block d-sm-none mb-3"},r.a.createElement("div",{className:"row no-gutters mb-1"},r.a.createElement("div",{className:"col-auto pr-3"},r.a.createElement("div",{className:"square-70 rounded bg-image",style:{backgroundImage:"url(https://image.tmdb.org/t/p/w154".concat(c[e.movie_id].movie_poster,")")}})),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters h6 mb-0"},c[e.movie_id].movie_title," (",c[e.movie_id].movie_release_date.substring(0,4)),r.a.createElement("div",{className:"row no-gutters text-muted"},r.a.createElement("div",{className:"text-truncate"},e.movie_genres))))),r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters justify-content-between"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto pr-2"},r.a.createElement("div",{className:"bg-image rounded-circle square-40",style:{backgroundImage:"url(".concat(a[e.author]?a[e.author].photo:"",")")}})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-3 mb-0"},a[e.author]?a[e.author].display_name:""))))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("span",{className:"mr-2"},"Posted review on"),r.a.createElement("span",{className:"text-muted"},Ve.a.format(new Date(e.date),"MMM DD, YYYY"))))))),r.a.createElement("div",{className:"row no-gutters mb-3 font-size-14 flex-grow-0"},e.review),r.a.createElement("div",{className:"row no-gutters flex-grow-1 align-items-bottom"},r.a.createElement("div",{className:"col-60 d-flex flex-column justify-content-end"},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},e.rating?r.a.createElement("div",{style:{marginBottom:"-6px"}},r.a.createElement(N.a,{emoji:"excellent_rate"===e.rating?"fire":"good_rate"===e.rating?"heart":"ok_rate"===e.rating?"heavy-division-sign":"shit",set:"facebook",size:24})):"")),r.a.createElement("div",{className:"col-auto px-0"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-auto mr-2"},e.likes.length),r.a.createElement("div",{className:"col-auto mr-2 "},r.a.createElement(x.k,{fontSize:"24px",className:"text-green"})),r.a.createElement("div",{className:"col-auto mr-2"},e.comments.length),r.a.createElement("div",{className:"col-auto"},r.a.createElement(x.b,{onClick:function(){i(l===e._id?-1:e._id)},fontSize:"24px",className:"text-orange scale-transition cursor-pointer"})))))))))}))}));var za=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,search:e.search,settings:e.settings},t)}))((function(e){var t=["All","Movies","Series","Reviews"],a=e.search.category,c=e.settings,s=Object(n.useState)(""),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useState)([]),v=Object(f.a)(p,2),g=v[0],b=v[1],N=Object(n.useState)([]),h=Object(f.a)(N,2),w=h[0],y=h[1],x=Object(n.useState)([]),_=Object(f.a)(x,2),O=_[0],j=_[1],k=Object(n.useState)(!1),S=Object(f.a)(k,2),C=S[0],I=S[1],T=Object(n.useRef)(!1),A=function(){d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Error",message:"You need to provide valid api key in admin dashboard",type:"failure"}})};return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=29;break}if(I(!0),T.current=!1,"Reviews"!==a&&"All"!==a){e.next=10;break}return e.next=6,V(m);case 6:(t=e.sent).error||T.current||b(t.slice(0,5)),e.next=11;break;case 10:b([]);case 11:if("Movies"!==a&&"All"!==a){e.next=18;break}return e.next=14,Re(m,c.movies_api_key);case 14:(n=e.sent).results?T.current||y(n.results.slice(0,10)):A(),e.next=19;break;case 18:y([]);case 19:if("Series"!==a&&"All"!==a){e.next=26;break}return e.next=22,Ue(m,c.movies_api_key);case 22:(r=e.sent).results?T.current||j(r.results.slice(0,10)):A(),e.next=27;break;case 26:j([]);case 27:e.next=34;break;case 29:T.current=!0,I(!1),y([]),j([]),b([]);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[m,a]),r.a.createElement("div",{className:"row no-gutters w-100"},r.a.createElement("div",{className:"col-60 position-relative"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(ft,{popoverClass:"col-auto",items:t,onSelect:function(e){return d.dispatch({type:"UPDATE_SEARCH",search:{category:t[e]}})},popoverWidth:"150px",className:"col-auto input-prepend-select",btnName:a}),r.a.createElement("div",{className:"col position-relative"},r.a.createElement("input",{onBlur:Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:I(!1);case 3:case"end":return e.stop()}}),e)}))),onFocus:Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I(!0));case 1:case"end":return e.stop()}}),e)}))),value:m,onKeyUp:function(e){13===e.keyCode&&(u(""),d.dispatch({type:"UPDATE_SEARCH",search:{query:m}}),E.push("/search"))},onChange:function(e){e.persist(),u(e.target.value)},type:"text",spellCheck:!1,className:"w-100 input"}),r.a.createElement(Fe.l,{onClick:function(){return E.push("/search")},fontSize:"24px",className:"position-absolute text-white cursor-pointer",style:{top:0,bottom:0,right:"20px",margin:"auto"}}))),r.a.createElement("div",{className:"row no-gutters position-absolute px-3 bg-white w-100 overflow-auto",style:{top:"50px",left:0,maxHeight:"500px"}},r.a.createElement("div",{className:"col-60"},C?r.a.createElement(r.a.Fragment,null,w.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters pt-3 pb-1 font-weight-bold"},"Movies (",w.length,")"),r.a.createElement(Pa,{onClick:function(){return u("")},movies:w})):"",O.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters pt-3 pb-1 font-weight-bold"},"Series (",O.length,")"),r.a.createElement(Pa,{movies:O,onClick:function(){return u("")}})):"",g.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row no-gutters pt-3 pb-1 font-weight-bold"},"Reviews (",g.length,")"),r.a.createElement(Fa,{reviews:g,onClick:function(){return u("")}})):""):""),r.a.createElement("div",{className:"col-60"}))))}));var La=Object(Ua.a)(Object(p.b)((function(e,t){return Object(b.a)({user:e.user,search:e.search,dashboardMenuOpened:e.dashboardMenuOpened},t)}))((function(e){var t=e.user,a=e.dashboardMenuOpened,c=e.height,s=Object(n.useState)(!0),o=Object(f.a)(s,2),m=o[0],u=o[1],p=Object(n.useRef)(100),g=Object(n.useState)("up"),b=Object(f.a)(g,2),N=b[0],h=b[1],w=Object(n.useState)([]),y=Object(f.a)(w,2),O=y[0],j=y[1],k=Object(n.useRef)(null),S=Object(v.e)();return Object(n.useEffect)((function(){function e(){var e=window.scrollY;p.current<e?h("down"):h("up"),p.current=e,u(0===e)}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.notifications){e.next=5;break}return e.next=3,de(t.notifications);case 3:(a=e.sent).error||j(a.map((function(e){return Object.assign({},e,{seen:!1})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(n.useEffect)((function(){c&&d.dispatch({type:"SET_HEIGHT",height:c})}),[c]),"/login"!==S.pathname&&"/signup"!==S.pathname?r.a.createElement("div",{className:"col-60 px-0",style:{position:"sticky",zIndex:59,transition:"top 0.5s",top:"up"===N?"0px":"-".concat(c,"px"),left:0,right:0}},r.a.createElement(Ma,null),r.a.createElement("div",{className:"bg-transition row no-gutters justify-content-center".concat(m?"":" bg-root")},r.a.createElement("div",{className:"col-60".concat("/admin"!==S.pathname?" content-container":"")},r.a.createElement("div",{className:"row no-gutters justify-content-between px-3 py-2 align-items-center flex-nowrap"},r.a.createElement("div",{className:"col-auto d-none d-sm-block pr-sm-5 pr-3 text-white pl-sm-3 pl-2"},r.a.createElement("div",{className:"row no-gutters align-items-end cursor-pointer",onClick:function(){return E.push("/")}},r.a.createElement("div",{className:"square-50 mr-2"},r.a.createElement(mt,null)),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters h4 logo"},"CozyPotato"),r.a.createElement("div",{className:"row no-gutters justify-content-end text-light",style:{fontSize:"13px",marginTop:"-14px"}},"Community")))),r.a.createElement("div",{className:"d-block d-sm-none cursor-pointer",onClick:function(){return E.push("/")}},r.a.createElement("div",{className:"square-40 mx-auto"},r.a.createElement(mt,null)),r.a.createElement("div",{className:"col-auto text-white"},r.a.createElement("div",{className:"row no-gutters logo h5"},"CozyPotato"),r.a.createElement("div",{className:"row no-gutters justify-content-end text-light",style:{fontSize:"10px",marginTop:"-10px"}},"Community"))),r.a.createElement("div",{className:"col pr-3 d-none d-md-block"},r.a.createElement(za,{navbarHeight:c})),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},t.display_name?r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(we,{content:function(e){return r.a.createElement("div",{className:"container-fluid rounded px-0",style:{maxWidth:"400px",width:"100%"}},O.length?O.map((function(e,a){return r.a.createElement("div",{key:"notificaiton-".concat(a),className:"row no-gutters p-3".concat(a!==O.length-1?" border-bottom":"")},r.a.createElement("div",{className:"col-60 text-left mb-1 font-weight-bold"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col mr-3"},e.subject),r.a.createElement("div",{className:"col-auto text-left text-primary-custom"},r.a.createElement("small",null,Ve.a.format(new Date(e.start_date),"MMM DD, YYYY"))))),r.a.createElement("div",{className:"col-60 text-left font-size-13"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col mr-3"},e.description),r.a.createElement("div",{className:"col-auto"},r.a.createElement(Fe.n,{onClick:Object(i.a)(l.a.mark((function a(){var n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c=e._id,s=t._id,_("/user/notifications/delete",{id:c,userId:s});case 2:a.sent.error||(n=d.getState().user.notifications,-1!==(r=n.findIndex((function(t){return t===e._id})))&&n.splice(r,1),d.dispatch({type:"UPDATE_USER",userProperty:{notifications:n}}));case 4:case"end":return a.stop()}var c,s}),a)}))),fontSize:"26px",className:"cursor-pointer notification-close-icon"})))))})):r.a.createElement("div",{className:"row no-gutters flex-center p-4"},"You don't have notifications right now"))}},r.a.createElement("div",{className:"col-auto"},r.a.createElement(Ra,{count:O.length}))))):"",r.a.createElement("div",{className:"col-auto text-white"},t.display_name?r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement(we,{content:function(e){return r.a.createElement("div",{style:{borderRadius:"4px",overflow:"hidden",minWidth:"".concat(e,"px")}},"Administrator"===t.role?r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),E.push("/admin")}},"Administration"):"",r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),E.push("/profile/".concat(t._id))}},"My Profile"),r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),E.push("/profile/".concat(t._id,"/2"))}},"My Reviews"),r.a.createElement("div",{className:"popover-item border-bottom",onClick:function(){k.current.click(),E.push("/profile/".concat(t._id,"/0"))}},"My Wishlist"),r.a.createElement("div",{className:"popover-item",onClick:function(){k.current.click(),localStorage.removeItem("movies_user_token"),d.dispatch({type:"SET_USER",user:{first_name:"",last_name:"",display_name:"",photo:"",token:"",email:"",ratings:{},reviews:[],wishlist:[],watchedlist:[],notifications:[]}}),E.push("/")}},"Logout"))}},r.a.createElement("div",{className:"col-60",ref:k},r.a.createElement("div",{className:"row no-gutters align-items-center cursor-pointer"},r.a.createElement("div",{className:"col-auto mr-2 rounded-circle square-40 bg-image",style:{backgroundImage:"url(".concat(t.photo,")"),border:"1px solid white"}}),r.a.createElement("div",{className:"col-auto mr-2 d-none d-sm-block"},t.display_name),r.a.createElement("div",{className:"col-auto user-select-none"},r.a.createElement(Fe.e,{fontSize:"14px"})))))):r.a.createElement("div",{className:"row no-gutters pr-sm-3 pr-2 align-items-center"},r.a.createElement("div",{className:"col-auto cursor-pointer fb-btn",onClick:function(){E.push("/login")}},"Login"),r.a.createElement("div",{className:"col-auto cursor-pointer fb-btn",onClick:function(){return E.push("/signup")}},"Signup"))),"/admin"===S.pathname?r.a.createElement(x.f,{className:"text-white col-auto d-block d-lg-none cursor-pointer",fontSize:"34px",onClick:function(){return d.dispatch({type:"SET_DASHBOARD_MENU_OPENED",isOpened:!a})}}):"")))))):r.a.createElement("div",null)})));var qa=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,settings:e.settings},t)}))((function(e){var t=e.user,a=e.settings,n=[{name:"Home",path:"/",condition:!0},{name:"My Wishlist",condition:t.display_name,path:t._id?"/profile/".concat(t._id,"/0"):"/login"},{condition:t.display_name,name:"My Reviews",path:t._id?"/profile/".concat(t._id,"/2"):"/login"},{name:"About Us",path:"/",condition:!0},{name:"Contact",path:"/",condition:!0}],c=[{icon:ct.b,path:a.FacebookLink},{icon:ct.c,path:a.InstagramLink},{icon:ct.d,path:a.LinkedinLink},{icon:ct.f,path:a.TwitterLink}],s=[{name:"Privacy policy",path:"/privacy-policy"},{name:"Cookies Policy",path:"/cookies-policy"},{name:"Terms And Conditions",path:"/terms-and-conditions"}],o=Object(v.e)();return"/login"!==o.pathname&&"/signup"!==o.pathname?r.a.createElement("div",{className:"row no-gutters justify-content-center bg-over-root text-light"},r.a.createElement("div",{className:"px-sm-5 px-4 py-4 col-60".concat("/admin"!==o.pathname?" content-container":"")},r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{className:"col-auto mb-2"},r.a.createElement("div",{className:"row no-gutters"},n.filter((function(e){return e.condition})).map((function(e,t){return r.a.createElement("div",{key:"footer-item-".concat(t),className:"col-auto text-title-md btn-tertiary-light",onClick:function(){return E.push(e.path)}},e.name)})))),r.a.createElement("div",{className:"col-md-auto col-60 px-3 mb-2"},r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-md-start"},c.map((function(e,t){return r.a.createElement("div",{key:"social-icon-".concat(t),className:"col-auto scale-transition cursor-pointer mr-".concat(t===c.length-1?"0":"2")},r.a.createElement("div",{className:"square-40 rounded-circle bg-white d-flex flex-center",onClick:function(){window.open(e.path)}},r.a.createElement(e.icon,{fontSize:"24px",className:"text-dark"})))}))))),r.a.createElement("div",{className:"row no-gutters justify-content-md-between justify-content-center"},r.a.createElement("div",{className:"col-auto px-3"},"\xa92020 CozyPotato, Inc."),r.a.createElement("div",{className:"col-auto px-3"},r.a.createElement("div",{className:"row no-gutters"},s.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"footer-item-".concat(t)},r.a.createElement("div",{className:"col-auto link-primary d-sm-block d-none",onClick:function(){return E.push(e.path)}},e.name),r.a.createElement("div",{className:"col-auto link-primary d-block d-sm-none",onClick:function(){return E.push(e.path)}},e.name.split(" ")[0]),t!==s.length-1&&r.a.createElement("div",{className:"px-2"},"|"))}))))))):""}));var Wa=Object(p.b)((function(e,t){return Object(b.a)({user:e.user,ratings:e.ratings,settings:e.settings},t)}))((function(e){var t=e.match.params.movieId,a=e.ratings,c=e.settings.movies_api_key,s=e.user,o=Object(n.useState)(-1),m=Object(f.a)(o,2),u=m[0],p=m[1],v=Object(n.useState)({poster_path:"",genres:[],title:"",overview:"",director:"",cast:[],runtime:0,release_date:"",id:""}),g=Object(f.a)(v,2),b=g[0],N=g[1],h=Object(n.useState)(!1),w=Object(f.a)(h,2),y=w[0],x=w[1];return Object(n.useEffect)((function(){b.title&&R(b)}),[b.title]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var a,n,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!c){e.next=14;break}return e.next=3,De(t,c);case 3:return a=e.sent,N((function(e){return Object.assign({},e,Object.assign({},a,{title:a.name,release_date:a.first_air_date}))})),e.next=7,Me(t,c);case 7:n=e.sent,r=n.crew?n.crew.find((function(e){return"Director"===e.job})):null,s=r?r.name:"unknown",o=n.cast?n.cast.map((function(e){return e.name})):[],a.director=s,a.cast=o,N((function(e){return Object.assign({},e,{director:s,cast:o})}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.scrollTo(0,0),function(){e.apply(this,arguments)}()}),[t,c]),r.a.createElement("div",{className:"row no-gutters justify-content-center bg-movie-over-root position-relative"},r.a.createElement("div",{className:"position-absolute w-100 d-block d-lg-none",style:{top:0,left:0}},r.a.createElement("div",{className:"position-relative",style:{height:window.innerHeight,overflow:"hidden"}},r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{alt:b.poster_path,width:"100%",src:"https://image.tmdb.org/t/p/w342/".concat(b.poster_path)}),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgba(0, 0, 0, 0.3) 90%, black)",top:0,left:0}})),r.a.createElement("div",{className:"position-absolute w-100 h-100",style:{background:"linear-gradient(rgb(0 0 0 / 30%), black)",top:0,left:0}}))),r.a.createElement(ze,{open:y,onClose:function(){return x(!1)}},r.a.createElement(Pe,{movieId:t,onEnded:function(){return x(!1)}})),r.a.createElement("div",{className:"col-60 text-white px-md-5 py-5 px-4 content-container"},r.a.createElement("div",{className:"row no-gutters py-5 mb-5"},r.a.createElement("div",{className:"col-auto mr-5 d-none d-lg-block"},r.a.createElement("div",{className:"w-100 position-relative"},r.a.createElement("img",{alt:b.poster_path,style:{borderRadius:"25px"},width:"300px",src:"https://image.tmdb.org/t/p/w342/".concat(b.poster_path)}),r.a.createElement("div",{onClick:function(){return E.push("/movie/".concat(b.id))},className:"col-60 h-100 text-white d-flex flex-center img-cover cursor-pointer",style:{left:0,top:0,position:"absolute",zIndex:4,borderRadius:"13px"}},r.a.createElement("div",{className:"square-60 rounded-circle d-flex flex-center play-btn",onClick:function(e){e.stopPropagation(),x(!0)}},r.a.createElement(Fe.k,{style:{fontSize:"35px",color:"white",marginRight:"-5px"}}))))),r.a.createElement("div",{className:"col position-relative"},r.a.createElement("div",{className:"row no-gutters position-relative",style:{zIndex:5}},r.a.createElement("div",{className:"col-60"},r.a.createElement("div",{className:"row no-gutters h5"},b.title," (",b.release_date.substring(0,4),")"),r.a.createElement("div",{className:"row no-gutters text-movie-muted mb-2"},r.a.createElement("div",{className:"text-truncate"},b.genres.map((function(e){return e.name})).join("/"))),r.a.createElement("div",{className:"row no-gutters mb-4"},r.a.createElement("div",{className:"col-auto font-weight-500 mr-2"},"Duration:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},Oe(b.runtime))),r.a.createElement("div",{className:"row no-gutters mb-4 text-light"},b.overview),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Director:"),r.a.createElement("div",{className:"col-auto mr-5 text-movie-muted"},b.director?b.director:"unknown"))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-auto mr-2"},"Cast:"),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"text-clamp-2 text-muted-light cursor-pointer",onClick:function(e){e.currentTarget.classList.contains("text-clamp-2")?e.currentTarget.classList.remove("text-clamp-2"):e.currentTarget.classList.add("text-clamp-2")}},b.cast.join("    "))))))),r.a.createElement("div",{className:"row no-gutters mb-3"},r.a.createElement(ke,{selected:!!s.ratings[b.id]&&"excellent_rate"===s.ratings[b.id].rate_type,movie:b,emoji:"fire",className:"mr-2 mb-2",value:a[b.id]?a[b.id].excellent_rate:0}),r.a.createElement(ke,{selected:!!s.ratings[b.id]&&"good_rate"===s.ratings[b.id].rate_type,movie:b,emoji:"heart",className:"mr-2 mb-2",value:a[b.id]?a[b.id].good_rate:0}),r.a.createElement(ke,{selected:!!s.ratings[b.id]&&"ok_rate"===s.ratings[b.id].rate_type,movie:b,className:"mr-2 mb-2",emoji:"heavy_division_sign",value:a[b.id]?a[b.id].ok_rate:0}),r.a.createElement(ke,{emoji:"shit",value:a[b.id]?a[b.id].bad_rate:0,selected:!!s.ratings[b.id]&&"bad_rate"===s.ratings[b.id].rate_type,movie:b})),r.a.createElement("div",{className:"row no-gutters mb-5"},r.a.createElement("div",{className:"col-auto mr-2"},"Release date:"),r.a.createElement("div",{className:"col-auto text-movie-muted"},Ve.a.format(new Date(b.release_date),"MMMM DD, YYYY"))),r.a.createElement("div",{className:"row no-gutters justify-content-center justify-content-md-start"},r.a.createElement("div",{className:"col-auto mr-3 btn-custom btn-custom-primary btn-small",onClick:function(){s.token?p(u+1):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Login required",message:"You need to login to write review.",type:"failure"}})}},"Add Review",r.a.createElement(ct.e,{fontSize:"20px",className:"ml-2"})),r.a.createElement(xe,{movie:b,user:s})))))),r.a.createElement(rt,{movie:b,user:s,addReviewTrigger:u})),r.a.createElement("div",{className:"col-60"},r.a.createElement(qa,null)))})),Ba=function(){return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters px-0",style:{minHeight:"800px"}},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(va.a,{fileType:"docx",filePath:ha.a,errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))},Ha=function(){return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters px-0",style:{minHeight:"800px"}},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(va.a,{fileType:"docx",filePath:Ea.a,errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))},Ga=function(){return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),r.a.createElement("div",{className:"row no-gutters px-0",style:{minHeight:"800px"}},r.a.createElement("div",{className:"col-60 py-5 text-dark"},r.a.createElement(va.a,{fileType:"docx",filePath:fa.a,errorComponent:function(){return r.a.createElement("div",null)},onError:function(){return console.log("error doc")}})))};var Ka=function(){return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J((function(e){e.error?d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action required",message:"Settings are not set. Inform website administrator to set Api key and other settings for the website",type:"failure"}}):e.length?d.dispatch({type:"UPDATE_SETTINGS",settings:e[0]}):d.dispatch({type:"SET_NOTIFICATION",notification:{title:"Action required",message:"Settings are not set. Inform website administrator to set Api key and other settings for the website",type:"failure"}})})),S((function(e){var t={};e.forEach((function(e){t[e.tmdb_id]=e})),d.dispatch({type:"SET_RATINGS",ratings:t})})),C((function(e){var t={};e.forEach((function(e){t[e.user_id]=e})),d.dispatch({type:"SET_PUBLICUSERS",publicUsers:t})})),null===(t=localStorage.getItem("movies_user_token"))||!t.length){e.next=9;break}return e.next=7,k({token:t});case 7:(a=e.sent).error||d.dispatch({type:"SET_USER",user:a});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(p.a,{store:d},r.a.createElement(v.c,{history:E},r.a.createElement("div",{className:"container-fluid px-0"},r.a.createElement(La,null),r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/terms-and-conditions",component:Ha}),r.a.createElement(v.b,{exact:!0,path:"/cookies-policy",component:Ba}),r.a.createElement(v.b,{exact:!0,path:"/privacy-policy",component:Ga}),r.a.createElement(v.b,{exact:!0,path:"/",component:tt}),r.a.createElement(v.b,{exact:!0,path:"/movie/:movieId/:reviewId/:commentId",component:st}),r.a.createElement(v.b,{exact:!0,path:"/movie/:movieId/:reviewId",component:st}),r.a.createElement(v.b,{exact:!0,path:"/movie/:movieId",component:st}),r.a.createElement(v.b,{exact:!0,path:"/series/:movieId",component:Wa}),r.a.createElement(v.b,{exact:!0,path:"/search",component:it}),r.a.createElement(Da,{exact:!0,path:"/admin",bearerPath:"/login",Component:ia}),r.a.createElement(v.b,{exact:!0,path:"/login",component:ua}),r.a.createElement(v.b,{exact:!0,path:"/signup",component:ya}),r.a.createElement(v.b,{exact:!0,path:"/profile/:userId/:section",component:Aa}),r.a.createElement(v.b,{exact:!0,path:"/profile/:userId",component:Aa})),r.a.createElement(qa,null),r.a.createElement(xa,null))))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ka,null)),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.37793f4c.chunk.js.map